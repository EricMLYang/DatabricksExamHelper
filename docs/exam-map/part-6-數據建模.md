6.數據建模 (6%): [數據建模 (6%)]

10.數據建模（Data Modeling，6%）

如何設計數據的組織與結構，以便於分析和擴充。

資料建模決定了資料應以何種表格/結構存放，才能既滿足業務需求又兼顧性能。

Databricks 的 Lakehouse 中，資料建模更多關注 Delta Lake 表 的設計，以及在湖倉架構下如何安排銅銀金屬層或星型模型。

範圍：

使用 Delta Lake 實現大型資料集的可擴展數據模型，確保在資料量成長時仍然可以高效查詢。

涉及 Liquid Clustering、Partitioning、Z-Ordering 等資料布局技術：瞭解 Liquid Clustering 如何簡化資料佈局決策並提升查詢性能，以及它與傳統分區、Z-order 的差異（優點在於更自動化，避免過度分區導致的小文件問題等）。

維度模型（Dimensional Modeling）在分析場景的應用，如星型或雪花模型如何組織事實表和維度表，以提升聚合查詢效率。例如，把交易記錄作為事實表，客戶和產品作為維度表，以支援BI查詢。

題目會考你對不同建模方法的理解，以及在 Lakehouse 上落地的方式。

需要的知識：

理解 星型模型 和 雪花模型 的原則，知道何時適合使用維度建模來組織資料（例如資料倉儲場景），以及如何在 Delta Lake 中實作（比如每個維度和事實作成獨立 Delta 表，透過外鍵關聯）。

熟悉 Delta Lake 提供的欄資料佈局優化手段：Partitioning（按欄位劃分目錄存放資料）、Z-Ordering（對單一資料表內的資料重新排序以優化某些欄位的篩選），以及 Liquid Clustering（動態資料重新組織的新功能）。

了解 Liquid Clustering 為何優於傳統 Partition+ZOrder：例如它可以減少元資料負擔，同時自動根據數據分布調整塊，無需明確指定分區欄位。

懂一些 ACID 特性對建模的影響，例如併發寫入下 Delta Lake 保證一致性，這讓我們在建模時不需要像在傳統資料庫那樣過度拆分表來避免鎖。

準備方式：

複習資料庫設計與資料倉儲的經典知識，如第三范式 vs 維度建模的差異。

在 Databricks 上模擬設計一個小型數據倉庫：定義幾個維度表和一個事實表，載入樣本資料，然後對比使用星型模型和單一寬表在查詢效率上的差別。

實驗 Partitioning：例如把事實表按日期分區，測試範圍查詢性能；再實驗 Z-Order：對未分區表執行 ZORDER(BY 日期欄位)，比較查詢速度。

研究 Liquid Clustering 的概念，也許透過官方部落格或Release notes，理解它如何自動整理資料（如果環境支援，可實際操作Liquid Clustering來體驗）。

確保了解 Delta Lake 的 索引和統計資訊 如何在背後輔助查詢（如資料略過依賴儲存在 Delta log 的統計）。

考試注意事項：

可能出現的考題包括給一個場景，問哪種資料模型比較合適。例如，若描述一套報表系統，需要經常按地區和月份統計銷售額，答案傾向於「採用星型模型，把地區和日期作為維度」。另一種題型是問Liquid Clustering vs Partitioning/Z-Order 的優劣：要能回答 Liquid Clustering 的優點（自動、降低維護負擔等）以及何時仍需要傳統分區。也可能問 Delta Lake 特有的建模優勢，例如ACID保證、schema演進等如何讓建模更靈活。答題時，注意對關鍵術語的理解，確保選項中的做法與 Lakehouse 架構最佳實踐一致（例如不會叫你把所有數據集中在一張超寬表而無任何分區/排序）。