# Question #018

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-018`
### ä¾†æº
**ä¾†æº:** Community
### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
A data engineering team wants to use Delta Sharing but is unsure whether to use Databricks-to-Databricks sharing (D2D) or the open Delta Sharing protocol (D2O).

Which of the following statements correctly explains the difference between D2D and D2O?

### é¸é …
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
- **A.** Databricks-to-Databricks sharing (D2D) supports sharing data only through managed tables, while the Open Sharing protocol (D2O) supports both managed and external tables.
- **B.** Databricks-to-Databricks sharing (D2D) uses the legacy Hive metastore, whereas the Open Sharing protocol (D2O) is built on Unity Catalog for newer implementations.
- **C.** Databricks-to-Databricks sharing (D2D) enables data sharing exclusively between Databricks clients, while the Open Sharing protocol (D2O) allows any platform that implements the Delta Sharing open standard to access shared data.
- **D.** Databricks-to-Databricks sharing (D2D) allows sharing with any platform that supports the Delta Sharing open standard, while the Open Sharing protocol (D2O) restricts sharing only to Databricks clients.

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `UC-Sharing`, `Unity-Catalog`
### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Concept-Confusion`
### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Data Sharing

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `C`
### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** C
- **ç¤¾ç¾¤å…±è­˜:** C

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥
**æ ¸å¿ƒæŠ€è¡“:** Delta Sharing / D2D vs D2O
**é—œéµæ¦‚å¿µ:** Databricks å…§éƒ¨ vs é–‹æ”¾å”å®š
**é¡Œç›®é—œéµå­—ï¼š**
- **Databricks-to-Databricks (D2D)**: Databricks å…§éƒ¨å…±äº«
- **Open Delta Sharing (D2O)**: é–‹æ”¾å”å®šå…±äº«
- **any platform**: ä»»ä½•å¹³å°

---

## âœ… æ­£è§£èªªæ˜
### ç‚ºä»€éº¼ C æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

**D2D** é™æ–¼ Databricks ç”¨æˆ¶ä¹‹é–“ï¼Œ**D2O** å¯èˆ‡ä»»ä½•æ”¯æ´ Delta Sharing å”å®šçš„å¹³å°å…±äº«ã€‚

#### D2D vs D2O æ¯”è¼ƒ
| ç‰¹æ€§ | D2D | D2O |
|------|-----|-----|
| **æ¥æ”¶æ–¹** | Databricks ç”¨æˆ¶ | ä»»ä½•å¹³å° |
| **èªè­‰æ–¹å¼** | Unity Catalog | Token/Credential |
| **åŠŸèƒ½æ•´åˆ** | å®Œæ•´ UC åŠŸèƒ½ | åŸºæœ¬è³‡æ–™å­˜å– |
| **ä½¿ç”¨å ´æ™¯** | å…§éƒ¨/åˆä½œå¤¥ä¼´ | å¤–éƒ¨å¹³å°/å·¥å…· |

#### D2D (Databricks-to-Databricks)
```
ç‰¹é»ï¼š
â”œâ”€â”€ Provider å’Œ Recipient éƒ½æ˜¯ Databricks ç”¨æˆ¶
â”œâ”€â”€ ä½¿ç”¨ Unity Catalog é€²è¡Œèº«ä»½é©—è­‰
â”œâ”€â”€ å®Œæ•´æ”¯æ´ UC åŠŸèƒ½ï¼ˆæ²»ç†ã€ç¨½æ ¸ï¼‰
â”œâ”€â”€ æ”¯æ´ Notebook å…±äº«
â””â”€â”€ ä½¿ç”¨ Sharing Identifier è­˜åˆ¥

æµç¨‹ï¼š
Provider (Databricks) â”€â”€UCâ”€â”€> Recipient (Databricks)
```

#### D2O (Open Delta Sharing)
```
ç‰¹é»ï¼š
â”œâ”€â”€ Provider æ˜¯ Databricks ç”¨æˆ¶
â”œâ”€â”€ Recipient å¯ä»¥æ˜¯ä»»ä½•å¹³å°
â”œâ”€â”€ ä½¿ç”¨ Token/Credential é€²è¡Œèªè­‰
â”œâ”€â”€ æ”¯æ´ Pythonã€Pandasã€Sparkã€Power BI ç­‰
â””â”€â”€ åŸºæ–¼é–‹æ”¾å”å®š

æµç¨‹ï¼š
Provider (Databricks) â”€â”€Open Protocolâ”€â”€> Recipient (ä»»ä½•å¹³å°)
```

#### æ”¯æ´çš„ Recipient å¹³å°ï¼ˆD2Oï¼‰
```
D2O æ”¯æ´çš„å¹³å°ï¼š
â”œâ”€â”€ Apache Spark
â”œâ”€â”€ Pandas / Python
â”œâ”€â”€ Power BI
â”œâ”€â”€ Tableau
â”œâ”€â”€ Trino / Presto
â”œâ”€â”€ dbt
â””â”€â”€ ä»»ä½•å¯¦ä½œ Delta Sharing å”å®šçš„å¹³å°
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### A. D2D åªæ”¯æ´ managed tables
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- **D2D å’Œ D2O éƒ½æ”¯æ´ managed å’Œ external tables**
- è¡¨æ ¼é¡å‹ä¸æ˜¯å€åˆ† D2D å’Œ D2O çš„æ¨™æº–
- é€™æ˜¯éŒ¯èª¤çš„æŠ€è¡“æè¿°

### B. D2D ä½¿ç”¨ Hive metastore
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- **D2D å’Œ D2O éƒ½ä½¿ç”¨ Unity Catalog**
- Hive metastore æ˜¯èˆŠç‰ˆæœ¬
- Delta Sharing æ˜¯ Unity Catalog çš„åŠŸèƒ½

### D. é‚è¼¯é¡›å€’
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- **å®Œå…¨ç›¸å**
- D2D æ˜¯é™æ–¼ Databricks
- D2O æ˜¯é–‹æ”¾çµ¦ä»»ä½•å¹³å°
- é€™å€‹é¸é …æŠŠå…©è€…çš„å®šç¾©äº¤æ›äº†

---

## ğŸ§  è¨˜æ†¶æ³•
### å£è¨£
**ã€ŒD2D å…§éƒ¨ç”¨ï¼ŒD2O é–‹æ”¾èµ°ã€**

### å‘½åè¨˜æ†¶
```
D2D = Databricks-to-Databricks
    = Databricks â†” Databricks
    = åƒ…é™ Databricks

D2O = Databricks-to-Open
    = Databricks â†’ ä»»ä½•å¹³å°
    = é–‹æ”¾å”å®š
```

### é¸æ“‡æŒ‡å—
```
å¦‚ä½•é¸æ“‡ D2D æˆ– D2Oï¼Ÿ

Q1: æ¥æ”¶æ–¹æ˜¯å¦ä½¿ç”¨ Databricksï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ D2Dï¼ˆæ›´å¤šæ•´åˆåŠŸèƒ½ï¼‰
â””â”€â”€ å¦ â†’ D2Oï¼ˆé–‹æ”¾å”å®šï¼‰

Q2: éœ€è¦å®Œæ•´ UC æ²»ç†åŠŸèƒ½å—ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ D2D
â””â”€â”€ å¦ â†’ D2O
```

### Delta Sharing æ¶æ§‹
```
                 Delta Sharing
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
       D2D                         D2O
   (Databricks                  (Open Protocol)
    to Databricks)
        â”‚                           â”‚
        â–¼                           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Databricksâ”‚              â”‚  Any Platform â”‚
  â”‚  Users   â”‚              â”‚ (Spark, Power â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  BI, Pandas)  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŠŸèƒ½æ¯”è¼ƒè¡¨
| åŠŸèƒ½ | D2D | D2O |
|------|-----|-----|
| Unity Catalog æ²»ç† | âœ… | æœ‰é™ |
| ç¨½æ ¸è¿½è¹¤ | âœ… | âœ… |
| Notebook å…±äº« | âœ… | âŒ |
| è·¨å¹³å°å­˜å– | âŒ | âœ… |
| Token èªè­‰ | âŒ | âœ… |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶
- [Delta Sharing Overview](https://docs.databricks.com/data-sharing/index.html)
- [Databricks-to-Databricks Sharing](https://docs.databricks.com/data-sharing/share-data-databricks.html)
- [Open Sharing Protocol](https://docs.databricks.com/data-sharing/share-data-open.html)

---

**[è¿”å›é¡Œç›®](#question-018)**
