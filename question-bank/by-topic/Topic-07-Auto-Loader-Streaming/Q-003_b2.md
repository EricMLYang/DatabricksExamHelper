# Question #003

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-003`

### ä¾†æº
**ä¾†æº:** Community

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

Given the following Structured Streaming query:

```python
(spark.readStream
        .table("orders")
    .writeStream
        .option("checkpointLocation", checkpointPath)
        .table("Output_Table")
)
```

Which of the following is the trigger Interval for this query?

### é¸é …

- **A.** Every half second
- **B.** Every half min
- **C.** Every half hour
- **D.** The query will run in batch mode to process all available data at once, then the trigger stops.

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Streaming`, `Databricks-Workflows`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Default-Value`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Development

---

## ç­”æ¡ˆèˆ‡ä¾†æº

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `A`

### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** A
- **ç¤¾ç¾¤å…±è­˜:** A

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥

**æ ¸å¿ƒæŠ€è¡“:** Structured Streaming / Trigger Intervals
**é—œéµæ¦‚å¿µ:** Default Trigger, processingTime, Micro-batch Processing

**é¡Œç›®é—œéµå­—ï¼š**
- **No trigger specified**: ç¨‹å¼ç¢¼ä¸­æ²’æœ‰æŒ‡å®š `.trigger()` é¸é …ã€‚
- **writeStream**: é€™æ˜¯ä¸€å€‹ä¸²æµå¯«å…¥æ“ä½œã€‚
- **Default behavior**: è€ƒå¯Ÿé è¨­è¡Œç‚ºçš„çŸ¥è­˜ã€‚

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ A æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

**æŠ€è¡“åŸç†ï¼š**

1. **é è¨­ Trigger è¡Œç‚º**:
   ç•¶ Structured Streaming æŸ¥è©¢æ²’æœ‰æ˜ç¢ºæŒ‡å®š `trigger` é¸é …æ™‚ï¼ŒSpark æœƒä½¿ç”¨é è¨­çš„è§¸ç™¼é–“éš”ï¼š**500 æ¯«ç§’ï¼ˆåŠç§’ï¼‰**ã€‚

2. **ç­‰æ•ˆç¨‹å¼ç¢¼**:
   ä¸æŒ‡å®š trigger ç­‰åŒæ–¼ï¼š
   ```python
   .trigger(processingTime="500ms")
   ```
   æˆ–
   ```python
   .trigger(processingTime="0.5 seconds")
   ```

3. **å¾®æ‰¹æ¬¡è™•ç†æ¨¡å¼**:
   åœ¨æ­¤æ¨¡å¼ä¸‹ï¼ŒSpark æœƒæ¯ 500 æ¯«ç§’æª¢æŸ¥ä¸€æ¬¡æ˜¯å¦æœ‰æ–°è³‡æ–™åˆ°é”ï¼Œå¦‚æœæœ‰å‰‡è™•ç†ã€‚

**å®˜æ–¹æ–‡ä»¶èªªæ˜ï¼š**

> "If no trigger is specified, the query will be executed in micro-batch mode with a default trigger interval of 500ms."

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### B - Every half min (30 ç§’)

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

- **ä¸æ˜¯é è¨­å€¼**: é è¨­å€¼æ˜¯ 500 æ¯«ç§’ï¼Œä¸æ˜¯ 30 ç§’ã€‚
- **è‹¥è¦é”æˆæ­¤æ•ˆæœ**: éœ€è¦æ˜ç¢ºè¨­å®š `.trigger(processingTime="30 seconds")`ã€‚

### C - Every half hour (30 åˆ†é˜)

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

- **ä¸æ˜¯é è¨­å€¼**: é€™æ˜¯ä¸€å€‹éå¸¸é•·çš„é–“éš”ï¼Œä¸æ˜¯ Spark çš„é è¨­è¨­å®šã€‚
- **è‹¥è¦é”æˆæ­¤æ•ˆæœ**: éœ€è¦æ˜ç¢ºè¨­å®š `.trigger(processingTime="30 minutes")`ã€‚

### D - Batch mode (ä¸€æ¬¡è™•ç†å…¨éƒ¨)

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

- **æè¿°çš„æ˜¯ Trigger.Once**: é€™å€‹é¸é …æè¿°çš„è¡Œç‚ºå°æ‡‰æ–¼ `.trigger(once=True)` æˆ– `.trigger(availableNow=True)`ã€‚
- **é è¨­ä¸æ˜¯ Batch mode**: é è¨­æ˜¯é€£çºŒçš„å¾®æ‰¹æ¬¡è™•ç†ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§æ‰¹æ¬¡è™•ç†ã€‚
- **Trigger.Once ç”¨é€”**: é©ç”¨æ–¼åªæƒ³è™•ç†ä¸€æ¬¡ç¾æœ‰è³‡æ–™ç„¶å¾Œåœæ­¢çš„å ´æ™¯ã€‚

---

## ğŸ§  è¨˜æ†¶æ³•

### å£è¨£

**ã€Œæ²’è¨­ Triggerï¼ŒåŠç§’ä¸€æ‰¹ã€**

- é è¨­ = 500ms = 0.5 ç§’ = åŠç§’

### Trigger é¡å‹æ¯”è¼ƒè¡¨

| Trigger é¡å‹ | è¨­å®šæ–¹å¼ | è¡Œç‚º |
|-------------|---------|------|
| **Default** | ä¸æŒ‡å®š | æ¯ 500ms è™•ç†ä¸€æ¬¡ |
| **ProcessingTime** | `.trigger(processingTime="10 seconds")` | æ¯ 10 ç§’è™•ç†ä¸€æ¬¡ |
| **Once** | `.trigger(once=True)` | è™•ç†ä¸€æ¬¡å¾Œåœæ­¢ |
| **AvailableNow** | `.trigger(availableNow=True)` | è™•ç†æ‰€æœ‰å¯ç”¨è³‡æ–™å¾Œåœæ­¢ |
| **Continuous** | `.trigger(continuous="1 second")` | é€£çºŒè™•ç†æ¨¡å¼ï¼ˆå¯¦é©—æ€§ï¼‰ |

### å¸¸è¦‹é è¨­å€¼é€Ÿè¨˜

| é …ç›® | é è¨­å€¼ |
|------|--------|
| Trigger interval | 500 ms |
| Watermark delay | ç„¡ï¼ˆä¸ä¸Ÿæ£„é²åˆ°è³‡æ–™ï¼‰ |
| Output mode | Append |
| Checkpoint location | å¿…é ˆæŒ‡å®šï¼ˆç„¡é è¨­ï¼‰ |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶

- [Structured Streaming Triggers](https://docs.databricks.com/structured-streaming/triggers.html)
- [Default Trigger Interval](https://docs.databricks.com/structured-streaming/triggers.html#what-is-the-default-trigger-interval)
- [Spark Streaming Programming Guide](https://spark.apache.org/docs/latest/structured-streaming-programming-guide.html#triggers)

---

**[è¿”å›é¡Œç›®](#question-003)**
