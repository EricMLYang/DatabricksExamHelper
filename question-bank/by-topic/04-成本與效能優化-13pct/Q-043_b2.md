# Question #043

---

## 題目資訊
### 題目編號
**ID:** `Q-043`
### 來源
**來源:** Community
### 難度等級
**難度:** `L1-Basic`

---

## 題目內容
### 題幹
<!-- ⚠️ 保持英文原文，不要翻譯 -->
Which of the following panels is Not included in the Query Profile view within Databricks SQL?

### 選項
<!-- ⚠️ 保持英文原文，不要翻譯 -->
- **A.** Details
- **B.** Query text
- **C.** Query source
- **D.** Top operators

---

## 標籤系統
### Topic Tags (技術主題標籤)
**Topics:** `Databricks-SQL`, `Spark-Performance`
### Trap Tags (陷阱類型標籤)
**Traps:** (無)
### Knowledge Domain (知識領域)
**Domain:** Data Engineering / Performance Optimization

---

## 答案與來源
### 正確答案
**正解:** `C`
### 答案來源
- **來源標註答案:** C
- **社群共識:** C

---

# 題目解析

---

## 📍 考點識別
**核心技術:** Databricks SQL Query Profile
**關鍵概念:** Query Profile 面板組成
**題目關鍵字：**
- **Query Profile view**: 查詢剖析視圖
- **panels**: 面板
- **Not included**: 不包含的項目

---

## ✅ 正解說明
### 為什麼 C 是正確答案？

**Query source（查詢來源）** 不是 Query Profile 的標準面板。

#### Query Profile 包含的三個面板
| 面板 | 說明 |
|------|------|
| **Details** | 查詢執行的詳細指標（時間、記憶體等）|
| **Top operators** | 顯示最耗資源的運算子 |
| **Query text** | 顯示實際執行的 SQL 語法 |

#### Query Profile 面板架構
```
Query Profile View
├── Details Panel
│   ├── Execution Time
│   ├── Rows Processed
│   └── Memory Usage
│
├── Top Operators Panel
│   ├── 最耗時的運算子
│   ├── Scan / Filter / Join
│   └── 效能瓶頸標示
│
└── Query Text Panel
    └── 實際執行的 SQL 語法
```

#### 為什麼沒有 Query Source？
- **Query source** 指的是查詢的來源（如：Dashboard、Notebook、API）
- 這是**執行歷史**的資訊，不是**效能剖析**的資訊
- Query Profile 專注於**查詢執行效能**，而非**查詢來源追蹤**

---

## ❌ 錯誤選項排除（這些都是 Query Profile 的面板）

### A. Details
**為什麼這是正確的面板？**
- Details 面板顯示查詢執行的詳細資訊
- 包含執行時間、處理行數、記憶體使用量等
- 是診斷效能問題的核心面板

### B. Query text
**為什麼這是正確的面板？**
- Query text 面板顯示實際執行的 SQL
- 方便確認執行的查詢內容
- 可以檢視經過優化器處理後的語法

### D. Top operators
**為什麼這是正確的面板？**
- Top operators 面板顯示最耗資源的運算子
- 快速識別效能瓶頸
- 顯示 Scan、Filter、Join、Aggregate 等操作

---

## 🧠 記憶法
### 口訣
**「Query Profile 三面板：Details 詳情、Top 運算、Text 語法」**

### Query Profile 面板記憶表
```
Query Profile 三劍客：
├── D - Details（詳情）
├── T - Top operators（運算子）
└── Q - Query text（語法）

不包含：
└── S - Source（來源）← 本題答案
```

### 面板功能對照
| 面板 | 回答什麼問題 |
|------|-------------|
| Details | 查詢花了多少時間？用了多少資源？ |
| Top operators | 哪個步驟最慢？瓶頸在哪？ |
| Query text | 實際執行了什麼 SQL？ |

### 區分 Profile vs History
```
Query Profile（效能剖析）：
├── 專注於「查詢怎麼執行」
├── 顯示運算子、時間、資源
└── 用於效能優化

Query History（執行歷史）：
├── 專注於「誰在何時執行什麼」
├── 顯示來源、使用者、時間戳
└── 用於審計追蹤
```

### 記憶技巧
- **Profile** = 剖析 = 看「怎麼跑」
- **Source** = 來源 = 看「從哪來」
- Profile 不管 Source，只管效能！

---

## 📚 官方文件
- [Query Profile](https://docs.databricks.com/en/sql/user/queries/query-profile.html)
- [Query optimization recommendations](https://docs.databricks.com/en/sql/user/queries/query-optimization-recommendations.html)

---

**[返回題目](#question-043)**
