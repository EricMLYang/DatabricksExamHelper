# Question #059

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-059`
### ä¾†æº
**ä¾†æº:** Community
### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
Which of the following statements is Not true about the Query Profile in Databricks SQL?

### é¸é …
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
- **A.** The Query Profile allows users to directly edit and re-run specific parts of the query plan to interactively fix issues in the query.
- **B.** The Query Profile helps discover common SQL performance issues, such as exploding joins or full table scans.
- **C.** The Query Profile visualizes each query operator and related metrics, such as execution time, memory usage, and number of rows processed.
- **D.** The Query Profile helps identify the slowest part of a query execution and assess the impact of query modifications.

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Databricks-SQL`, `Spark-Performance`
### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** (ç„¡)
### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Performance Optimization

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `A`
### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** A
- **ç¤¾ç¾¤å…±è­˜:** A

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥
**æ ¸å¿ƒæŠ€è¡“:** Databricks SQL Query Profile
**é—œéµæ¦‚å¿µ:** æ•ˆèƒ½è¨ºæ–·ã€æŸ¥è©¢è¨ˆåŠƒè¦–è¦ºåŒ–
**é¡Œç›®é—œéµå­—ï¼š**
- **Query Profile**: æŸ¥è©¢å‰–æå·¥å…·
- **NOT true**: æ‰¾å‡ºéŒ¯èª¤çš„æ•˜è¿°
- **directly edit and re-run**: ç›´æ¥ç·¨è¼¯ä¸¦é‡æ–°åŸ·è¡Œ

---

## âœ… æ­£è§£èªªæ˜
### ç‚ºä»€éº¼ A æ˜¯æ­£ç¢ºç­”æ¡ˆï¼ˆéŒ¯èª¤çš„æ•˜è¿°ï¼‰ï¼Ÿ

Query Profile æ˜¯ä¸€å€‹**è¨ºæ–·å’Œè¦–è¦ºåŒ–å·¥å…·**ï¼Œä½†å®ƒ**ä¸èƒ½**ç›´æ¥ç·¨è¼¯æˆ–åŸ·è¡ŒæŸ¥è©¢è¨ˆåŠƒçš„éƒ¨åˆ†ã€‚

#### Query Profile å¯ä»¥åšçš„äº‹
| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **è¦–è¦ºåŒ–æŸ¥è©¢è¨ˆåŠƒ** | é¡¯ç¤ºæ¯å€‹é‹ç®—å­çš„åŸ·è¡Œé †åº |
| **é¡¯ç¤ºæ•ˆèƒ½æŒ‡æ¨™** | åŸ·è¡Œæ™‚é–“ã€è¨˜æ†¶é«”ä½¿ç”¨ã€è™•ç†è¡Œæ•¸ |
| **è­˜åˆ¥ç“¶é ¸** | æ‰¾å‡ºæœ€æ…¢çš„éƒ¨åˆ† |
| **ç™¼ç¾æ•ˆèƒ½å•é¡Œ** | çˆ†ç‚¸æ€§ Joinã€å…¨è¡¨æƒæ |

#### Query Profile ä¸èƒ½åšçš„äº‹
| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| âŒ **ç·¨è¼¯æŸ¥è©¢è¨ˆåŠƒ** | åªèƒ½æŸ¥çœ‹ï¼Œä¸èƒ½ä¿®æ”¹ |
| âŒ **é‡æ–°åŸ·è¡Œéƒ¨åˆ†æŸ¥è©¢** | åªèƒ½åˆ†æå·²åŸ·è¡Œçš„æŸ¥è©¢ |
| âŒ **äº’å‹•å¼ä¿®å¾©** | éœ€è¦å›åˆ° SQL ç·¨è¼¯å™¨ä¿®æ”¹ |

#### æ­£ç¢ºçš„å„ªåŒ–æµç¨‹
```
1. åŸ·è¡ŒæŸ¥è©¢
      â†“
2. æŸ¥çœ‹ Query Profile
      â†“
3. è­˜åˆ¥æ•ˆèƒ½å•é¡Œ
      â†“
4. å›åˆ° SQL ç·¨è¼¯å™¨ä¿®æ”¹æŸ¥è©¢  â† åœ¨é€™è£¡ä¿®æ”¹ï¼Œä¸æ˜¯åœ¨ Query Profile
      â†“
5. é‡æ–°åŸ·è¡ŒæŸ¥è©¢
      â†“
6. æ¯”è¼ƒ Query Profile è®ŠåŒ–
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤ï¼ˆé€™äº›æ•˜è¿°éƒ½æ˜¯æ­£ç¢ºçš„ï¼‰

### B. ...helps discover common SQL performance issues...
**ç‚ºä»€éº¼é€™æ˜¯æ­£ç¢ºçš„ï¼Ÿ**
- Query Profile æœƒæ¨™ç¤ºæ•ˆèƒ½å•é¡Œ
- å¯ä»¥è­˜åˆ¥çˆ†ç‚¸æ€§ Joinï¼ˆExploding Joinsï¼‰
- å¯ä»¥ç™¼ç¾å…¨è¡¨æƒæï¼ˆFull Table Scansï¼‰

### C. ...visualizes each query operator and related metrics...
**ç‚ºä»€éº¼é€™æ˜¯æ­£ç¢ºçš„ï¼Ÿ**
- é¡¯ç¤ºæ¯å€‹é‹ç®—å­ï¼ˆScanã€Filterã€Joinã€Aggregate ç­‰ï¼‰
- é¡¯ç¤ºåŸ·è¡Œæ™‚é–“ï¼ˆDurationï¼‰
- é¡¯ç¤ºè¨˜æ†¶é«”ä½¿ç”¨ï¼ˆMemoryï¼‰
- é¡¯ç¤ºè™•ç†çš„è¡Œæ•¸ï¼ˆRows Processedï¼‰

### D. ...helps identify the slowest part...assess the impact...
**ç‚ºä»€éº¼é€™æ˜¯æ­£ç¢ºçš„ï¼Ÿ**
- ç“¶é ¸é‹ç®—å­æœƒè¢«çªé¡¯
- ä¿®æ”¹å‰å¾Œå¯ä»¥æ¯”è¼ƒ Query Profile
- å¯ä»¥è©•ä¼°å„ªåŒ–çš„æ•ˆæœ

---

## ğŸ§  è¨˜æ†¶æ³•
### å£è¨£
**ã€ŒQuery Profile åªçœ‹ä¸æ”¹ï¼Œè¨ºæ–·å•é¡Œå›å»æ”¹ã€**

### Query Profile åŠŸèƒ½é€Ÿè¦½
```
Query Profile æä¾›ï¼š
â”œâ”€â”€ ğŸ“Š è¦–è¦ºåŒ–æŸ¥è©¢è¨ˆåŠƒ
â”œâ”€â”€ â±ï¸ æ¯å€‹æ­¥é©Ÿçš„åŸ·è¡Œæ™‚é–“
â”œâ”€â”€ ğŸ’¾ è¨˜æ†¶é«”ä½¿ç”¨é‡
â”œâ”€â”€ ğŸ“ˆ è™•ç†çš„è³‡æ–™é‡
â””â”€â”€ âš ï¸ æ•ˆèƒ½å•é¡Œè­¦ç¤º

Query Profile ä¸æä¾›ï¼š
â”œâ”€â”€ âŒ ç›´æ¥ç·¨è¼¯æŸ¥è©¢
â”œâ”€â”€ âŒ éƒ¨åˆ†åŸ·è¡ŒåŠŸèƒ½
â””â”€â”€ âŒ äº’å‹•å¼èª¿æ•´
```

### å¸¸è¦‹æ•ˆèƒ½å•é¡Œè­˜åˆ¥
| å•é¡Œé¡å‹ | Query Profile é¡¯ç¤º |
|---------|-------------------|
| å…¨è¡¨æƒæ | Scan é‹ç®—å­è™•ç†å¤§é‡è¡Œ |
| çˆ†ç‚¸æ€§ Join | Join å¾Œè¡Œæ•¸æš´å¢ |
| è³‡æ–™å‚¾æ–œ | æŸäº› Task æ™‚é–“ç‰¹åˆ¥é•· |
| æº¢å‡ºåˆ°ç£ç¢Ÿ | Spill to Disk æŒ‡æ¨™ |

### ä½¿ç”¨ Query Profile çš„æœ€ä½³å¯¦è¸
| æ­¥é©Ÿ | å‹•ä½œ |
|------|------|
| 1 | åŸ·è¡ŒæŸ¥è©¢ |
| 2 | é–‹å•Ÿ Query Profile |
| 3 | æ‰¾å‡ºæ™‚é–“æœ€é•·çš„é‹ç®—å­ |
| 4 | åˆ†ææ ¹æœ¬åŸå›  |
| 5 | å› SQL ç·¨è¼¯å™¨ä¿®æ”¹ |
| 6 | é‡æ–°åŸ·è¡Œä¸¦æ¯”è¼ƒ |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶
- [Query Profile](https://docs.databricks.com/en/sql/user/queries/query-profile.html)
- [Query optimization recommendations](https://docs.databricks.com/en/sql/user/queries/query-optimization-recommendations.html)

---

**[è¿”å›é¡Œç›®](#question-059)**
