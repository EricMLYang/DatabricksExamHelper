# Question #033

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-033`

### ä¾†æº
**ä¾†æº:** Community

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

An organization plans to use Delta Sharing for enabling large dataset access by multiple clients across AWS, Azure, and GCP. A senior data engineer has recommended migrating the dataset to Cloudflare R2 object storage prior to initiating the data sharing process.

Which benefit does Cloudflare R2 offer in this Delta Sharing setup?

### é¸é …

- **A.** Provides standard API to avoid cloud vendor lock-in
- **B.** Eliminates cloud provider egress cost for outbound data transfers
- **C.** Provides native support for dynamic data masking
- **D.** Offer built-in support for streaming data with automatic checkpointing

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Delta-Sharing`, `Cloud-Storage`, `Cost-Optimization`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Keyword-Match`, `Domain-Knowledge`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Infrastructure

---

## ç­”æ¡ˆèˆ‡ä¾†æº

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `B`

### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** B
- **ç¤¾ç¾¤å…±è­˜:** B

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥

**æ ¸å¿ƒæŠ€è¡“:** Delta Sharing / Cloud Storage Cost
**é—œéµæ¦‚å¿µ:** Egress cost, Cloudflare R2, Cross-cloud data sharing

**é¡Œç›®é—œéµå­—ï¼š**
- **multiple clients across AWS, Azure, and GCP**: è·¨å¤šé›²ç’°å¢ƒçš„å®¢æˆ¶ã€‚
- **Cloudflare R2**: ç‰¹å®šçš„ç‰©ä»¶å„²å­˜æœå‹™ã€‚
- **benefit**: å¥½è™•/å„ªå‹¢ã€‚

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ B æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

**æŠ€è¡“åŸç†ï¼š**

1. **å‚³çµ±é›²ç«¯å„²å­˜çš„ Egress è²»ç”¨å•é¡Œ**:
   - AWS S3ã€Azure Blobã€GCS éƒ½å°**å‡ºç«™æµé‡**æ”¶è²»
   - ç•¶è³‡æ–™è¢«ä¸‹è¼‰åˆ°å…¶ä»–é›²ç«¯æ™‚ï¼Œæœƒç”¢ç”Ÿé«˜é¡è²»ç”¨
   - è·¨é›²ç«¯åˆ†äº«å¤§å‹è³‡æ–™é›†æˆæœ¬æ¥µé«˜

2. **Cloudflare R2 çš„å„ªå‹¢**:
   - **é›¶ Egress è²»ç”¨**: ä¸æ”¶å–å‡ºç«™æµé‡è²»ç”¨
   - **S3 ç›¸å®¹ API**: å¯ç›´æ¥ä½¿ç”¨ç¾æœ‰å·¥å…·
   - ç‰¹åˆ¥é©åˆ Delta Sharing çš„è·¨é›²å ´æ™¯

3. **æˆæœ¬æ¯”è¼ƒï¼ˆä»¥ 1TB è³‡æ–™ç‚ºä¾‹ï¼‰**:
   | é›²ç«¯æœå‹™ | Egress è²»ç”¨ï¼ˆç´„ï¼‰|
   |---------|-----------------|
   | AWS S3 | ~$90/TB |
   | Azure Blob | ~$87/TB |
   | GCS | ~$120/TB |
   | **Cloudflare R2** | **$0** |

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### A - æ¨™æº– API é¿å…å» å•†é–å®š

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

- **ä¸æ˜¯ä¸»è¦å„ªå‹¢**: é›–ç„¶ R2 æä¾› S3 ç›¸å®¹ APIï¼Œä½†é€™ä¸æ˜¯é¸æ“‡ R2 çš„ä¸»è¦åŸå› ã€‚
- **å…¶ä»–æœå‹™ä¹Ÿæœ‰**: MinIO ç­‰ä¹Ÿæä¾› S3 ç›¸å®¹ APIã€‚
- **é¡Œç›®æƒ…å¢ƒ**: é‡é»æ˜¯ã€Œè·¨å¤šé›²åˆ†äº«å¤§å‹è³‡æ–™é›†ã€ï¼Œæˆæœ¬æ˜¯é—œéµè€ƒé‡ã€‚

### C - å‹•æ…‹è³‡æ–™é®è”½

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

- **R2 ä¸æä¾›æ­¤åŠŸèƒ½**: Cloudflare R2 æ˜¯ç‰©ä»¶å„²å­˜ï¼Œä¸æä¾›è³‡æ–™é®è”½ã€‚
- **æ··æ·†åŠŸèƒ½**: å‹•æ…‹é®è”½æ˜¯ Unity Catalog æˆ–è³‡æ–™åº«çš„åŠŸèƒ½ã€‚

### D - ä¸²æµæ”¯æ´èˆ‡è‡ªå‹• checkpoint

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

- **R2 ä¸æä¾›æ­¤åŠŸèƒ½**: R2 æ˜¯ç‰©ä»¶å„²å­˜ï¼Œä¸æ˜¯ä¸²æµå¹³å°ã€‚
- **æ··æ·†æ¦‚å¿µ**: è‡ªå‹• checkpointing æ˜¯ Spark Streaming çš„åŠŸèƒ½ã€‚

---

## ğŸ§  è¨˜æ†¶æ³•

### å£è¨£

**ã€ŒR2 è·¨é›²åˆ†äº«ï¼ŒEgress å…¨å…è²»ã€**

### Cloudflare R2 ç‰¹é»

| ç‰¹é» | èªªæ˜ |
|------|------|
| **é›¶ Egress è²»ç”¨** | å‡ºç«™æµé‡ä¸æ”¶è²» |
| S3 ç›¸å®¹ | å¯ä½¿ç”¨ç¾æœ‰ S3 å·¥å…· |
| å…¨çƒåˆ†æ•£ | å¤šå€åŸŸéƒ¨ç½² |
| æŒ‰éœ€è¨ˆè²» | åªä»˜å„²å­˜å’Œè«‹æ±‚è²»ç”¨ |

### Delta Sharing è·¨é›²æ¶æ§‹

```
Provider (Cloudflare R2)
      â”‚
      â”œâ”€â”€ AWS Consumer â†’ é›¶ Egress
      â”‚
      â”œâ”€â”€ Azure Consumer â†’ é›¶ Egress
      â”‚
      â””â”€â”€ GCP Consumer â†’ é›¶ Egress
```

### ä½•æ™‚é¸æ“‡ Cloudflare R2

| å ´æ™¯ | å»ºè­° |
|------|------|
| å¤§é‡è·¨é›²è³‡æ–™åˆ†äº« | âœ… R2 |
| å–®ä¸€é›²ç«¯å…§éƒ¨ä½¿ç”¨ | åŸç”Ÿå„²å­˜å³å¯ |
| éœ€è¦é€²éšå®‰å…¨åŠŸèƒ½ | è€ƒæ…®å…¶ä»–æ–¹æ¡ˆ |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶

- [Delta Sharing Documentation](https://docs.databricks.com/data-sharing/index.html)
- [Cloudflare R2](https://www.cloudflare.com/products/r2/)

---

**[è¿”å›é¡Œç›®](#question-033)**
