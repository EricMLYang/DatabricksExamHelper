# Question #047

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-047`
### ä¾†æº
**ä¾†æº:** Community
### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
A data engineer is configuring a job using Databricks Asset Bundles and wants to limit its access to authorized users. The following job definition includes tasks and job clusters, but the engineer also needs to define which user groups can manage or view the job.

```yaml
resources:
    jobs:
        my-job:
            name: analytics-job
            tasks: [...]
            job_clusters: [...]
            __________:
                - group_name: devops-team
                  level: CAN_MANAGE
                - group_name: qa-team
                  level: CAN_VIEW
```

Which option correctly fills in the blank to meet the specified requirement?

### é¸é …
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
- **A.** roles
- **B.** job_settings
- **C.** permissions
- **D.** access_control

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Databricks-Workflows`, `Access-Control`
### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Syntax-Confusion`
### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Development & Operations

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `C`
### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** C
- **ç¤¾ç¾¤å…±è­˜:** C

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥
**æ ¸å¿ƒæŠ€è¡“:** Databricks Asset Bundles (DABs) Job Configuration
**é—œéµæ¦‚å¿µ:** Job æ¬Šé™è¨­å®šã€ACL (Access Control List)
**é¡Œç›®é—œéµå­—ï¼š**
- **Databricks Asset Bundles**: Databricks çš„åŸºç¤è¨­æ–½å³ç¨‹å¼ç¢¼ (IaC) å·¥å…·
- **permissions**: DABs ä¸­ç”¨æ–¼å®šç¾©å­˜å–æ¬Šé™çš„å±¬æ€§
- **CAN_MANAGE / CAN_VIEW**: æ¬Šé™ç­‰ç´š

---

## âœ… æ­£è§£èªªæ˜
### ç‚ºä»€éº¼ C æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

åœ¨ Databricks Asset Bundles ä¸­ï¼Œ`permissions` æ˜¯ç”¨æ–¼å®šç¾© job å­˜å–æ§åˆ¶åˆ—è¡¨ (ACL) çš„æ­£ç¢ºå±¬æ€§åç¨±ã€‚

#### å®Œæ•´çš„ DABs Job æ¬Šé™é…ç½®
```yaml
resources:
  jobs:
    my-job:
      name: analytics-job
      tasks:
        - task_key: main_task
          notebook_task:
            notebook_path: ./notebooks/main
      job_clusters:
        - job_cluster_key: main_cluster
          new_cluster:
            spark_version: "13.3.x-scala2.12"
            num_workers: 2
      permissions:  # â† æ­£ç¢ºçš„å±¬æ€§åç¨±
        - group_name: devops-team
          level: CAN_MANAGE
        - group_name: qa-team
          level: CAN_VIEW
        - user_name: admin@company.com
          level: IS_OWNER
```

#### å¯ç”¨çš„æ¬Šé™ç­‰ç´š
| æ¬Šé™ç­‰ç´š | èªªæ˜ |
|---------|------|
| `IS_OWNER` | å®Œå…¨æ§åˆ¶ï¼ŒåŒ…å«åˆªé™¤ |
| `CAN_MANAGE` | ç®¡ç†æ¬Šé™ï¼ˆç·¨è¼¯ã€åŸ·è¡Œã€æŸ¥çœ‹ï¼‰ |
| `CAN_MANAGE_RUN` | åŸ·è¡Œå’ŒæŸ¥çœ‹æ¬Šé™ |
| `CAN_VIEW` | åƒ…æŸ¥çœ‹æ¬Šé™ |

#### å¯æˆæ¬Šçš„å°è±¡é¡å‹
```yaml
permissions:
  - user_name: user@example.com     # å–®ä¸€ç”¨æˆ¶
    level: CAN_MANAGE
  - group_name: data-team           # ç¾¤çµ„
    level: CAN_VIEW
  - service_principal_name: sp-name # æœå‹™ä¸»é«”
    level: CAN_MANAGE_RUN
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### A. roles
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- `roles` ä¸æ˜¯ DABs job é…ç½®ä¸­çš„æœ‰æ•ˆå±¬æ€§
- DABs ä½¿ç”¨ `permissions` è€Œé `roles`
- `roles` å¯èƒ½èˆ‡å…¶ä»–ç³»çµ±çš„æ¦‚å¿µæ··æ·†

### B. job_settings
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- `job_settings` ä¸æ˜¯æ¬Šé™ç›¸é—œçš„å±¬æ€§
- è¨­å®šèˆ‡æ¬Šé™æ˜¯ä¸åŒçš„æ¦‚å¿µ
- æ¬Šé™å°ˆé–€ä½¿ç”¨ `permissions` å±¬æ€§

### D. access_control
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- é›–ç„¶æ¦‚å¿µæ­£ç¢ºï¼ˆå­˜å–æ§åˆ¶ï¼‰
- ä½† DABs çš„èªæ³•ä½¿ç”¨ `permissions` è€Œé `access_control`
- é€™æ˜¯å¸¸è¦‹çš„èªæ³•æ··æ·†é™·é˜±

---

## ğŸ§  è¨˜æ†¶æ³•
### å£è¨£
**ã€ŒDABs æ¬Šé™ç”¨ permissionsï¼Œlevel å®šç­‰ç´šã€**

### DABs Job é…ç½®çµæ§‹
```yaml
resources:
  jobs:
    <job-key>:
      name: <job-name>
      tasks: [...]           # ä»»å‹™å®šç¾©
      job_clusters: [...]    # å¢é›†é…ç½®
      permissions: [...]     # æ¬Šé™è¨­å®š â† è¨˜ä½é€™å€‹ï¼
      schedule:              # æ’ç¨‹è¨­å®š
        quartz_cron_expression: "0 0 * * * ?"
        timezone_id: "UTC"
```

### DABs å¸¸è¦‹è³‡æºé¡å‹åŠæ¬Šé™
| è³‡æºé¡å‹ | é…ç½®ä½ç½® | æ¬Šé™å±¬æ€§ |
|---------|---------|---------|
| Jobs | `resources.jobs` | `permissions` |
| Pipelines | `resources.pipelines` | `permissions` |
| Experiments | `resources.experiments` | `permissions` |
| Models | `resources.models` | `permissions` |

### æ¬Šé™ç­‰ç´šè¨˜æ†¶æ³•
```
IS_OWNER > CAN_MANAGE > CAN_MANAGE_RUN > CAN_VIEW
   å®Œå…¨      ç®¡ç†         åŸ·è¡Œ           æŸ¥çœ‹
```

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶
- [Databricks Asset Bundles permissions](https://docs.databricks.com/en/dev-tools/bundles/permissions.html)
- [Job access control](https://docs.databricks.com/en/security/auth-authz/access-control/jobs-acl.html)

---

**[è¿”å›é¡Œç›®](#question-047)**
