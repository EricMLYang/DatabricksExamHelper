# Question #002

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-002`

### ä¾†æº
**ä¾†æº:** Sample / Community

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

A data engineering team at a large analytics company is working on improving data governance and cataloging across their Databricks environment. As part of this initiative, the lead data engineer is tasked with applying descriptive tags to several tables in the company's Delta Lake to make data discovery and management easier. While reviewing documentation, the engineer encounters multiple SQL command formats for setting tags on tables in Databricks and wants to confirm which command syntax is valid.

Which of the following is **Not** a correct command to set tags on a table in Databicks?

### é¸é …

- **A.** `ALTER TABLE table_name SET TAG tag_key = tag_value;`
- **B.** `ALTER TABLE table_name SET TAGS ('tag_key1' = 'tag_value1', 'tag_key2' = 'tag_value2');`
- **C.** `SET TAG ON TABLE table_name tag_key = tag_value;`
- **D.** `SET TAG ON TABLE table_name tag_key;`

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Unity-Catalog`, `UC-Data-Governance`, `Databricks-SQL`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Syntax-Confusion`, `Keyword-Typo`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Governance

---

## ç­”æ¡ˆèˆ‡ä¾†æº

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `A`

### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** A
- **ç¤¾ç¾¤å…±è­˜:** A

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥

**æ ¸å¿ƒæŠ€è¡“:** Unity Catalog / Data Governance / SQL Syntax  
**é—œéµæ¦‚å¿µ:** SQL Syntax for Tags (`SET TAGS`)

**é¡Œç›®é—œéµå­—ï¼š**
- **Set tags**: è¨­å®šæ¨™ç±¤
- **Not a correct command**: é¸å‡ºéŒ¯èª¤çš„èªæ³•

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ A æ˜¯æ­£ç¢ºç­”æ¡ˆï¼ˆå› ç‚ºå®ƒæ˜¯éŒ¯èª¤çš„æŒ‡ä»¤ï¼‰ï¼Ÿ

**æŠ€è¡“åŸç†ï¼š**

åœ¨ Databricks SQL (ç‰¹åˆ¥æ˜¯ Unity Catalog) ä¸­ï¼Œä¿®æ”¹è¡¨æ ¼æ¨™ç±¤çš„æ¨™æº–èªæ³•é—œéµå­—æ˜¯è¤‡æ•¸å½¢å¼çš„ **`SET TAGS`**ï¼Œè€Œä¸æ˜¯å–®æ•¸çš„ `SET TAG`ã€‚

**æ­£ç¢ºèªæ³•ï¼š**

```sql
ALTER TABLE table_name SET TAGS ('key' = 'value');
```

**é¸é … A çš„å•é¡Œï¼š**

```sql
-- âŒ éŒ¯èª¤èªæ³•ï¼šä½¿ç”¨äº†å–®æ•¸ TAG
ALTER TABLE table_name SET TAG tag_key = tag_value;
```

SQL parser æœƒé æœŸ `TAGS`ï¼Œé‡åˆ° `TAG` æœƒå ± Syntax Errorã€‚é€™æ˜¯è€ƒè©¦ä¸­å¸¸è¦‹çš„èªæ³•é™·é˜±ï¼ˆSingular vs Pluralï¼‰ã€‚

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### B - `ALTER TABLE ... SET TAGS ...`

**ç‚ºä»€éº¼é€™æ˜¯æ­£ç¢ºæŒ‡ä»¤ï¼ˆæ‰€ä»¥ä¸é¸ï¼‰ï¼Ÿ**

é€™æ˜¯ Databricks å®˜æ–¹æ–‡ä»¶ä¸­æœ€æ¨™æº–çš„è¨­å®šæ¨™ç±¤èªæ³•ã€‚

```sql
-- âœ… æ­£ç¢ºï¼šä½¿ç”¨è¤‡æ•¸ TAGSï¼Œä¸¦æ”¯æ´å¤šå€‹æ¨™ç±¤
ALTER TABLE my_table SET TAGS ('env' = 'prod', 'owner' = 'data-team');
```

- é—œéµå­—æ˜¯ `SET TAGS` (è¤‡æ•¸)ã€‚
- æ”¯æ´ä¸€æ¬¡è¨­å®šå¤šå€‹ Key-Value pairsã€‚

### é—œæ–¼é¸é … C èˆ‡ D (`SET TAG ON TABLE ...`)

**ç‚ºä»€éº¼é€™ä¹Ÿæ˜¯è€ƒé»ï¼Ÿ**

é›–ç„¶åœ¨æ¨™æº– Databricks SQL æ–‡ä»¶ä¸­ï¼Œæœ€å¸¸ä½¿ç”¨çš„æ˜¯ `ALTER TABLE ... SET TAGS`ï¼Œä½†æ­¤é¡Œç›®å¼•ç”¨äº†ä¸€ç¨®è¼ƒç‚ºç½•è¦‹æˆ–ç‰¹å®šç’°å¢ƒä¸‹çš„èªæ³•çµæ§‹ï¼ˆæˆ–è€…æ˜¯é¡Œç›®è¨­è¨ˆçš„å¹²æ“¾é …ï¼‰ã€‚

ä½†åœ¨è€ƒè©¦é‚è¼¯ä¸­ï¼Œé¸é … A (`SET TAG`) è¢«è¦–ç‚ºæœ€æ˜ç¢ºçš„èªæ³•éŒ¯èª¤ï¼Œå› ç‚ºå®ƒæ˜¯å°æ¨™æº– `ALTER TABLE` èªæ³•çš„ç›´æ¥èª¤ç”¨ã€‚

**æ³¨æ„ï¼š** åœ¨å¯¦å‹™æ“ä½œä¸Šï¼Œå»ºè­°ä¸€å¾‹ä½¿ç”¨ **é¸é … B** çš„ `ALTER TABLE ... SET TAGS` èªæ³•ï¼Œé€™æ˜¯ Unity Catalog çš„æ¨™æº–æ”¯æ´æ–¹å¼ã€‚

---

## ğŸ§  è¨˜æ†¶æ³•

### å£è¨£

**ã€Œæ¨™ç±¤è¦æˆç¾¤ï¼Œè¨˜å¾—åŠ  S (TAGS)ã€**

- **SET TAGS**: æ­£ç¢º (è¤‡æ•¸)
- **SET TAG**: éŒ¯èª¤ (å–®æ•¸)

### èªæ³•å°æ¯”è¡¨

| åŠŸèƒ½ | æ­£ç¢ºèªæ³• | éŒ¯èª¤èªæ³• |
|------|---------|---------|
| æ–°å¢/æ›´æ–°æ¨™ç±¤ | `SET TAGS (key=val)` | `SET TAG key=val` |
| ç§»é™¤æ¨™ç±¤ | `UNSET TAGS (key)` | `UNSET TAG (key)` |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶

- [ALTER TABLE ... SET TAGS](https://docs.databricks.com/sql/language-manual/sql-ref-syntax-ddl-alter-table.html#set-tags-clause)
- [Unity Catalog Data Governance - Tagging](https://docs.databricks.com/data-governance/unity-catalog/tags.html)

---

**[è¿”å›é¡Œç›®](#question-002)**
