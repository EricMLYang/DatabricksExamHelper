# Question #034

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-034`

### ä¾†æº
**ä¾†æº:** Sample / Batch 1

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
A data engineering team at a retail company frequently collaborates with business analysts to generate insights from Unity Catalog tables. Over time, the analysts have reported confusion about several columns in key tables because the existing company documentation is outdated. To improve efficiency and reduce misinterpretation, the team lead recommends adding clear descriptions for all table columns. However, manually documenting hundreds of tables and columns would be time-consuming and likely to introduce inconsistencies.

Which of the following approaches allows the team to achieve this task automatically?

### é¸é …
- **A.** Use Delta Lake generated columns to automatically create column descriptions based on existing data.

- **B.** Use the AI-generated column comments feature in Unity Catalog Explorer.

- **C.** Leverage Databricks Assistant to generate column descriptions, and apply them through ALTER TABLE commands.

- **D.** Automate column documentation by creating tables through Lakeflow Declarative Pipelines.

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Unity-Catalog`, `AI-Features`, `Data-Governance`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Concept-Confusion`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Data Governance

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `B`

### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** B
- **ç¤¾ç¾¤å…±è­˜:** B

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥

**æ ¸å¿ƒæŠ€è¡“:** Unity Catalog AI åŠŸèƒ½ - è‡ªå‹•ç”Ÿæˆæ¬„ä½æè¿°

**é—œéµæ¦‚å¿µ:**
- Unity Catalog Explorer çš„ AI åŠŸèƒ½
- è‡ªå‹•åŒ–æ–‡ä»¶ç”Ÿæˆ
- è³‡æ–™æ²»ç†èˆ‡æ–‡ä»¶åŒ–

**é¡Œç›®é—œéµå­—ï¼š**
- **column descriptions**: æ¬„ä½æè¿°/è¨»è§£
- **automatically**: è‡ªå‹•åŒ–
- **hundreds of tables**: å¤§é‡è¡¨æ ¼ï¼ˆæ‰‹å‹•ä¸å¯è¡Œï¼‰

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ B æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

**æŠ€è¡“åŸç†ï¼š**

Unity Catalog Explorer å…§å»ºçš„ **AI-generated column comments** åŠŸèƒ½å¯ä»¥ï¼š
1. è‡ªå‹•åˆ†ææ¬„ä½åç¨±ã€è³‡æ–™é¡å‹ã€æ¨£æœ¬å€¼
2. ä½¿ç”¨ LLM ç”Ÿæˆæè¿°æ€§çš„æ¬„ä½è¨»è§£
3. æ‰¹é‡è™•ç†å¤šå€‹æ¬„ä½å’Œè¡¨æ ¼

#### AI-generated Column Comments çš„é‹ä½œæ–¹å¼

| åˆ†æç¶­åº¦ | èªªæ˜ |
|---------|------|
| **æ¬„ä½åç¨±** | å¾ column_name æ¨æ–·èªç¾© |
| **è³‡æ–™é¡å‹** | æ ¹æ“š data_type èª¿æ•´æè¿° |
| **æ¨£æœ¬å€¼** | åˆ†æå¯¦éš›è³‡æ–™æ¨¡å¼ |
| **è³‡æ–™åˆ†ä½ˆ** | è­˜åˆ¥æ•¸å€¼ç¯„åœã€å¸¸è¦‹å€¼ |

#### ä½¿ç”¨æ­¥é©Ÿ

```
1. åœ¨ Unity Catalog Explorer ä¸­é¸æ“‡è¡¨æ ¼
2. é»æ“Šã€ŒGenerate column commentsã€
3. AI è‡ªå‹•åˆ†æä¸¦ç”Ÿæˆæè¿°
4. å¯©æ ¸ä¸¦ç¢ºèªç”Ÿæˆçš„è¨»è§£
5. è¨»è§£è‡ªå‹•å„²å­˜åˆ° Unity Catalog metadata
```

#### ç”Ÿæˆçµæœç¯„ä¾‹

| æ¬„ä½åç¨± | è³‡æ–™é¡å‹ | AI ç”Ÿæˆçš„æè¿° |
|---------|---------|--------------|
| `customer_id` | BIGINT | Unique identifier for each customer |
| `order_date` | DATE | Date when the order was placed |
| `total_amount` | DECIMAL | Total monetary value of the order |
| `is_active` | BOOLEAN | Flag indicating if the customer account is active |

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … A
**Use Delta Lake generated columns to automatically create column descriptions based on existing data.**

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

1. **Generated Columns çš„ç”¨é€”éŒ¯èª¤**ï¼š
   - Generated Columns æ˜¯ç”¨ä¾†**è¨ˆç®—è¡ç”Ÿæ¬„ä½å€¼**
   - ä¸æ˜¯ç”¨ä¾†ç”Ÿæˆ**æ–‡ä»¶æè¿°**

2. **Generated Columns çš„å¯¦éš›åŠŸèƒ½**ï¼š
```sql
-- Generated Column æ˜¯è¨ˆç®—æ¬„ä½ï¼Œä¸æ˜¯æè¿°
CREATE TABLE orders (
    order_date DATE,
    order_year INT GENERATED ALWAYS AS (YEAR(order_date))  -- è¡ç”Ÿå€¼
);
-- é€™ä¸æœƒç”¢ç”Ÿä»»ä½•æ–‡ä»¶æè¿°
```

---

### é¸é … C
**Leverage Databricks Assistant to generate column descriptions, and apply them through ALTER TABLE commands.**

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

1. **ä¸æ˜¯ã€Œè‡ªå‹•åŒ–ã€æ–¹æ¡ˆ**ï¼š
   - éœ€è¦æ‰‹å‹•ä½¿ç”¨ Databricks Assistant
   - éœ€è¦æ‰‹å‹•åŸ·è¡Œ ALTER TABLE
   - å°æ–¼ã€Œhundreds of tablesã€ä¸å¯¦éš›

2. **é›–ç„¶æŠ€è¡“ä¸Šå¯è¡Œï¼Œä½†ä¸æ˜¯æœ€ä½³æ–¹æ¡ˆ**ï¼š
```sql
-- æ‰‹å‹•æ–¹å¼ï¼šéœ€è¦ä¸€å€‹ä¸€å€‹åŸ·è¡Œ
ALTER TABLE orders ALTER COLUMN customer_id COMMENT 'Unique customer identifier';
ALTER TABLE orders ALTER COLUMN order_date COMMENT 'Date when order was placed';
-- ... é‡è¤‡æ•¸ç™¾æ¬¡
```

3. **Unity Catalog Explorer çš„ AI åŠŸèƒ½æ˜¯å°ˆé–€è¨­è¨ˆçš„è§£æ±ºæ–¹æ¡ˆ**

---

### é¸é … D
**Automate column documentation by creating tables through Lakeflow Declarative Pipelines.**

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

1. **DLT ä¸æœƒè‡ªå‹•ç”Ÿæˆæ¬„ä½æè¿°**ï¼š
   - DLT ç”¨æ–¼è³‡æ–™ç®¡ç·šè™•ç†
   - å¯ä»¥åœ¨ç¨‹å¼ç¢¼ä¸­å®šç¾©æè¿°ï¼Œä½†ä¸æ˜¯ã€Œè‡ªå‹•ç”Ÿæˆã€

2. **ä»ç„¶éœ€è¦æ‰‹å‹•æ’°å¯«**ï¼š
```python
@dlt.table(
    comment="Customer orders table"
)
def orders():
    return spark.table("raw_orders")
# æ¬„ä½æè¿°ä»éœ€æ‰‹å‹•åœ¨ schema ä¸­å®šç¾©
```

3. **ä¸é©ç”¨æ–¼ç¾æœ‰è¡¨æ ¼**ï¼š
   - é¡Œç›®æåˆ°ã€Œexisting company documentation is outdatedã€
   - é€™äº›æ˜¯å·²å­˜åœ¨çš„è¡¨æ ¼ï¼Œä¸æ˜¯æ–°å»ºçš„

---

## ğŸ§  è¨˜æ†¶æ³•

### å£è¨£
**ã€ŒAI è¨»è§£æ‰¾ UC Explorerï¼Œæ‰‹å‹•å¤ªæ…¢ä¸å¯¦éš›ã€**
â†’ Unity Catalog Explorer çš„ AI åŠŸèƒ½å°ˆé–€è§£æ±ºå¤§é‡è¡¨æ ¼çš„è‡ªå‹•åŒ–æ–‡ä»¶å•é¡Œ

### Unity Catalog AI åŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ | ä½¿ç”¨å ´æ™¯ |
|------|------|---------|
| **AI Column Comments** | è‡ªå‹•ç”Ÿæˆæ¬„ä½æè¿° | æ–‡ä»¶åŒ–ã€è³‡æ–™æ²»ç† |
| **AI Query Generation** | è‡ªå‹•ç”Ÿæˆ SQL | å¿«é€ŸæŸ¥è©¢ |
| **AI Data Profile** | è³‡æ–™å“è³ªåˆ†æ | è³‡æ–™æ¢ç´¢ |

### æ¬„ä½æè¿°çš„æ–¹å¼æ¯”è¼ƒ

| æ–¹æ³• | è‡ªå‹•åŒ–ç¨‹åº¦ | é©ç”¨å ´æ™¯ |
|------|-----------|---------|
| **UC AI Comments** | âœ… å…¨è‡ªå‹• | å¤§é‡è¡¨æ ¼ |
| **ALTER TABLE** | âŒ æ‰‹å‹• | å–®ä¸€è¡¨æ ¼ |
| **DLT å®šç¾©** | âŒ æ‰‹å‹• | æ–°å»ºè¡¨æ ¼ |
| **Generated Columns** | âŒ ä¸ç›¸é—œ | è¨ˆç®—è¡ç”Ÿå€¼ |

### æ‰‹å‹•è¨­å®š vs AI ç”Ÿæˆ

```sql
-- æ‰‹å‹•æ–¹å¼
ALTER TABLE orders ALTER COLUMN customer_id COMMENT 'Customer identifier';

-- AI ç”Ÿæˆï¼šåœ¨ UC Explorer UI ä¸­ä¸€éµå®Œæˆ
-- 1. é¸æ“‡è¡¨æ ¼
-- 2. é»æ“Š "Generate column comments"
-- 3. å¯©æ ¸ç¢ºèª
-- Done!
```

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶

- [Unity Catalog AI Features](https://docs.databricks.com/en/data-governance/unity-catalog/index.html)
- [Column Comments in Unity Catalog](https://docs.databricks.com/en/data-governance/unity-catalog/manage-tables.html)
- [Databricks Assistant](https://docs.databricks.com/en/notebooks/databricks-assistant.html)

---

**[è¿”å›é¡Œç›®](#question-034)**
