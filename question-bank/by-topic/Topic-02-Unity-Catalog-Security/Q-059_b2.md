# Question #059

---

## 題目資訊
### 題目編號
**ID:** `Q-059`
### 來源
**來源:** Community
### 難度等級
**難度:** `L1-Basic`

---

## 題目內容
### 題幹
<!-- ⚠️ 保持英文原文，不要翻譯 -->
Which of the following commands can a data engineer use to grant full permissions to the HR team on the table employees?

### 選項
<!-- ⚠️ 保持英文原文，不要翻譯 -->
- **A.** GRANT SELECT, MODIFY, CREATE, READ_METADATA ON TABLE employees TO hr_team
- **B.** GRANT FULL PRIVILEGES ON TABLE employees TO hr_team
- **C.** GRANT ALL PRIVILEGES ON TABLE employees TO hr_team
- **D.** GRANT ALL PRIVILEGES ON TABLE hr_team TO employees

---

## 標籤系統
### Topic Tags (技術主題標籤)
**Topics:** `UC-Permissions`, `Access-Control`, `Unity-Catalog`
### Trap Tags (陷阱類型標籤)
**Traps:** `Syntax-Confusion`, `Keyword-Typo`
### Knowledge Domain (知識領域)
**Domain:** Data Engineering / Security & Governance

---

## 答案與來源
### 正確答案
**正解:** `C`
### 答案來源
- **來源標註答案:** C
- **社群共識:** C

---

# 題目解析

---

## 📍 考點識別
**核心技術:** Unity Catalog / Table ACLs
**關鍵概念:** GRANT 語法、ALL PRIVILEGES、權限授予
**題目關鍵字：**
- **grant full permissions**: 授予完整權限
- **ALL PRIVILEGES**: 正確的關鍵字
- **ON TABLE ... TO**: GRANT 語法結構

---

## ✅ 正解說明
### 為什麼 C 是正確答案？

**`GRANT ALL PRIVILEGES`** 是授予物件完整權限的正確語法。

#### GRANT 語法結構
```sql
GRANT privilege_type ON object_type object_name TO principal;

-- 正確範例
GRANT ALL PRIVILEGES ON TABLE employees TO hr_team;
```

#### ALL PRIVILEGES 包含的權限
| 權限 | 說明 |
|------|------|
| `SELECT` | 讀取資料 |
| `MODIFY` | 插入、更新、刪除資料 |
| `CREATE` | 建立子物件（如果適用） |
| `USAGE` | 使用權限（對 Catalog/Schema） |
| `READ_METADATA` | 讀取 metadata |

#### ALL PRIVILEGES 的便利性
```sql
-- 使用 ALL PRIVILEGES（簡潔）
GRANT ALL PRIVILEGES ON TABLE employees TO hr_team;

-- 等同於逐一授予（冗長）
GRANT SELECT ON TABLE employees TO hr_team;
GRANT MODIFY ON TABLE employees TO hr_team;
GRANT CREATE ON TABLE employees TO hr_team;
GRANT USAGE ON TABLE employees TO hr_team;
GRANT READ_METADATA ON TABLE employees TO hr_team;
```

#### Unity Catalog 權限層級
```
Unity Catalog 權限繼承：
┌──────────────┐
│  Metastore   │ ← GRANT ... ON METASTORE
├──────────────┤
│   Catalog    │ ← GRANT ... ON CATALOG
├──────────────┤
│   Schema     │ ← GRANT ... ON SCHEMA
├──────────────┤
│    Table     │ ← GRANT ... ON TABLE ← 本題
└──────────────┘
```

---

## ❌ 錯誤選項排除

### A. GRANT SELECT, MODIFY, CREATE, READ_METADATA ON TABLE employees TO hr_team
**為什麼錯誤？**
- 這個語法**技術上可能有效**，但不是「full permissions」
- **缺少 USAGE 權限**
- 題目要求「full permissions」，這只是部分權限
- 更重要的是，使用 ALL PRIVILEGES 更簡潔且確保完整

```sql
-- 這缺少 USAGE
GRANT SELECT, MODIFY, CREATE, READ_METADATA ON TABLE employees TO hr_team;
-- 不等於 ALL PRIVILEGES
```

### B. GRANT FULL PRIVILEGES ON TABLE employees TO hr_team
**為什麼錯誤？**
- **`FULL PRIVILEGES` 不是有效的關鍵字**
- SQL 標準和 Databricks 使用的是 `ALL PRIVILEGES`
- 這是常見的語法混淆陷阱

```sql
-- 錯誤語法
GRANT FULL PRIVILEGES ...  -- ❌ 語法錯誤

-- 正確語法
GRANT ALL PRIVILEGES ...   -- ✅
```

### D. GRANT ALL PRIVILEGES ON TABLE hr_team TO employees
**為什麼錯誤？**
- **表格和角色的位置顛倒了**
- 正確語法：`ON TABLE <table_name> TO <principal>`
- 這個選項把 `hr_team` 當成表格，`employees` 當成角色
- 完全顛倒了語意

```sql
-- 錯誤：角色和表格位置顛倒
GRANT ALL PRIVILEGES ON TABLE hr_team TO employees;
--                          ↑ 表格？    ↑ 角色？  ❌

-- 正確
GRANT ALL PRIVILEGES ON TABLE employees TO hr_team;
--                          ↑ 表格      ↑ 角色   ✅
```

---

## 🧠 記憶法
### 口訣
**「ALL PRIVILEGES 全授權，ON 物件 TO 角色」**

### GRANT 語法結構記憶
```
GRANT <權限> ON <物件類型> <物件名> TO <角色>

範例：
GRANT ALL PRIVILEGES ON TABLE employees TO hr_team
      └─權限─┘        └─物件─┘ └─名稱─┘    └─角色─┘
```

### 常見權限關鍵字
| 正確語法 | 錯誤/不存在 |
|----------|-------------|
| `ALL PRIVILEGES` | ~~FULL PRIVILEGES~~ |
| `SELECT` | ~~READ~~ |
| `MODIFY` | ~~WRITE~~ |
| `READ_METADATA` | ~~VIEW_METADATA~~ |

### GRANT 語法陷阱
```
常見錯誤：
├── FULL PRIVILEGES → 應為 ALL PRIVILEGES
├── 表格和角色位置顛倒 → ON TABLE <表> TO <角色>
├── 缺少 ON 關鍵字
└── 拼寫錯誤（PRIVILAGES → PRIVILEGES）
```

### 權限操作比較
| 操作 | 語法 |
|------|------|
| 授予 | `GRANT ... ON ... TO ...` |
| 撤銷 | `REVOKE ... ON ... FROM ...` |
| 查看 | `SHOW GRANTS ON ...` |

### Unity Catalog 常用 GRANT 範例
```sql
-- 授予 Table 權限
GRANT ALL PRIVILEGES ON TABLE catalog.schema.table TO group;

-- 授予 Schema 權限
GRANT USAGE, CREATE ON SCHEMA catalog.schema TO group;

-- 授予 Catalog 權限
GRANT USAGE ON CATALOG catalog TO group;
```

---

## 📚 官方文件
- [GRANT (Unity Catalog)](https://docs.databricks.com/sql/language-manual/security-grant.html)
- [Privileges in Unity Catalog](https://docs.databricks.com/data-governance/unity-catalog/manage-privileges/privileges.html)
- [Table ACLs](https://docs.databricks.com/security/access-control/table-acls/object-privileges.html)

---

**[返回題目](#question-059)**
