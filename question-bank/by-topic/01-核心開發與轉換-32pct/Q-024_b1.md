# Question #024

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-024`

### ä¾†æº
**ä¾†æº:** Sample / Batch 1

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
A data engineer has added a CHECK constraint to the sales table using the following command:

```sql
ALTER TABLE sales ADD CONSTRAINT valid_date CHECK (item_date >= '2024-01-01');
```

In addition, they have added a comment on the item_date column using the following command:

```sql
ALTER TABLE sales ALTER COLUMN item_date COMMENT "Date must be newer than Jan 1, 2024";
```

Which of the following commands allows the data engineer to verify that both the constraint and the column comment have been successfully added on the table?

### é¸é …
- **A.** SHOW TBLPROPERTIES sales

- **B.** DESCRIBE DETAIL sales

- **C.** DESCRIBE TABLE sales

- **D.** DESCRIBE EXTENDED sales

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Delta-Lake`, `Delta-Constraints`, `Spark-SQL`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Command-Purpose`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / SQL Commands

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `D`

### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** D
- **ç¤¾ç¾¤å…±è­˜:** D

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥

**æ ¸å¿ƒæŠ€è¡“:** SQL DESCRIBE æŒ‡ä»¤çš„ä¸åŒè®Šé«”

**é—œéµæ¦‚å¿µ:**
- DESCRIBE EXTENDED çš„å®Œæ•´è³‡è¨Šè¼¸å‡º
- CHECK Constraint çš„æŸ¥çœ‹æ–¹å¼
- Column Comment çš„æŸ¥çœ‹æ–¹å¼

**é¡Œç›®é—œéµå­—ï¼š**
- **CHECK constraint**: è³‡æ–™é©—è­‰ç´„æŸ
- **column comment**: æ¬„ä½è¨»è§£
- **verify**: é©—è­‰æ˜¯å¦æˆåŠŸæ·»åŠ 

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ D æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

**æŠ€è¡“åŸç†ï¼š**

`DESCRIBE EXTENDED` æ˜¯æœ€å®Œæ•´çš„è¡¨æ ¼è³‡è¨ŠæŸ¥è©¢æŒ‡ä»¤ï¼Œå®ƒæœƒé¡¯ç¤ºï¼š
1. **æ¬„ä½è³‡è¨Š**ï¼ˆåŒ…å« commentï¼‰
2. **è¡¨æ ¼å±¬æ€§**ï¼ˆåŒ…å« constraintsï¼‰
3. **è©³ç´°çš„ metadata**

#### DESCRIBE EXTENDED è¼¸å‡ºå…§å®¹

```sql
DESCRIBE EXTENDED sales;

-- è¼¸å‡ºç¯„ä¾‹ï¼š
-- col_name        | data_type | comment
-- ----------------|-----------|----------------------------------
-- item_id         | int       |
-- item_date       | date      | Date must be newer than Jan 1, 2024  â† Column Comment
-- quantity        | int       |
--                 |           |
-- # Detailed Table Information
-- Database        | default
-- Table           | sales
-- Owner           | user@company.com
-- ...
-- Table Properties| [delta.constraints.valid_date=item_date >= '2024-01-01']  â† CHECK Constraint
```

#### é©—è­‰ Constraint å’Œ Comment

```sql
-- æ–¹æ³• 1: DESCRIBE EXTENDEDï¼ˆæ¨è–¦ï¼Œä¸€æ¬¡æŸ¥çœ‹æ‰€æœ‰è³‡è¨Šï¼‰
DESCRIBE EXTENDED sales;

-- æ–¹æ³• 2: å–®ç¨æŸ¥çœ‹ constraintsï¼ˆé€é Table Propertiesï¼‰
SHOW TBLPROPERTIES sales;
-- æœƒé¡¯ç¤º delta.constraints.valid_date

-- æ–¹æ³• 3: æŸ¥çœ‹æ¬„ä½è©³ç´°è³‡è¨Š
DESCRIBE TABLE sales;
-- æœƒé¡¯ç¤º column commentï¼Œä½†ä¸æœƒé¡¯ç¤º constraints
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … A
**SHOW TBLPROPERTIES sales**

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

1. **åªé¡¯ç¤º Table Propertiesï¼Œä¸é¡¯ç¤º Column Comments**ï¼š
```sql
SHOW TBLPROPERTIES sales;

-- è¼¸å‡ºï¼š
-- key                                | value
-- -----------------------------------|-------
-- delta.constraints.valid_date       | item_date >= '2024-01-01'
-- delta.minReaderVersion            | 1
-- delta.minWriterVersion            | 2
```

2. **ç¼ºå¤±è³‡è¨Š**ï¼š
   - âœ… å¯ä»¥çœ‹åˆ° constraint
   - âŒ ç„¡æ³•çœ‹åˆ° column comment

---

### é¸é … B
**DESCRIBE DETAIL sales**

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

1. **DESCRIBE DETAIL é¡¯ç¤º Delta Lake å„²å­˜å±¤ç´šè³‡è¨Š**ï¼š
```sql
DESCRIBE DETAIL sales;

-- è¼¸å‡ºï¼š
-- format   | id     | name  | location           | numFiles | sizeInBytes
-- ---------|--------|-------|--------------------|---------|-----------
-- delta    | abc123 | sales | /path/to/table     | 10      | 1024000
```

2. **ç¼ºå¤±è³‡è¨Š**ï¼š
   - âŒ ç„¡æ³•çœ‹åˆ° constraint
   - âŒ ç„¡æ³•çœ‹åˆ° column comment
   - âœ… é¡¯ç¤ºæª”æ¡ˆæ•¸é‡ã€å¤§å°ã€ä½ç½®ç­‰

---

### é¸é … C
**DESCRIBE TABLE sales**

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

1. **DESCRIBE TABLE é¡¯ç¤ºåŸºæœ¬æ¬„ä½è³‡è¨Š**ï¼š
```sql
DESCRIBE TABLE sales;

-- è¼¸å‡ºï¼š
-- col_name   | data_type | comment
-- -----------|-----------|----------------------------------
-- item_id    | int       |
-- item_date  | date      | Date must be newer than Jan 1, 2024
-- quantity   | int       |
```

2. **éƒ¨åˆ†è³‡è¨Š**ï¼š
   - âœ… å¯ä»¥çœ‹åˆ° column comment
   - âŒ ç„¡æ³•çœ‹åˆ° constraintï¼ˆéœ€è¦ EXTENDEDï¼‰

---

## ğŸ§  è¨˜æ†¶æ³•

### å£è¨£
**ã€ŒEXTENDED æœ€å®Œæ•´ï¼ŒDETAIL çœ‹å„²å­˜ã€**
â†’ DESCRIBE EXTENDED é¡¯ç¤ºå®Œæ•´ metadataï¼ŒDESCRIBE DETAIL é¡¯ç¤º Delta Lake å„²å­˜è³‡è¨Š

### DESCRIBE æŒ‡ä»¤å®¶æ—æ¯”è¼ƒ

| æŒ‡ä»¤ | Column Comment | Constraint | æª”æ¡ˆè³‡è¨Š | Partition |
|------|---------------|------------|---------|-----------|
| `DESCRIBE TABLE` | âœ… | âŒ | âŒ | âœ… |
| `DESCRIBE EXTENDED` | âœ… | âœ… | âŒ | âœ… |
| `DESCRIBE DETAIL` | âŒ | âŒ | âœ… | âŒ |
| `SHOW TBLPROPERTIES` | âŒ | âœ… | âŒ | âŒ |

### å¸¸ç”¨æŸ¥è©¢æŒ‡ä»¤

```sql
-- æŸ¥çœ‹æ¬„ä½çµæ§‹å’Œ comment
DESCRIBE TABLE my_table;

-- æŸ¥çœ‹å®Œæ•´è³‡è¨Šï¼ˆåŒ…å« constraintsï¼‰
DESCRIBE EXTENDED my_table;

-- æŸ¥çœ‹ Delta Lake å„²å­˜è³‡è¨Šï¼ˆæª”æ¡ˆæ•¸ã€å¤§å°ç­‰ï¼‰
DESCRIBE DETAIL my_table;

-- æŸ¥çœ‹è¡¨æ ¼æ­·å²ç‰ˆæœ¬
DESCRIBE HISTORY my_table;

-- æŸ¥çœ‹ç‰¹å®šå±¬æ€§
SHOW TBLPROPERTIES my_table ('delta.constraints.my_constraint');
```

### å¿«é€Ÿé¸æ“‡æŒ‡å—

| éœ€æ±‚ | ä½¿ç”¨æŒ‡ä»¤ |
|------|---------|
| æŸ¥çœ‹æ¬„ä½çµæ§‹ | `DESCRIBE TABLE` |
| æŸ¥çœ‹ constraints | `DESCRIBE EXTENDED` |
| æŸ¥çœ‹ column comments | `DESCRIBE TABLE` æˆ– `DESCRIBE EXTENDED` |
| æŸ¥çœ‹æª”æ¡ˆå¤§å°/æ•¸é‡ | `DESCRIBE DETAIL` |
| æŸ¥çœ‹ç‰ˆæœ¬æ­·å² | `DESCRIBE HISTORY` |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶

- [DESCRIBE TABLE](https://docs.databricks.com/sql/language-manual/sql-ref-syntax-aux-describe-table.html)
- [CHECK Constraints](https://docs.databricks.com/tables/constraints.html#set-a-check-constraint-in-databricks)
- [DESCRIBE DETAIL](https://docs.databricks.com/sql/language-manual/delta-describe-detail.html)

---

**[è¿”å›é¡Œç›®](#question-024)**
