# Question #38

---

## 題目資訊

### 題目編號
**ID:** `Q-038`

### 來源
**來源:** Real Exam Recall

### 難度等級
**難度:** `L2-Intermediate`

---

## 題目內容

### 題幹

The downstream consumers of a Delta Lake table have been complaining about data quality issues impacting performance in their applications.

Specifically, they have complained that invalid latitude and longitude values in the activity_details table have been breaking their ability to use other geolocation processes.

A junior engineer has written the following code to add CHECK constraints to the Delta Lake table:

```sql
ALTER TABLE activity_details
ADD CONSTRAINT valid_coordinates
CHECK (latitude > -90 AND latitude < 90 AND longitude > -180 AND longitude < 180)
```

A senior engineer has confirmed the above logic is correct and the valid ranges for latitude and longitude are provided, but the code fails when executed.

Which statement explains the cause of this failure?

### 選項

- **A.** Because another team uses this table to support a frequently running application, two-phase locking is preventing the operation from committing.
- **B.** The activity_details table already exists; CHECK constraints can only be added during initial table creation.
- **C.** The activity_details table already contains records that violate the constraints; all existing data must pass CHECK constraints in order to add them to an existing table.
- **D.** The activity_details table already contains records; CHECK constraints can only be added prior to inserting values into a table.
- **E.** The current table schema does not contain the field valid_coordinates; schema evolution will need to be enabled before altering the table to add a constraint.

---

## 標籤系統

### Topic Tags (技術主題標籤)
**Topics:** `CHECK-Constraints`, `Data-Quality`, `Delta-Lake`, `Constraints`

### Trap Tags (陷阱類型標籤)
**Traps:** `Constraint-Requirements`, `Existing-Data-Validation`

### Knowledge Domain (知識領域)
**Domain:** `Delta Lake`

---

## 答案與解析連結

### 正確答案
**正解:** `B`

### 解析檔案
**詳細解析:** [點此查看解析](../analysis/Q-038-analysis.md)

**備註:** Community vote and discussion heavily favor C as the correct answer, as constraints fail if existing data violates them.

---

## 相關資源

### 官方文件
- [CHECK Constraints](https://docs.databricks.com/delta/delta-constraints.html)
- [ALTER TABLE ADD CONSTRAINT](https://docs.databricks.com/sql/language-manual/sql-ref-syntax-ddl-alter-table.html)
