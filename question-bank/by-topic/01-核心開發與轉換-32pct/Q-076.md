# Q-076 - Delta Lake Schema Evolution èˆ‡æ­·å²è³‡æ–™é™åˆ¶

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-076`

### ä¾†æº
**ä¾†æº:** Real Exam Recall (å¯¦éš›è€ƒè©¦å›æ†¶ - Question #276)

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹ï¼ˆä¸­æ–‡ï¼‰

ä¸€æ¢è³‡æ–™ç®¡ç·šä½¿ç”¨ Structured Streaming å¾ Apache Kafka æ”å–è³‡æ–™åˆ° Delta Lakeã€‚è³‡æ–™è¢«å„²å­˜åœ¨ bronze è¡¨ä¸­ï¼ŒåŒ…å« Kafka ç”¢ç”Ÿçš„æ™‚é–“æˆ³è¨˜ï¼ˆtimestampï¼‰ã€éµï¼ˆkeyï¼‰å’Œå€¼ï¼ˆvalueï¼‰ã€‚åœ¨ç®¡ç·šéƒ¨ç½²ä¸‰å€‹æœˆå¾Œï¼Œè³‡æ–™å·¥ç¨‹åœ˜éšŠæ³¨æ„åˆ°åœ¨æŸäº›æ™‚æ®µå‡ºç¾å»¶é²å•é¡Œã€‚

ä¸€ä½è³‡æ·±è³‡æ–™å·¥ç¨‹å¸«æ›´æ–°äº† Delta è¡¨çš„ schema å’Œæ”å–é‚è¼¯ï¼Œä»¥åŒ…å«ç•¶å‰æ™‚é–“æˆ³è¨˜ï¼ˆç”± Apache Spark è¨˜éŒ„ï¼‰ä»¥åŠ Kafka ä¸»é¡Œï¼ˆtopicï¼‰å’Œåˆ†å€ï¼ˆpartitionï¼‰ã€‚åœ˜éšŠè¨ˆåŠƒä½¿ç”¨é€™äº›é¡å¤–çš„å…ƒè³‡æ–™æ¬„ä½ä¾†è¨ºæ–·æš«æ™‚æ€§çš„è™•ç†å»¶é²ã€‚

åœ˜éšŠåœ¨è¨ºæ–·æ­¤å•é¡Œæ™‚å°‡é¢è‡¨å“ªå€‹é™åˆ¶ï¼Ÿ

### é¡Œå¹¹ï¼ˆè‹±æ–‡ï¼‰

A data pipeline uses Structured Streaming to ingest data from Apache Kafka to Delta Lake. Data is being stored in a bronze table, and includes the Kafka-generated timestamp, key, and value. Three months after the pipeline is deployed, the data engineering team has noticed some latency issues during certain times of the day.

A senior data engineer updates the Delta Table's schema and ingestion logic to include the current timestamp (as recorded by Apache Spark) as well as the Kafka topic and partition. The team plans to use these additional metadata fields to diagnose the transient processing delays.

Which limitation will the team face while diagnosing this problem?

### é¸é …

- **A.** New fields will not be computed for historic records.
- **B.** Spark cannot capture the topic and partition fields from a Kafka source.
- **C.** New fields cannot be added to a production Delta table.
- **D.** Updating the table schema will invalidate the Delta transaction log metadata.
- **E.** Updating the table schema requires a default value provided for each field added.

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Delta-Lake`, `Delta-Schema-Evolution`, `Streaming`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Schema-Evolution-Misconception`, `Historical-Data-Limitation`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** `è³‡æ–™è½‰æ›èˆ‡ç®¡ç† (Data Transformation & Management)`, `è³‡æ–™æ”å– (Data Ingestion)`

---

## ç­”æ¡ˆèˆ‡è§£æé€£çµ

**âœ… æ­£ç¢ºç­”æ¡ˆ:** A

**ğŸ“ å®Œæ•´è§£æè«‹è¦‹æœ¬æª”æ¡ˆä¸‹æ–¹**

---

## ç›¸é—œé¡Œç›®

- [Q-007](./Q-007.md) - Delta Lake åŸºç¤æ“ä½œ
- [Q-012](./Q-012.md) - Structured Streaming åŸºç¤
- [Q-075](./Q-075.md) - Delta Lake MERGE å»é‡
- [Q-023](./Q-023.md) - Delta Lake VACUUM

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶åƒè€ƒ

- [Delta Lake Schema Evolution](https://docs.delta.io/latest/delta-batch.html#schema-evolution)
- [Structured Streaming + Kafka Integration](https://spark.apache.org/docs/latest/structured-streaming-kafka-integration.html)
- [Delta Lake Transaction Log](https://databricks.com/blog/2019/08/21/diving-into-delta-lake-unpacking-the-transaction-log.html)

---

**æœ€å¾Œæ›´æ–°:** 2026-01-14  
**æ¨™ç±¤ç‰ˆæœ¬:** v1.0
