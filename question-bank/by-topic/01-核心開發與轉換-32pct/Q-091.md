# Q-091

## é¡Œç›®è³‡è¨Š

**ID:** `Q-091`

**ä¾†æº:** Mock Exam

**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

A developer has successfully configured their credentials for Databricks Repos and cloned a remote Git repository. They do not have privileges to make changes to the main branch, which is the only branch currently visible in their workspace.

Which approach allows this user to share their code updates without the risk of overwriting the work of their teammates?

### é¸é …

- **A.** Use Repos to checkout all changes and send the git diff log to the team.
- **B.** Use Repos to create a fork of the remote repository, commit all changes, and make a pull request on the source repository.
- **C.** Use Repos to pull changes from the remote Git repository; commit and push changes to a branch that appeared as changes were pulled.
- **D.** Use Repos to merge all differences and make a pull request back to the remote repository.
- **E.** Use Repos to create a new branch, commit all changes, and push changes to the remote Git repository.

---

## æ¨™ç±¤ç³»çµ±

**Topics:** `Databricks-Repos`, `Git-Integration`, `Version-Control`

**Traps:** `Fork-Misconception`, `Git-Workflow-Confusion`

**Domain:** `é–‹ç™¼èˆ‡è½‰æ› (Development & Transformation)`

---

## ç­”æ¡ˆèˆ‡åˆ†æ

### æ­£ç¢ºç­”æ¡ˆ

**æ­£è§£:** `E`

**ç¤¾ç¾¤æŠ•ç¥¨:** E (54%), B (46%)

**æ·±å…¥æ´å¯Ÿ:** é›–ç„¶æœ‰éƒ¨åˆ†äººæ”¯æŒé¸é … Bï¼ˆforkï¼‰ï¼Œä½† **Databricks Repos ä¸æ”¯æ´ fork åŠŸèƒ½**ã€‚æ¨™æº–çš„å”ä½œæµç¨‹æ˜¯å»ºç«‹æ–° branchã€commitã€pushï¼Œç„¶å¾Œåœ¨ Git å¹³å°ï¼ˆGitHub/GitLab/Azure DevOpsï¼‰ä¸Šå»ºç«‹ pull requestã€‚

---

## ğŸ“ è€ƒé»è­˜åˆ¥

### ä¸»è¦è€ƒé»
**æ ¸å¿ƒæŠ€è¡“:** Databricks Repos Git å·¥ä½œæµç¨‹
**çŸ¥è­˜é ˜åŸŸ:** é–‹ç™¼èˆ‡è½‰æ› - ç‰ˆæœ¬æ§åˆ¶èˆ‡å”ä½œ
**é—œéµæ¦‚å¿µ:** 
- Feature Branch Workflow
- Databricks Repos çš„ Git æ“ä½œ
- ä¿è­· main branch çš„å”ä½œæ¨¡å¼

### æ¬¡è¦è€ƒé»
- å€åˆ† Databricks Repos åŠŸèƒ½ vs Git å¹³å°åŠŸèƒ½
- Pull Request / Merge Request å·¥ä½œæµç¨‹
- Branch æ¬Šé™ç®¡ç†

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ E æ˜¯æ­£ç¢ºçš„ï¼Ÿ

**æŠ€è¡“åŸç†:**

æ¨™æº–çš„ **Feature Branch Workflow** æµç¨‹ï¼š

```
1. å»ºç«‹æ–° branch (é¿å…ç›´æ¥ä¿®æ”¹ main)
2. åœ¨æ–° branch ä¸Šé€²è¡Œé–‹ç™¼
3. Commit è®Šæ›´
4. Push åˆ°é ç«¯ repository
5. åœ¨ Git å¹³å°ä¸Šå»ºç«‹ Pull Request
6. Code Review å¾Œåˆä½µåˆ° main
```

**ç¬¦åˆé¡Œç›®æƒ…å¢ƒ:**

é¡Œç›®æ¢ä»¶ï¼š
- âœ… å·²é…ç½® Databricks Repos
- âœ… å·² clone é ç«¯ repository
- âŒ **æ²’æœ‰ç›´æ¥ä¿®æ”¹ main branch çš„æ¬Šé™**
- âœ… ç›®å‰åªçœ‹åˆ° main branch

**è§£æ±ºæ–¹æ¡ˆï¼ˆé¸é … Eï¼‰ï¼š**

```
æ­¥é©Ÿ 1: å»ºç«‹æ–° branch
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Databricks Repos UI         â”‚
â”‚ Branch: main â–¼              â”‚
â”‚   â”œâ”€ Create Branch          â”‚ â† é»æ“Šé€™è£¡
â”‚   â””â”€ Enter: feature/my-work â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥é©Ÿ 2: åœ¨æ–° branch ä¸Šé–‹ç™¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Branch: feature/my-work â–¼   â”‚
â”‚ ä¿®æ”¹ notebooksã€ç¨‹å¼ç¢¼       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥é©Ÿ 3: Commit è®Šæ›´
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save & Commit               â”‚
â”‚ Message: "Add data pipeline"â”‚
â”‚ [Commit] æŒ‰éˆ•                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥é©Ÿ 4: Push åˆ°é ç«¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Push to remote              â”‚
â”‚ feature/my-work â†’ origin    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥é©Ÿ 5: åœ¨ Git å¹³å°å»ºç«‹ Pull Request
ï¼ˆåœ¨ GitHub/GitLab/Azure DevOps ä¸Šæ“ä½œï¼‰
```

**å¯¦å‹™æ‡‰ç”¨:**

**å®Œæ•´çš„ Databricks Repos å”ä½œæµç¨‹ï¼š**

```python
# åœ¨ Databricks Workspace

# 1. Clone repository (å·²å®Œæˆ)
# Repos â†’ Add Repo â†’ è¼¸å…¥ Git URL

# 2. åˆ‡æ›åˆ° Reposï¼Œé è¨­åœ¨ main branch
# çœ‹åˆ°: Branch: main

# 3. å»ºç«‹æ–° branch
# é»æ“Š Branch ä¸‹æ‹‰é¸å–® â†’ Create Branch
# è¼¸å…¥: feature/add-etl-pipeline
# âœ“ ç¾åœ¨åœ¨æ–° branch ä¸Šå·¥ä½œ

# 4. é€²è¡Œé–‹ç™¼ï¼ˆä¿®æ”¹ notebooksï¼‰
# ä¿®æ”¹ /Repos/my-project/etl_notebook.py
# æ–°å¢é‚è¼¯ã€æ¸¬è©¦ç¨‹å¼ç¢¼

# 5. Commit è®Šæ›´
# Repos â†’ é»æ“Š Git åœ–ç¤º
# Commit message: "Add bronze to silver transformation"
# é»æ“Š "Commit & Push"

# 6. åœ¨ Git å¹³å°ä¸Šå»ºç«‹ Pull Request
# å‰å¾€ GitHub/GitLab
# æœƒçœ‹åˆ°æç¤º: "feature/add-etl-pipeline had recent pushes"
# é»æ“Š "Compare & pull request"
# å¡«å¯« PR æè¿°
# æŒ‡å®š reviewers
# æäº¤ PR

# 7. Code Review èˆ‡åˆä½µ
# åœ˜éšŠæˆå“¡ review ç¨‹å¼ç¢¼
# è¨è«–ã€å»ºè­°ä¿®æ”¹
# Approve å¾Œåˆä½µåˆ° main branch
```

**ç‚ºä½•é€™æ¨£è¨­è¨ˆï¼š**

1. **ä¿è­· main branch**
   - main branch é€šå¸¸è¨­å®šç‚º protected
   - é˜²æ­¢ç›´æ¥ push å°è‡´çš„éŒ¯èª¤
   - å¼·åˆ¶ code review

2. **éš”é›¢é–‹ç™¼å·¥ä½œ**
   - æ¯å€‹é–‹ç™¼è€…åœ¨è‡ªå·±çš„ branch å·¥ä½œ
   - ä¸æœƒäº’ç›¸å¹²æ“¾
   - å¯ä»¥ä¸¦è¡Œé–‹ç™¼å¤šå€‹åŠŸèƒ½

3. **è¿½è¹¤è®Šæ›´æ­·å²**
   - æ¯å€‹ feature æœ‰æ¸…æ¥šçš„ commit æ­·å²
   - æ–¹ä¾¿è¿½è¹¤å’Œå›æº¯
   - PR æä¾›è¨è«–å’Œæ–‡ä»¶

**Branch ç­–ç•¥è¦–è¦ºåŒ–ï¼š**

```
main branch (protected)
  â”‚
  â”œâ”€â”€â”€ feature/user-a-work  â† User A çš„ branch
  â”‚     â””â”€ commits... â†’ Push â†’ PR â†’ Merge to main
  â”‚
  â”œâ”€â”€â”€ feature/user-b-work  â† User B çš„ branch
  â”‚     â””â”€ commits... â†’ Push â†’ PR â†’ Merge to main
  â”‚
  â””â”€â”€â”€ feature/user-c-work  â† User C çš„ branch (ä½ )
        â””â”€ commits... â†’ Push â†’ PR â†’ ç­‰å¾… merge

æ‰€æœ‰äººéƒ½ä¸ç›´æ¥ä¿®æ”¹ main âœ“
é€é PR åˆä½µè®Šæ›´ âœ“
ä¸æœƒè¦†è“‹åˆ¥äººçš„å·¥ä½œ âœ“
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … A - Checkout changes and send git diff log

**éŒ¯èª¤åŸå› :** é€™ä¸æ˜¯æ¨™æº–çš„ Git å”ä½œæ–¹å¼ï¼Œä¸”ç„¡æ³•åˆ©ç”¨ç‰ˆæœ¬æ§åˆ¶çš„å„ªå‹¢

**è©³ç´°åˆ†æ:**

**æ­¤æ–¹æ³•çš„å•é¡Œï¼š**

1. **æ‰‹å‹•ä¸”å®¹æ˜“å‡ºéŒ¯**
   - éœ€è¦æ‰‹å‹•è¤‡è£½ diff è¼¸å‡º
   - åœ˜éšŠæˆå“¡éœ€è¦æ‰‹å‹•å¥—ç”¨è®Šæ›´
   - å®¹æ˜“å‡ºç¾åˆä½µè¡çª

2. **å¤±å»ç‰ˆæœ¬æ§åˆ¶å„ªå‹¢**
   - æ²’æœ‰ commit æ­·å²
   - ç„¡æ³•è¿½è¹¤èª°åšäº†ä»€éº¼è®Šæ›´
   - ç„¡æ³•å›æº¯æˆ–æ’¤éŠ·

3. **ä¸ç¬¦åˆç¾ä»£å”ä½œæµç¨‹**
   - æ²’æœ‰ code review æ©Ÿåˆ¶
   - ç„¡æ³•è¨è«–è®Šæ›´
   - ä¸èƒ½è‡ªå‹•åŒ–æ¸¬è©¦

**å°æ¯”æ­£ç¢ºåšæ³•ï¼š**

| ç‰¹æ€§ | Git Diff (é¸é … A) | Feature Branch (é¸é … E) |
|------|------------------|------------------------|
| ç‰ˆæœ¬æ§åˆ¶ | âŒ ç„¡ | âœ… å®Œæ•´è¨˜éŒ„ |
| Code Review | âŒ å›°é›£ | âœ… Pull Request |
| è‡ªå‹•åŒ–æ¸¬è©¦ | âŒ ç„¡æ³•æ•´åˆ | âœ… CI/CD æ•´åˆ |
| è¡çªè™•ç† | âŒ æ‰‹å‹• | âœ… Git è‡ªå‹•åµæ¸¬ |
| å”ä½œæ•ˆç‡ | âŒ ä½ | âœ… é«˜ |

**æ˜“æ··æ·†é»:**
å¯èƒ½èª¤ä»¥ç‚ºã€Œç™¼é€ diffã€æ˜¯ä¸€ç¨®åˆç†çš„åˆ†äº«æ–¹å¼ï¼Œä½†é€™æ˜¯éæ™‚ä¸”ä½æ•ˆçš„åšæ³•

---

### é¸é … B - Create a fork of the remote repository

**éŒ¯èª¤åŸå› :** **Databricks Repos ä¸æ”¯æ´ fork åŠŸèƒ½**

**è©³ç´°åˆ†æ:**

**Fork vs Branch çš„é—œéµå·®ç•°ï¼š**

```
Fork (åœ¨ Git å¹³å°ä¸Šæ“ä½œ)ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Original Repository    â”‚ (team/project)
â”‚  github.com/team/proj   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ Fork
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Forked Repository      â”‚ (ä½ çš„å‰¯æœ¬)
â”‚  github.com/you/proj    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Branch (åœ¨åŒä¸€ repository å…§)ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Repository             â”‚
â”‚  â”œâ”€ main                â”‚
â”‚  â”œâ”€ feature/branch-1    â”‚
â”‚  â””â”€ feature/branch-2    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‚ºä½•é¸é … B éŒ¯èª¤ï¼š**

1. **Databricks Repos ä¸æä¾› fork åŠŸèƒ½**
   - Fork æ˜¯ GitHub/GitLab ç­‰å¹³å°çš„åŠŸèƒ½
   - Databricks Repos åªèƒ½æ“ä½œå·²é€£æ¥çš„ repository
   - ç„¡æ³•åœ¨ Databricks UI ä¸­å»ºç«‹ fork

2. **Fork ç”¨æ–¼å¤–éƒ¨è²¢ç»è€…**
   - Fork é€šå¸¸ç”¨æ–¼é–‹æºå°ˆæ¡ˆ
   - æˆ–å®Œå…¨æ²’æœ‰ repository å­˜å–æ¬Šé™çš„æƒ…æ³
   - åœ˜éšŠå…§éƒ¨å”ä½œé€šå¸¸ä½¿ç”¨ branch

3. **é¡Œç›®æƒ…å¢ƒä¸éœ€è¦ fork**
   - é–‹ç™¼è€…å·²æœ‰ repository çš„è®€å–æ¬Šé™
   - åªæ˜¯æ²’æœ‰ç›´æ¥ä¿®æ”¹ main branch çš„æ¬Šé™
   - ä½¿ç”¨ branch å³å¯è§£æ±º

**æ­£ç¢ºçš„å”ä½œæ¨¡å¼å°æ¯”ï¼š**

```
é–‹æºå°ˆæ¡ˆå”ä½œï¼ˆéœ€è¦ forkï¼‰ï¼š
ä½ ï¼ˆå¤–éƒ¨è²¢ç»è€…ï¼‰â†’ Fork â†’ ä¿®æ”¹ â†’ PR to original

åœ˜éšŠå…§éƒ¨å”ä½œï¼ˆä½¿ç”¨ branchï¼‰ï¼šâœ… æ­¤é¡Œæƒ…å¢ƒ
ä½ ï¼ˆåœ˜éšŠæˆå“¡ï¼‰â†’ Branch â†’ ä¿®æ”¹ â†’ PR to main
```

**ç‚ºä½•æœ‰ 46% çš„äººé¸ Bï¼š**
- å¯èƒ½æ··æ·†äº† GitHub workflow èˆ‡ Databricks Repos
- Fork + PR åœ¨ GitHub ä¸Šæ˜¯å¸¸è¦‹æµç¨‹
- ä½†åœ¨ Databricks Repos çš„è„ˆçµ¡ä¸‹ï¼ŒBranch + PR æ‰æ˜¯æ­£ç¢ºåšæ³•

**æ˜“æ··æ·†é»:**
Fork å’Œ Branch éƒ½èƒ½é”åˆ°é¡ä¼¼çš„éš”é›¢æ•ˆæœï¼Œä½† Databricks Repos åªæ”¯æ´ Branch

---

### é¸é … C - Pull changes, commit and push to a branch that appeared

**éŒ¯èª¤åŸå› :** æè¿°æ··äº‚ä¸”ä¸ç¬¦åˆ Git å·¥ä½œæµç¨‹ - **pull ä¸æœƒè‡ªå‹•å»ºç«‹æ–° branch**

**è©³ç´°åˆ†æ:**

**æ­¤é¸é …çš„å•é¡Œï¼š**

1. **Pull ä¸æœƒå»ºç«‹æ–° branch**
   ```bash
   # Pull çš„å¯¦éš›ä½œç”¨
   git pull origin main
   # â†’ åªæ˜¯æ›´æ–°ç•¶å‰ branchï¼Œä¸æœƒå»ºç«‹æ–° branch
   ```

2. **ã€Œappeared as changes were pulledã€æ²’æœ‰æ„ç¾©**
   - Pull åªæ˜¯å–å¾—é ç«¯è®Šæ›´
   - ä¸æœƒã€Œå‡ºç¾ã€æ–° branch
   - éœ€è¦æ˜ç¢ºåŸ·è¡Œ `git checkout -b` æ‰èƒ½å»ºç«‹ branch

3. **é‚è¼¯é †åºéŒ¯èª¤**
   ```
   éŒ¯èª¤é †åºï¼ˆé¸é … Cï¼‰ï¼š
   Pull â†’ ç¥å¥‡åœ°å‡ºç¾ branchï¼Ÿâ†’ Commit â†’ Push
   
   æ­£ç¢ºé †åºï¼ˆé¸é … Eï¼‰ï¼š
   Create branch â†’ Commit â†’ Push
   ```

**æ­£ç¢ºçš„ Git å·¥ä½œæµç¨‹ï¼š**

```bash
# 1. å»ºç«‹æ–° branch (å¿…é ˆæ˜ç¢ºåŸ·è¡Œ)
git checkout -b feature/my-work

# 2. é€²è¡Œé–‹ç™¼
# ä¿®æ”¹æª”æ¡ˆ...

# 3. Commit è®Šæ›´
git add .
git commit -m "Add new feature"

# 4. Push åˆ°é ç«¯
git push origin feature/my-work

# Pull åªç”¨æ–¼åŒæ­¥é ç«¯è®Šæ›´ï¼Œä¸æœƒå»ºç«‹ branch
git pull origin main  # åªæ˜¯æ›´æ–°ï¼Œä¸å»ºç«‹ branch
```

**æ˜“æ··æ·†é»:**
å¯èƒ½èª¤è§£äº†ã€Œpullã€æœƒå»ºç«‹ branchï¼Œä½†å¯¦éš›ä¸Š pull åªæ˜¯åŒæ­¥è®Šæ›´

---

### é¸é … D - Merge all differences and make a pull request

**éŒ¯èª¤åŸå› :** é‚è¼¯é †åºéŒ¯èª¤ - **åœ¨å»ºç«‹ Pull Request ä¹‹å‰ä¸æ‡‰è©² merge**

**è©³ç´°åˆ†æ:**

**Pull Request çš„æ­£ç¢ºæµç¨‹ï¼š**

```
æ­£ç¢ºæµç¨‹ï¼š
1. å»ºç«‹ feature branch
2. é–‹ç™¼ä¸¦ commit
3. Push åˆ°é ç«¯
4. å»ºç«‹ Pull Request (é‚„æœª merge)
5. Code review
6. Approve å¾Œæ‰ merge

éŒ¯èª¤æµç¨‹ï¼ˆé¸é … Dï¼‰ï¼š
1. Merge all differences (?) â† é€™æ­¥é©Ÿä¸å°
2. Make a pull request â† å·²ç¶“ merge äº†é‚„å»ºç«‹ PRï¼Ÿ
```

**ã€ŒMerge all differencesã€çš„å•é¡Œï¼š**

1. **æ²’æœ‰ç›®æ¨™ branch**
   - Merge éœ€è¦æŒ‡å®š source å’Œ target branch
   - ã€Œall differencesã€æè¿°ä¸æ¸…æ¥š

2. **æ²’æœ‰ä¿®æ”¹ main çš„æ¬Šé™**
   - é¡Œç›®èªªæ˜æ²’æœ‰ä¿®æ”¹ main çš„æ¬Šé™
   - ç„¡æ³•ç›´æ¥ merge åˆ° main

3. **PR æ˜¯ç‚ºäº† mergeï¼Œä¸æ˜¯ merge å¾Œå»ºç«‹ PR**
   - Pull Request çš„ç›®çš„**å°±æ˜¯è«‹æ±‚ merge**
   - å…ˆ merge å†å»ºç«‹ PR é‚è¼¯éŒ¯èª¤

**æ­£ç¢ºç†è§£ Pull Requestï¼š**

```
Pull Request çš„ç›®çš„ï¼š
ã€Œæˆ‘åœ¨æˆ‘çš„ branch å®Œæˆäº†é–‹ç™¼ï¼Œ
 è«‹ review æˆ‘çš„ç¨‹å¼ç¢¼ï¼Œ
 å¦‚æœæ²’å•é¡Œï¼Œè«‹å¹«æˆ‘ merge åˆ° mainã€

ä¸æ˜¯ï¼š
ã€Œæˆ‘å·²ç¶“ merge äº†ï¼Œ
 ç¾åœ¨å»ºç«‹ PR ä¾†... åšä»€éº¼ï¼Ÿã€
```

**æ˜“æ··æ·†é»:**
å¯èƒ½èª¤è§£äº† merge å’Œ pull request çš„é—œä¿‚èˆ‡é †åº

---

## ğŸ§  è¨˜æ†¶æ³•èˆ‡æŠ€å·§

### å£è¨£
**ã€ŒBranch â†’ Commit â†’ Push â†’ PRï¼ŒDatabricks Repos ä¸èƒ½ Forkã€**

### é—œéµå°æ¯”è¡¨

| æ“ä½œ | Databricks Repos æ”¯æ´ï¼Ÿ | é©ç”¨æƒ…å¢ƒ | ç”¨æ–¼æ­¤é¡Œï¼Ÿ |
|------|----------------------|---------|----------|
| **Create Branch** | âœ… æ˜¯ | åœ˜éšŠå”ä½œ | âœ… æ­£ç¢º (é¸é … E) |
| **Commit & Push** | âœ… æ˜¯ | ä¿å­˜è®Šæ›´ | âœ… æ­£ç¢º (é¸é … E) |
| **Create Fork** | âŒ å¦ | é–‹æºè²¢ç» | âŒ ä¸æ”¯æ´ (é¸é … B) |
| **Send Diff** | âš ï¸ å¯ä»¥ä½†ä¸å»ºè­° | å¿«é€Ÿåˆ†äº« | âŒ éæ¨™æº–æµç¨‹ (é¸é … A) |
| **Pull Request** | âš ï¸ åœ¨ Git å¹³å°æ“ä½œ | Code review | âœ… å¾ŒçºŒæ­¥é©Ÿ |

### Feature Branch Workflow è¦–è¦ºåŒ–

```
Databricks Repos æ“ä½œæµç¨‹ï¼š

Step 1: å»ºç«‹ Branch (åœ¨ Databricks Repos UI)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repos â†’ Branch: main â–¼      â”‚
â”‚         Create Branch...    â”‚ âœ… é¸é … E çš„ç¬¬ä¸€æ­¥
â”‚         â””â”€ feature/my-work  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: é–‹ç™¼èˆ‡ Commit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¿®æ”¹ notebooks              â”‚
â”‚ Git â†’ Commit & Push         â”‚ âœ… é¸é … E çš„å¾ŒçºŒæ­¥é©Ÿ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: åœ¨ Git å¹³å°å»ºç«‹ PR (é›¢é–‹ Databricks)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub/GitLab/Azure DevOps  â”‚
â”‚ Create Pull Request         â”‚
â”‚ feature/my-work â†’ main      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Code Review & Merge (åœ¨ Git å¹³å°)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reviewers approve           â”‚
â”‚ Merge to main               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çµè«–ï¼šé¸é … E å®Œæ•´æè¿°äº†å‰å…©å€‹æ­¥é©Ÿ âœ…
```

### åˆ¤æ–·æŠ€å·§

**è­˜åˆ¥é—œéµå­—ï¼š**
- âœ… "create a new branch" â†’ æ¨™æº– Git å·¥ä½œæµç¨‹
- âœ… "commit all changes" â†’ ä¿å­˜è®Šæ›´
- âœ… "push changes to remote" â†’ åˆ†äº«çµ¦åœ˜éšŠ
- âŒ "create a fork" â†’ Databricks Repos ä¸æ”¯æ´
- âŒ "send git diff" â†’ ä¸æ˜¯æ¨™æº–å”ä½œæ–¹å¼
- âŒ "appeared as changes were pulled" â†’ é‚è¼¯éŒ¯èª¤

**å¿«é€Ÿæ’é™¤æ³•ï¼š**

```
é¸é …æåˆ°ã€Œforkã€ï¼Ÿ
    â†“ æ˜¯
  âŒ éŒ¯èª¤ï¼Databricks Repos ä¸æ”¯æ´ fork

é¸é …æåˆ°ã€Œsend diffã€ï¼Ÿ
    â†“ æ˜¯
  âŒ éŒ¯èª¤ï¼ä¸æ˜¯æ¨™æº– Git å”ä½œæ–¹å¼

é¸é …æåˆ°ã€Œbranch appearedã€ï¼Ÿ
    â†“ æ˜¯
  âŒ éŒ¯èª¤ï¼Branch éœ€è¦æ˜ç¢ºå»ºç«‹

é¸é …æåˆ°ã€Œcreate branch + commit + pushã€ï¼Ÿ
    â†“ æ˜¯
  âœ… æ­£ç¢ºï¼æ¨™æº– Feature Branch Workflow
```

### Databricks Repos æ”¯æ´çš„ Git æ“ä½œ

```
âœ… æ”¯æ´çš„æ“ä½œï¼š
- Clone repository
- Create branch
- Switch branch
- Commit changes
- Push to remote
- Pull from remote
- View commit history
- Resolve conflicts

âŒ ä¸æ”¯æ´çš„æ“ä½œï¼š
- Fork repository (é¸é … B éŒ¯èª¤)
- Rebase (éœ€è¦åœ¨æœ¬åœ°æ“ä½œ)
- Cherry-pick (éœ€è¦åœ¨æœ¬åœ°æ“ä½œ)
- Create Pull Request (åœ¨ Git å¹³å°æ“ä½œ)
```

---

## ğŸ“š å»¶ä¼¸é–±è®€

### å®˜æ–¹æ–‡ä»¶
- [Databricks Repos - Git integration](https://docs.databricks.com/repos/index.html)
- [Databricks Repos - Work with branches](https://docs.databricks.com/repos/repos-setup.html#work-with-branches)
- [Git Feature Branch Workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow)

### ç›¸é—œæ¦‚å¿µ
- Protected Branches
- Code Review æœ€ä½³å¯¦è¸
- CI/CD æ•´åˆèˆ‡ Databricks
- Git å·¥ä½œæµç¨‹ç­–ç•¥ï¼ˆGitflow, GitHub Flowï¼‰

### å¯¦å‹™ç¯„ä¾‹

**1. å®Œæ•´çš„ Databricks Repos å”ä½œæµç¨‹ï¼š**

```python
# Step 1: åœ¨ Databricks Workspace ä¸­ Clone Repository
# Repos â†’ Add Repo
# Git URL: https://github.com/your-org/data-project.git
# Provider: GitHub
# [Create Repo]

# Step 2: å»ºç«‹ Feature Branch
# Repos â†’ Branches â†’ main â–¼
# Create Branch: feature/add-data-validation
# [Create]

# Step 3: é–‹ç™¼ä½ çš„åŠŸèƒ½
# ä¿®æ”¹ /Repos/data-project/validation_notebook.py

# ç¯„ä¾‹ï¼šæ–°å¢è³‡æ–™é©—è­‰é‚è¼¯
from pyspark.sql.functions import col

def validate_data_quality(df):
    """é©—è­‰è³‡æ–™å“è³ª"""
    # æª¢æŸ¥ç©ºå€¼
    null_counts = df.select([
        count(when(col(c).isNull(), c)).alias(c) 
        for c in df.columns
    ])
    
    # æª¢æŸ¥é‡è¤‡å€¼
    duplicate_count = df.count() - df.dropDuplicates().count()
    
    return {
        "null_counts": null_counts,
        "duplicate_count": duplicate_count
    }

# æ¸¬è©¦æ–°åŠŸèƒ½
test_df = spark.read.table("bronze.orders")
results = validate_data_quality(test_df)
print(results)

# Step 4: Commit è®Šæ›´
# Repos â†’ Git åœ–ç¤º
# Commit message: "Add data quality validation function"
# [Commit & Push]

# Step 5: åœ¨ GitHub å»ºç«‹ Pull Request
# å‰å¾€ https://github.com/your-org/data-project
# çœ‹åˆ°æç¤º: "feature/add-data-validation had recent pushes"
# [Compare & pull request]
# å¡«å¯« PR æè¿°ï¼ŒæŒ‡å®š reviewers
# [Create pull request]

# Step 6: Code Review èˆ‡åˆä½µ
# åœ˜éšŠæˆå“¡ review
# è¨è«–ã€ä¿®æ”¹ï¼ˆå¦‚éœ€è¦ï¼‰
# Approve å¾Œ merge åˆ° main
```

**2. è™•ç† Merge Conflictsï¼š**

```python
# æƒ…å¢ƒï¼šä½ çš„ branch èˆ‡ main æœ‰è¡çª

# Step 1: Pull main branch çš„æœ€æ–°è®Šæ›´
# Databricks Repos UI:
# Branch: feature/my-work
# Pull â†’ Select: main
# [Pull]

# Step 2: å¦‚æœæœ‰è¡çªï¼ŒDatabricks æœƒæç¤º
# éœ€è¦åœ¨æœ¬åœ°è§£æ±ºè¡çªæˆ–ä½¿ç”¨ Git å¹³å°

# Step 3: è§£æ±ºè¡çªå¾Œé‡æ–° commit
# ä¿®æ”¹è¡çªçš„æª”æ¡ˆ
# Commit message: "Resolve merge conflicts with main"
# [Commit & Push]
```

**3. Branch ä¿è­·è¨­å®šï¼ˆåœ¨ GitHubï¼‰ï¼š**

```yaml
# .github/branch-protection.yml
# è¨­å®š main branch ä¿è­·è¦å‰‡

main:
  protection:
    required_status_checks:
      strict: true
      contexts:
        - "tests"
        - "lint"
    required_pull_request_reviews:
      required_approving_review_count: 2
      dismiss_stale_reviews: true
    enforce_admins: false
    restrictions: null
```

**4. ä½¿ç”¨ Databricks CLI æ“ä½œ Reposï¼š**

```bash
# åˆ—å‡ºæ‰€æœ‰ Repos
databricks repos list

# å–å¾—ç‰¹å®š Repo è³‡è¨Š
databricks repos get --repo-id 123456

# æ›´æ–° Repo (pull changes)
databricks repos update --repo-id 123456 --branch main

# å»ºç«‹æ–° Repo
databricks repos create \
  --url https://github.com/your-org/project.git \
  --provider github \
  --path /Repos/Production/project
```

**5. Git å·¥ä½œæµç¨‹æœ€ä½³å¯¦è¸ï¼š**

```
åœ˜éšŠå”ä½œå»ºè­°ï¼š

1. Branch å‘½åè¦ç¯„ï¼š
   âœ“ feature/add-user-authentication
   âœ“ bugfix/fix-data-corruption
   âœ“ hotfix/critical-security-patch
   âœ— test
   âœ— my-branch

2. Commit Message è¦ç¯„ï¼š
   âœ“ "Add data validation for order table"
   âœ“ "Fix: Correct date parsing in ETL pipeline"
   âœ— "update"
   âœ— "fix bug"

3. Pull Request æœ€ä½³å¯¦è¸ï¼š
   - æ¸…æ¥šçš„æ¨™é¡Œå’Œæè¿°
   - é€£çµç›¸é—œçš„ issue
   - åŒ…å«æ¸¬è©¦çµæœ
   - è«‹æ±‚é©ç•¶çš„ reviewers
   - ä¿æŒ PR è¦æ¨¡é©ä¸­ï¼ˆä¸è¦å¤ªå¤§ï¼‰

4. Code Review åŸå‰‡ï¼š
   - æª¢æŸ¥é‚è¼¯æ­£ç¢ºæ€§
   - ç¢ºèªç¬¦åˆ coding standards
   - é©—è­‰æ¸¬è©¦è¦†è“‹ç‡
   - å»ºè¨­æ€§çš„å›é¥‹
   - åŠæ™‚ approve æˆ– request changes
```

---

## ğŸ”— ç›¸é—œé¡Œç›®
- Q-XXX: Databricks Repos è¨­å®šèˆ‡æ¬Šé™
- Q-XXX: Git integration æœ€ä½³å¯¦è¸
- Q-XXX: CI/CD èˆ‡ Databricks Workflows æ•´åˆ
- Q-XXX: Notebook ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
