# Question #040

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-040`
### ä¾†æº
**ä¾†æº:** Community
### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
A data engineer is responsible for managing and orchestrating data workflows in their organization's Databricks environment. They have deployed a job called events_process_job using Databricks Asset Bundles. To execute this job, the engineer runs the following command from their terminal:

`databricks bundle run events_process_job`

After observing the command, a senior data engineer suggests that they could improve the execution process by adding the `-t` option when running the command.

Which of the following explain the primary purpose of this option?

### é¸é …
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
- **A.** To trigger dry run of the job without actually processing data
- **B.** To enable temporary logging during job execution
- **C.** To select the target environment for the job run
- **D.** To specify the target cluster size for the job run

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Databricks-CLI`, `Databricks-Workflows`
### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** (ç„¡)
### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Development & Operations

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `C`
### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** C
- **ç¤¾ç¾¤å…±è­˜:** C

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥
**æ ¸å¿ƒæŠ€è¡“:** Databricks Asset Bundles CLI
**é—œéµæ¦‚å¿µ:** å¤šç’°å¢ƒéƒ¨ç½²ã€Target ç’°å¢ƒé¸æ“‡
**é¡Œç›®é—œéµå­—ï¼š**
- **databricks bundle run**: DABs åŸ·è¡Œ job çš„å‘½ä»¤
- **-t option**: target ç’°å¢ƒé¸æ“‡åƒæ•¸
- **environment**: é–‹ç™¼/æ¸¬è©¦/ç”Ÿç”¢ç’°å¢ƒ

---

## âœ… æ­£è§£èªªæ˜
### ç‚ºä»€éº¼ C æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

`-t`ï¼ˆæˆ– `--target`ï¼‰é¸é …ç”¨æ–¼æŒ‡å®šåŸ·è¡Œ job çš„**ç›®æ¨™ç’°å¢ƒ**ã€‚

#### DABs å¤šç’°å¢ƒæ¶æ§‹
```yaml
# databricks.yml é…ç½®ç¯„ä¾‹
bundle:
  name: events_pipeline

targets:
  dev:
    mode: development
    workspace:
      host: https://dev.cloud.databricks.com

  staging:
    workspace:
      host: https://staging.cloud.databricks.com

  prod:
    mode: production
    workspace:
      host: https://prod.cloud.databricks.com
```

#### ä½¿ç”¨ -t é¸é …
```bash
# åœ¨é–‹ç™¼ç’°å¢ƒåŸ·è¡Œ
databricks bundle run events_process_job -t dev

# åœ¨æ¸¬è©¦ç’°å¢ƒåŸ·è¡Œ
databricks bundle run events_process_job -t staging

# åœ¨ç”Ÿç”¢ç’°å¢ƒåŸ·è¡Œ
databricks bundle run events_process_job -t prod
```

#### ç‚ºä»€éº¼éœ€è¦ -t é¸é …ï¼Ÿ
| å¥½è™• | èªªæ˜ |
|------|------|
| **ç’°å¢ƒéš”é›¢** | ç¢ºä¿ job åœ¨æ­£ç¢ºçš„ç’°å¢ƒåŸ·è¡Œ |
| **é¿å…éŒ¯èª¤** | é˜²æ­¢æ„å¤–åœ¨ç”Ÿç”¢ç’°å¢ƒåŸ·è¡Œæ¸¬è©¦ç¨‹å¼ç¢¼ |
| **çµ±ä¸€æµç¨‹** | åŒä¸€ä»½ç¨‹å¼ç¢¼å¯éƒ¨ç½²åˆ°ä¸åŒç’°å¢ƒ |
| **CI/CD æ•´åˆ** | æ–¹ä¾¿è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹ |

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### A. To trigger dry run of the job without actually processing data
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- Dry runï¼ˆæ¨¡æ“¬åŸ·è¡Œï¼‰ä½¿ç”¨çš„æ˜¯ `--validate` æˆ– `bundle validate` å‘½ä»¤
- `-t` ä¸æ˜¯ç”¨æ–¼æ¨¡æ“¬åŸ·è¡Œ

### B. To enable temporary logging during job execution
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- æ—¥èªŒè¨˜éŒ„æ˜¯ Databricks çš„å…§å»ºåŠŸèƒ½
- ä¸éœ€è¦ç‰¹åˆ¥çš„ CLI é¸é …ä¾†å•Ÿç”¨
- `-t` èˆ‡æ—¥èªŒç„¡é—œ

### D. To specify the target cluster size for the job run
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- å¢é›†å¤§å°åœ¨ job å®šç¾©æˆ– databricks.yml ä¸­é…ç½®
- `-t` é¸æ“‡çš„æ˜¯ç’°å¢ƒï¼Œä¸æ˜¯å¢é›†è¦æ ¼
- æ¯å€‹ç’°å¢ƒå¯ä»¥æœ‰ä¸åŒçš„å¢é›†é…ç½®

---

## ğŸ§  è¨˜æ†¶æ³•
### å£è¨£
**ã€Œ-t é¸ç’°å¢ƒï¼Œdev/staging/prod åˆ†å¾—æ¸…ã€**

### DABs CLI å¸¸ç”¨å‘½ä»¤
| å‘½ä»¤ | èªªæ˜ |
|------|------|
| `bundle init` | åˆå§‹åŒ–æ–° bundle |
| `bundle validate` | é©—è­‰é…ç½® |
| `bundle deploy -t <env>` | éƒ¨ç½²åˆ°æŒ‡å®šç’°å¢ƒ |
| `bundle run <job> -t <env>` | åœ¨æŒ‡å®šç’°å¢ƒåŸ·è¡Œ job |
| `bundle destroy -t <env>` | ç§»é™¤æŒ‡å®šç’°å¢ƒçš„è³‡æº |

### -t é¸é …è¨˜æ†¶
```
-t = --target = ç›®æ¨™ç’°å¢ƒ

å¸¸è¦‹ç’°å¢ƒåç¨±ï¼š
â”œâ”€â”€ dev (development) - é–‹ç™¼ç’°å¢ƒ
â”œâ”€â”€ staging (test)    - æ¸¬è©¦ç’°å¢ƒ
â””â”€â”€ prod (production) - ç”Ÿç”¢ç’°å¢ƒ
```

### DABs éƒ¨ç½²æµç¨‹
```
é–‹ç™¼ â†’ é©—è­‰ â†’ éƒ¨ç½² â†’ åŸ·è¡Œ

databricks bundle validate -t dev
databricks bundle deploy -t dev
databricks bundle run my_job -t dev
         â†“
databricks bundle deploy -t staging
databricks bundle run my_job -t staging
         â†“
databricks bundle deploy -t prod
databricks bundle run my_job -t prod
```

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶
- [Databricks Asset Bundles](https://docs.databricks.com/en/dev-tools/bundles/index.html)
- [bundle run command](https://docs.databricks.com/en/dev-tools/cli/bundle-commands.html#run)

---

**[è¿”å›é¡Œç›®](#question-040)**
