# Question #043

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-043`
### ä¾†æº
**ä¾†æº:** Community
### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
Given the following code block in a notebook

```python
db_password = dbutils.secrets.get(scope="dev", key="database_password")

print(db_password)
```

Which statement describes what will happen when the above code is executed?

### é¸é …
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
- **A.** The string value of the password will be printed in plain text.
- **B.** The error message "Secrets can not be printed" will be shown
- **C.** An interactive input box will appear in the notebook
- **D.** The string "REDACTED" will be printed.

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Databricks-Secrets`, `Security`
### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Execution-Behavior`
### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Security & Governance

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `D`
### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** D
- **ç¤¾ç¾¤å…±è­˜:** D

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥
**æ ¸å¿ƒæŠ€è¡“:** Databricks Secrets Redaction æ©Ÿåˆ¶
**é—œéµæ¦‚å¿µ:** `dbutils.secrets.get()`ã€Secret Redactionã€å®‰å…¨è¼¸å‡ºè™•ç†
**é¡Œç›®é—œéµå­—ï¼š**
- **dbutils.secrets.get()**: å¾ Secret Scope å–å¾—å¯†é‘°å€¼çš„ API
- **print()**: è¼¸å‡ºåˆ° notebook cell çš„æ¨™æº–è¼¸å‡º
- **REDACTED**: Databricks è‡ªå‹•æ›¿æ›æ•æ„Ÿè³‡è¨Šçš„é®ç½©å­—ä¸²

---

## âœ… æ­£è§£èªªæ˜
### ç‚ºä»€éº¼ D æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

Databricks å¯¦ä½œäº†ä¸€å¥— **Secret Redactionï¼ˆå¯†é‘°é®ç½©ï¼‰æ©Ÿåˆ¶**ï¼Œé˜²æ­¢æ•æ„Ÿè³‡è¨Šæ„å¤–æ´©éœ²åˆ°è¼¸å‡ºä¸­ã€‚

#### Redaction æ©Ÿåˆ¶é‹ä½œåŸç†
```python
# ç•¶åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼æ™‚ï¼š
db_password = dbutils.secrets.get(scope="dev", key="database_password")
print(db_password)

# å¯¦éš›è¼¸å‡ºï¼š
# [REDACTED]
```

#### ç‚ºä»€éº¼éœ€è¦ Redactionï¼Ÿ
| é¢¨éšªå ´æ™¯ | èªªæ˜ |
|---------|------|
| **Notebook å…±äº«** | å…¶ä»–äººå¯èƒ½çœ‹åˆ° cell è¼¸å‡º |
| **Log è¨˜éŒ„** | å¯†ç¢¼å¯èƒ½è¢«è¨˜éŒ„åˆ°æ—¥èªŒä¸­ |
| **è¢å¹•åˆ†äº«** | å±•ç¤ºæ™‚å¯èƒ½æ„å¤–æ›å…‰ |
| **ç‰ˆæœ¬æ§åˆ¶** | Notebook è¼¸å‡ºå¯èƒ½è¢« commit |

#### Redaction é©ç”¨ç¯„åœ
- `print()` è¼¸å‡º
- Cell çš„é¡¯ç¤ºçµæœ
- `display()` å‡½æ•¸
- DataFrame çš„ `show()` æ–¹æ³•ä¸­çš„å€¼

#### é‡è¦ï¼šSecret å€¼ä»å¯æ­£å¸¸ä½¿ç”¨
```python
# é›–ç„¶ç„¡æ³• printï¼Œä½†å¯ä»¥æ­£å¸¸ç”¨æ–¼é€£æ¥
db_password = dbutils.secrets.get(scope="dev", key="database_password")

# é€™æœƒæ­£å¸¸é‹ä½œï¼ˆpassword æœƒæ­£ç¢ºå‚³éï¼‰
connection = create_connection(
    host="db.example.com",
    password=db_password  # âœ… å¯¦éš›å¯†ç¢¼å€¼æœƒè¢«ä½¿ç”¨
)
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### A. The string value of the password will be printed in plain text.
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- Databricks æœƒè‡ªå‹• redact å¯†é‘°å€¼
- å¦‚æœå…è¨±æ˜æ–‡è¼¸å‡ºï¼Œå°‡é€ æˆåš´é‡å®‰å…¨é¢¨éšª
- é€™æ­£æ˜¯ Redaction æ©Ÿåˆ¶è¦é˜²æ­¢çš„æƒ…æ³

### B. The error message "Secrets can not be printed" will be shown
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- **ä¸æœƒæ‹‹å‡ºéŒ¯èª¤**ï¼Œç¨‹å¼ç¢¼ä»æœƒæ­£å¸¸åŸ·è¡Œ
- Redaction æ˜¯éœé»˜çš„æ›¿æ›æ©Ÿåˆ¶ï¼Œä¸æœƒä¸­æ–·åŸ·è¡Œ
- è¨­è¨ˆä¸Šé¸æ“‡ã€Œéœé»˜é®ç½©ã€è€Œéã€Œå ±éŒ¯é˜»æ­¢ã€

### C. An interactive input box will appear in the notebook
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- `dbutils.secrets.get()` ç›´æ¥å¾ Secret Scope å–å€¼
- ä¸éœ€è¦äº’å‹•å¼è¼¸å…¥
- é€™èˆ‡ `dbutils.widgets` çš„è¡Œç‚ºæ··æ·†

---

## ğŸ§  è¨˜æ†¶æ³•
### å£è¨£
**ã€ŒSecret å–å¾—ç”¨ï¼Œprint æœƒé®ç½©ï¼ŒREDACTED ä¾†ä¿è­·ã€**

### Databricks Secrets ä¸‰è¦ç´ 
| å…ƒç´  | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| **Scope** | å¯†é‘°çš„é‚è¼¯å®¹å™¨ | `dev`, `prod`, `shared` |
| **Key** | å¯†é‘°çš„åç¨± | `database_password`, `api_key` |
| **Value** | å¯†é‘°çš„å¯¦éš›å€¼ | ä¸æœƒé¡¯ç¤ºï¼Œè¢« REDACTED |

### å¸¸ç”¨ dbutils.secrets æ“ä½œ
```python
# åˆ—å‡ºæ‰€æœ‰ Scopes
dbutils.secrets.listScopes()

# åˆ—å‡º Scope ä¸­çš„æ‰€æœ‰ Keys
dbutils.secrets.list("dev")

# å–å¾— Secret å€¼ï¼ˆæœƒè¢« redactï¼‰
dbutils.secrets.get(scope="dev", key="password")
```

### Redaction è¡Œç‚ºå°ç…§è¡¨
| æ“ä½œ | çµæœ |
|------|------|
| `print(secret)` | `[REDACTED]` |
| `display(df_with_secret)` | Secret æ¬„ä½é¡¯ç¤º `[REDACTED]` |
| `ä½¿ç”¨ secret é€£æ¥è³‡æ–™åº«` | æ­£å¸¸é‹ä½œï¼ˆå¯¦éš›å€¼è¢«ä½¿ç”¨ï¼‰ |
| `secret + "suffix"` | `[REDACTED]suffix` |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶
- [Secret redaction](https://docs.databricks.com/en/security/secrets/redaction.html)
- [Manage secrets](https://docs.databricks.com/en/security/secrets/index.html)

---

**[è¿”å›é¡Œç›®](#question-043)**
