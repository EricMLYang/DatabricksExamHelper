# Question #055

---

## é¡Œç›®è³‡è¨Š
### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-055`
### ä¾†æº
**ä¾†æº:** Community
### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹
### é¡Œå¹¹
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
A data analytics firm uses Delta Sharing to collaborate with a partner company. The provider stores the data in AWS US-East-1, while the partner is hosted on Azure in Europe. After initiating large-scale data sharing, the firm notices unexpected costs in their billing dashboard.

What is the most likely reason for the unexpected cost increase?

### é¸é …
<!-- âš ï¸ ä¿æŒè‹±æ–‡åŸæ–‡ï¼Œä¸è¦ç¿»è­¯ -->
- **A.** DBU costs for running Delta Sharing servers across cloud boundaries
- **B.** Storage costs because Delta Sharing requires replication of data across clouds and regions
- **C.** Egress fees are incurred when data transferred between cloud providers and regions
- **D.** Flat rate fee is applied for all shared data by Delta Sharing protocol

---

## æ¨™ç±¤ç³»çµ±
### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `UC-Sharing`, `Delta-Sharing`
### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** (ç„¡)
### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Data Sharing & Cost Management

---

## ç­”æ¡ˆèˆ‡ä¾†æº
### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `C`
### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** C
- **ç¤¾ç¾¤å…±è­˜:** C

---

# é¡Œç›®è§£æ

---

## ğŸ“ è€ƒé»è­˜åˆ¥
**æ ¸å¿ƒæŠ€è¡“:** Delta Sharing è·¨é›²ç«¯æˆæœ¬
**é—œéµæ¦‚å¿µ:** è³‡æ–™å‡ºå£è²»ç”¨ (Egress Fees)ã€è·¨å€åŸŸ/è·¨é›²ç«¯å‚³è¼¸
**é¡Œç›®é—œéµå­—ï¼š**
- **AWS to Azure**: è·¨é›²ç«¯å¹³å°
- **US-East-1 to Europe**: è·¨åœ°ç†å€åŸŸ
- **unexpected costs**: éé æœŸæˆæœ¬

---

## âœ… æ­£è§£èªªæ˜
### ç‚ºä»€éº¼ C æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Ÿ

**Egress Feesï¼ˆè³‡æ–™å‡ºå£è²»ç”¨ï¼‰**æ˜¯é›²ç«¯æœå‹™å•†å°ã€Œè³‡æ–™å‚³è¼¸å‡ºå»ã€æ”¶å–çš„è²»ç”¨ã€‚

#### ä»€éº¼æ˜¯ Egressï¼Ÿ
```
Ingressï¼ˆå…¥å£ï¼‰ï¼šè³‡æ–™é€²å…¥é›²ç«¯ â†’ é€šå¸¸å…è²»
Egressï¼ˆå‡ºå£ï¼‰ï¼šè³‡æ–™é›¢é–‹é›²ç«¯ â†’ éœ€è¦ä»˜è²»

æœ¬é¡Œæƒ…å¢ƒï¼š
AWS US-East-1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Azure Europe
     â†‘                                   â†‘
  è³‡æ–™ä¾†æº                            è³‡æ–™æ¥æ”¶æ–¹
  (Provider)                          (Partner)

AWS æ”¶å– Egress è²»ç”¨ï¼Œå› ç‚ºè³‡æ–™ã€Œé›¢é–‹ã€AWS
```

#### Egress è²»ç”¨è§¸ç™¼æ¢ä»¶
| æƒ…å¢ƒ | æ˜¯å¦æ”¶è²» |
|------|---------|
| åŒå€åŸŸåŒé›²ç«¯ | é€šå¸¸å…è²»æˆ–æ¥µä½ |
| åŒé›²ç«¯è·¨å€åŸŸ | æ”¶è²»ï¼ˆè¼ƒä½ï¼‰ |
| è·¨é›²ç«¯ï¼ˆAWSâ†’Azureï¼‰| æ”¶è²»ï¼ˆè¼ƒé«˜ï¼‰|
| è·¨å€åŸŸ + è·¨é›²ç«¯ | æ”¶è²»ï¼ˆæœ€é«˜ï¼‰|

#### Delta Sharing çš„æˆæœ¬çµæ§‹
```
Delta Sharing æˆæœ¬ = é›²ç«¯ Egress è²»ç”¨ + (å¯é¸) DBU è²»ç”¨

é‡é»ï¼š
- Delta Sharing æœ¬èº«ä¸æ”¶å–é¡å¤–å”è­°è²»ç”¨
- ä¸»è¦æˆæœ¬ä¾†è‡ªé›²ç«¯æœå‹™å•†çš„è³‡æ–™å‚³è¼¸è²»ç”¨
- å¤§é‡è³‡æ–™ + è·¨é›²ç«¯/è·¨å€åŸŸ = é«˜é¡ Egress è²»ç”¨
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### A. DBU costs for running Delta Sharing servers...
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- Delta Sharing æ˜¯**ç„¡ä¼ºæœå™¨å”è­°**
- ä¸éœ€è¦é‹è¡Œå°ˆç”¨ä¼ºæœå™¨
- DBU æˆæœ¬ä¸æ˜¯ä¸»è¦çš„æ„å¤–æˆæœ¬ä¾†æº

### B. Storage costs because Delta Sharing requires replication...
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- Delta Sharing **ä¸éœ€è¦è¤‡è£½è³‡æ–™**
- é€™æ˜¯ Delta Sharing çš„æ ¸å¿ƒå„ªå‹¢ä¹‹ä¸€
- æ¥æ”¶æ–¹ç›´æ¥è®€å–æä¾›æ–¹çš„è³‡æ–™ï¼Œç„¡éœ€è¤‡æœ¬

### D. Flat rate fee is applied for all shared data...
**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**
- Delta Sharing **æ²’æœ‰å›ºå®šè²»ç‡**
- é–‹æºå”è­°ï¼Œä¸æ”¶å–å”è­°ä½¿ç”¨è²»
- æˆæœ¬ä¾†è‡ªåº•å±¤é›²ç«¯æœå‹™

---

## ğŸ§  è¨˜æ†¶æ³•
### å£è¨£
**ã€Œè³‡æ–™å‡ºé›²ç«¯ï¼ŒEgress è¦ä»˜éŒ¢ï¼›è·¨é›²åˆè·¨å€ï¼Œè²»ç”¨æ›´æ˜é¡¯ã€**

### é›²ç«¯è³‡æ–™å‚³è¼¸æˆæœ¬åœ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é›²ç«¯æˆæœ¬é¡å‹                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Storageï¼ˆå„²å­˜ï¼‰ï¼šæŒ‰ GB/æœˆ è¨ˆè²»                     â”‚
â”‚ 2. Computeï¼ˆé‹ç®—ï¼‰ï¼šæŒ‰ DBU/vCPU è¨ˆè²»                 â”‚
â”‚ 3. Egressï¼ˆå‡ºå£ï¼‰ï¼šæŒ‰ GB å‚³è¼¸é‡è¨ˆè²» â† æœ¬é¡Œé‡é»ï¼       â”‚
â”‚ 4. Ingressï¼ˆå…¥å£ï¼‰ï¼šé€šå¸¸å…è²»                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Delta Sharing ç‰¹é»
| ç‰¹é» | èªªæ˜ |
|------|------|
| ç„¡éœ€è¤‡è£½ | è³‡æ–™ç•™åœ¨åŸè™• |
| è·¨å¹³å° | æ”¯æ´ AWSã€Azureã€GCP |
| é–‹æºå”è­° | ç„¡å”è­°è²»ç”¨ |
| ä¸»è¦æˆæœ¬ | é›²ç«¯ Egress è²»ç”¨ |

### é™ä½ Egress æˆæœ¬çš„ç­–ç•¥
| ç­–ç•¥ | èªªæ˜ |
|------|------|
| é¸æ“‡ç›¸åŒå€åŸŸ | æ¸›å°‘è·¨å€åŸŸå‚³è¼¸ |
| é¸æ“‡ç›¸åŒé›²ç«¯ | é¿å…è·¨é›²ç«¯è²»ç”¨ |
| è³‡æ–™å£“ç¸® | æ¸›å°‘å‚³è¼¸è³‡æ–™é‡ |
| å¿«å–ç­–ç•¥ | æ¸›å°‘é‡è¤‡å‚³è¼¸ |

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶
- [Delta Sharing](https://docs.databricks.com/en/delta-sharing/index.html)
- [AWS Data Transfer Pricing](https://aws.amazon.com/ec2/pricing/on-demand/#Data_Transfer)

---

**[è¿”å›é¡Œç›®](#question-055)**
