# Question 20

## Question
A data engineer is working with a large Delta Lake table that has deletion vectors enabled. Considering the underlying mechanics of Delta Lake and its handling of updates, which of the following statements most accurately describes how update operations behave within this table directory?

## Options
- A. Update operations are ignored entirely when deletion vectors are enabled. 
- B. Each update triggers a complete rewrite of all Parquet files that contain the affected data. 
- C. The update operation directly modifies the existing Parquet files in place without creating new files. 
- D. The affected rows are flagged as deleted in the deletion vectors, and the updated rows are written as new Parquet files. (Correct)

## Explanation
When deletion vectors are enabled in a Delta Lake table, update operations do not rewrite entire Parquet files or modify them in place. Instead, Delta Lake leverages deletion vectors to efficiently track which rows are soft deleted without physically removing them from the data files. During an update, the rows that need modification are marked as deleted within the deletion vectors, while the updated versions of those rows are written as new data files. This approach allows Delta Lake to perform updates and deletes more efficiently by avoiding costly file rewrites, improving performance especially for large datasets, while still maintaining ACID transaction guarantees and data consistency.
