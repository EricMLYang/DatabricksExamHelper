# 題目解析模板

<!--
此模板用於建立標準化的題目解析。
目標：確保邏輯排除清晰、術語一致、可複習性高。
-->

---

## 題目回顧

### 題目編號與連結
<!--
與 question-template.md 中的 ID 對應
提供反向連結，方便在解析與題目間切換
-->
**題目 ID:** `Q-XXX-XXX`
**題目連結:** [點此返回題目](../questions/[對應檔名].md)

### 正確答案
<!--
直接標示正確答案，方便快速檢視
-->
**正解:** `[A/B/C/D 或 A,B,C 若為多選]`

---

## 📍 考點識別

<!--
用途說明：
- 明確指出此題測試的核心知識點
- 對應 Databricks 官方考綱的哪個領域
- 列出相關的技術概念或指令
-->

### 主要考點
<!--
範例：
- Delta Lake VACUUM 指令的參數與用途
- Structured Streaming 的 Trigger 模式差異
- Unity Catalog 的權限管理機制
-->
**核心技術:** [技術名稱]
**知識領域:** [對應考綱章節]
**關鍵概念:** [列出 2-3 個關鍵概念]

### 次要考點
<!--
若此題同時涉及其他知識點，列於此處
範例：單位換算、指令語法、參數順序等
-->
- [次要考點 1]
- [次要考點 2]

---

## ✅ 正解說明

<!--
用途說明：
- 詳細解釋為何正確答案是對的
- 提供技術細節與運作原理
- 引用官方文件或最佳實踐
-->

### 為什麼 [正確選項] 是正確的？

<!--
結構化說明，包含：
1. 技術原理解釋
2. 符合題目需求的理由
3. 實際應用情境
-->

**技術原理:**
[說明該選項背後的技術運作原理]

**符合需求:**
[解釋該選項如何滿足題目中的需求或限制條件]

**實務應用:**
[提供實際使用情境或範例程式碼]

```python
# 範例程式碼 (若適用)
[程式碼示範]
```

---

## ❌ 錯誤選項排除

<!--
用途說明：
- 逐一拆解每個錯誤選項
- 指出錯誤的原因（概念混淆、語法錯誤、參數錯誤等）
- 強化「為什麼不對」的邏輯訓練
-->

### 選項 A - [選項摘要]
<!--
若 A 不是正解，分析為何錯誤
-->

**錯誤原因:** [簡短說明]

**詳細分析:**
[深入解釋為什麼此選項不正確，可能包含：]
- 概念混淆（與哪個概念混淆）
- 語法錯誤（缺少參數、順序錯誤等）
- 適用情境不符（此方法用於其他場景）

**易混淆點:**
[指出此選項與正確答案的相似之處，為何容易誤選]

---

### 選項 B - [選項摘要]

**錯誤原因:** [簡短說明]

**詳細分析:**
[同上結構]

**易混淆點:**
[同上結構]

---

### 選項 C - [選項摘要]

**錯誤原因:** [簡短說明]

**詳細分析:**
[同上結構]

**易混淆點:**
[同上結構]

---

### 選項 D - [選項摘要]

**錯誤原因:** [簡短說明]

**詳細分析:**
[同上結構]

**易混淆點:**
[同上結構]

---

## 🧠 記憶法與解題技巧

<!--
用途說明：
- 提供記憶口訣或助記法
- 分享快速解題的判斷邏輯
- 總結此類題目的解題模式
-->

### 記憶口訣
<!--
範例：
- "VACUUM 用 HOURS，OPTIMIZE 用 ZORDER"
- "Trigger 三兄弟：Once 跑一次，Continuous 不停歇，ProcessingTime 定時到"
-->
[提供容易記憶的口訣或圖像化記憶法]

### 解題步驟
<!--
標準化的解題流程，適用於同類型題目
-->
1. **識別題目類型** - [如何快速判斷題目考什麼]
2. **排除明顯錯誤** - [哪些選項可以立即排除]
3. **比較剩餘選項** - [關鍵差異點在哪裡]
4. **確認正解** - [最後驗證的檢查點]

### 常見陷阱警示
<!--
此類題目常見的誤導設計
-->
⚠️ **陷阱 1:** [陷阱描述與避開方法]
⚠️ **陷阱 2:** [陷阱描述與避開方法]

---

## 📚 官方文件與延伸閱讀

<!--
用途說明：
- 提供權威參考來源
- 方便深入學習與驗證
- 建立知識追溯路徑
-->

### 官方文件
<!--
必須提供至少 1 個官方文件連結
格式：[文件標題](URL) - 簡短說明
-->
1. **[官方文件標題](https://docs.databricks.com/...)** - [1-2 句說明此文件涵蓋的內容]
2. **[相關 API 文件](https://...)** - [說明]

### 延伸閱讀
<!--
選填：部落格文章、技術論文、最佳實踐指南等
-->
- [Databricks Blog: 文章標題](URL)
- [Best Practices: 主題](URL)

### 相關題目
<!--
連結到同類型或相關考點的其他題目
有助於交叉複習與知識鞏固
-->
- `Q-XXX-XXX` - [相關題目簡述與關聯性說明]
- `Q-XXX-XXX` - [相關題目簡述與關聯性說明]

---

## 🏷️ 標籤與分類

<!--
自動從 question-template.md 同步，或手動填寫
用於統計分析與弱點識別
-->

**Topics:** `[Tag1]`, `[Tag2]`, `[Tag3]`
**Traps:** `[Trap1]`, `[Trap2]`
**Difficulty:** `L1-Basic` / `L2-Intermediate` / `L3-Advanced`

---

## 📊 學習追蹤 (選填)

<!--
個人化使用：記錄自己的學習歷程
可選擇性填寫，不納入 Git 追蹤（加入 .gitignore）
-->

### 個人筆記
- 初次作答: ✅ 正確 / ❌ 錯誤
- 錯誤原因: [為什麼當時選錯]
- 複習次數: [X 次]
- 掌握狀態: 🔴 不熟悉 / 🟡 部分掌握 / 🟢 已精通

---

## 範例：完整解析示範

```markdown
## 題目回顧
**題目 ID:** `Q-MOCK01-023`
**正解:** `B`

## 📍 考點識別
**核心技術:** Delta Lake VACUUM 指令
**知識領域:** Delta Lake - Data Retention
**關鍵概念:**
- VACUUM 的預設保留期限
- 時間單位換算 (HOURS)
- 儲存空間管理

## ✅ 正解說明

### 為什麼 B (VACUUM table_name RETAIN 720 HOURS) 是正確的？

**技術原理:**
VACUUM 會永久刪除不再被任何版本參照的舊資料檔案。RETAIN 參數指定要保留的最小時間閾值，預設為 168 小時（7 天）。

**符合需求:**
題目要求「刪除超過 30 天的舊版本」，30 天 = 30 × 24 = 720 小時，因此 `RETAIN 720 HOURS` 正確。

**實務應用:**
\`\`\`sql
VACUUM my_table RETAIN 720 HOURS;  -- 保留 30 天內的資料
\`\`\`

## ❌ 錯誤選項排除

### 選項 A - VACUUM table_name RETAIN 30 HOURS
**錯誤原因:** 時間單位換算錯誤

**詳細分析:**
此選項僅保留 30 小時（約 1.25 天）的資料，而非 30 天。這是典型的「數字陷阱」，誤將天數直接當作小時數使用。

**易混淆點:**
題目中的「30 天」數字與選項中的「30」數字相同，但單位不同。

### 選項 C - DELETE FROM table_name WHERE _commit_timestamp < current_date() - 30
**錯誤原因:** 混淆邏輯刪除與實體刪除

**詳細分析:**
DELETE 只會標記資料為刪除（邏輯刪除），不會實際釋放儲存空間。且 `_commit_timestamp` 不是標準欄位。

### 選項 D - OPTIMIZE table_name ZORDER BY (date_column)
**錯誤原因:** 指令用途錯誤

**詳細分析:**
OPTIMIZE 用於合併小檔案與重新排序資料，不會刪除舊版本檔案。

## 🧠 記憶法與解題技巧

### 記憶口訣
"VACUUM 吸塵器，清理舊檔案；RETAIN 加小時，天數要乘 24"

### 解題步驟
1. 識別關鍵字「永久刪除」→ 想到 VACUUM
2. 排除 DELETE (邏輯刪除) 和 OPTIMIZE (效能優化)
3. 計算時間：30 天 × 24 小時 = 720 小時
4. 選擇 B

### 常見陷阱警示
⚠️ **陷阱 1:** 時間單位混淆 - VACUUM 只接受 HOURS，需自行換算
⚠️ **陷阱 2:** 指令用途混淆 - DELETE、VACUUM、OPTIMIZE 功能完全不同

## 📚 官方文件與延伸閱讀

### 官方文件
1. **[VACUUM | Databricks Documentation](https://docs.databricks.com/sql/language-manual/delta-vacuum.html)** - VACUUM 指令的完整說明與參數
2. **[Delta Lake Data Retention](https://docs.databricks.com/delta/history.html)** - Delta Lake 版本管理機制

### 相關題目
- `Q-MOCK01-018` - Delta Lake Time Travel 功能
- `Q-MOCK01-031` - OPTIMIZE 與 ZORDER 效能調校
```

---

## 撰寫指南

### 解析品質檢核表
- [ ] 每個錯誤選項都有明確的排除理由
- [ ] 提供至少 1 個官方文件連結
- [ ] 包含記憶法或解題技巧
- [ ] 邏輯清晰，無術語不一致
- [ ] 可獨立閱讀，不需反覆查閱題目

### 撰寫優先順序
必寫區塊 (🔴)：
- 考點識別
- 正解說明
- 錯誤選項排除
- 官方文件

建議撰寫 (🟡)：
- 記憶法與解題技巧
- 常見陷阱警示

選填區塊 (🟢)：
- 延伸閱讀
- 個人學習追蹤

### Peer Review 重點
在提交 PR 前，請確認：
1. 排除邏輯是否說服力足夠？
2. 技術細節是否正確無誤？
3. 是否符合 `tooling/contribution-guide.md` 規範？
4. 標籤是否符合 `tooling/tagging-schema.md`？
