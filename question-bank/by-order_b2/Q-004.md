# Question 4

## Question
The data engineering team has a Delta table named 'users'. A recent CHECK constraint has been added to the table using the following command:



```

- ALTER TABLE users
- ADD CONSTRAINT valid_age CHECK (age> 0);
```





The team attempted to insert a batch of new records to the table, but there were some records with negative age values which caused the write to fail because of the constraint violation.




Which statement describes the outcome of this batch insert?

## Options
- A. None of the records have been inserted into the table. (Correct)
- B. All records except those that violate the table constraint have been inserted in the table. Records violating the constraint have been ignored. 
- C. Only records processed before reaching the first violating record have been inserted in the table 
- D. All records except those that violate the table constraint have been inserted in the table. Records violating the constraint have been recorded into the transaction log. 

## Explanation
Write operations failed because of the constraint violation. However, ACID guarantees on Delta Lake ensure that all transactions are atomic. That is, they will either succeed or fail completely. So in this case, none of these records have been inserted into the table, even the ones that don't violate the constraints.







Reference:

https://www.databricks.com/glossary/acid-transactions




Study materials from our exam preparation course on Udemy:

Hands-on
