# Question #62

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-062`

### ä¾†æº
**ä¾†æº:** Real Exam Recall

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

The business reporting team requires that data for their dashboards be updated every hour.

The total processing time for the pipeline that extracts, transforms, and loads the data for their pipeline runs in 10 minutes.

Assuming normal operating conditions, which configuration will meet their service-level agreement requirements with the lowest cost?

### é¸é …

- **A.** Manually trigger a job anytime the business reporting team refreshes their dashboards
- **B.** Schedule a job to execute the pipeline once an hour on a new job cluster
- **C.** Schedule a Structured Streaming job with a trigger interval of 60 minutes
- **D.** Schedule a job to execute the pipeline once an hour on a dedicated interactive cluster
- **E.** Configure a job that executes every time new data lands in a given directory

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Job-Scheduling`, `Cost-Optimization`, `Job-Clusters`, `SLA`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Cluster-Type-Selection`, `Cost-vs-Performance`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** `Databricks Workflows`

---

## ç­”æ¡ˆèˆ‡è§£æé€£çµ

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `C`

### è§£ææª”æ¡ˆ
**è©³ç´°è§£æ:** [é»æ­¤æŸ¥çœ‹è§£æ](../analysis/Q-062-analysis.md)

**å‚™è¨»:** Community discussion heavily favors B for cost effectiveness of job clusters vs always-on streaming clusters.

---

# è©³ç´°è§£æ

## ğŸ“ è€ƒé»è­˜åˆ¥

### ä¸»è¦è€ƒé»
**æ ¸å¿ƒæŠ€è¡“:** Job èª¿åº¦ç­–ç•¥èˆ‡æˆæœ¬å„ªåŒ–  
**çŸ¥è­˜é ˜åŸŸ:** Databricks Workflows èˆ‡æˆæœ¬ç®¡ç†  
**é—œéµæ¦‚å¿µ:** Job Clusters vs Interactive Clustersã€SLA èˆ‡æˆæœ¬å¹³è¡¡

### æ¬¡è¦è€ƒé»
- ä¸åŒèª¿åº¦è§¸ç™¼æ©Ÿåˆ¶çš„é©ç”¨å ´æ™¯
- Structured Streaming vs Batch Processing æˆæœ¬æ¯”è¼ƒ
- é›†ç¾¤é¡å‹å°æˆæœ¬çš„å½±éŸ¿

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ B (æ¯å°æ™‚åœ¨æ–° Job Cluster åŸ·è¡Œ) æ˜¯æ­£ç¢ºçš„ï¼Ÿ

**æŠ€è¡“åŸç†:**
Job Cluster æ˜¯ Databricks ç‚ºæ‰¹æ¬¡ä½œæ¥­å„ªåŒ–çš„é›†ç¾¤é¡å‹ï¼š
- **æŒ‰éœ€å•Ÿå‹•:** æ¯æ¬¡ Job åŸ·è¡Œæ™‚æ‰å•Ÿå‹•é›†ç¾¤
- **è‡ªå‹•çµ‚æ­¢:** Job å®Œæˆå¾Œè‡ªå‹•é—œé–‰é›†ç¾¤
- **æˆæœ¬æœ€ä½³åŒ–:** åªåœ¨å¯¦éš›è™•ç†æ™‚é–“æ”¶è²»ï¼ˆæœ¬é¡Œä¸­åªæœ‰ 10 åˆ†é˜ï¼‰

**ç¬¦åˆéœ€æ±‚:**
- **æ»¿è¶³ SLA:** æ¯å°æ™‚åŸ·è¡Œä¸€æ¬¡ï¼Œç¢ºä¿æ•¸æ“šæ›´æ–°é »ç‡ç¬¦åˆè¦æ±‚
- **æˆæœ¬æœ€ä½:** æ¯å°æ™‚åªé‹è¡Œ 10 åˆ†é˜ï¼Œå…¶ä»– 50 åˆ†é˜å®Œå…¨ä¸ç”¢ç”Ÿé‹ç®—æˆæœ¬
- **å¯é æ€§é«˜:** é å®šèª¿åº¦æ¯”æ‰‹å‹•è§¸ç™¼æ›´å¯é 
- **é©åˆæ‰¹æ¬¡:** ETL ç®¡é“å¤©ç„¶é©åˆæ‰¹æ¬¡è™•ç†æ¨¡å¼

**å¯¦å‹™æ‡‰ç”¨:**
```python
# Job é…ç½®ç¯„ä¾‹
{
  "schedule": {
    "quartz_cron_expression": "0 0 * * * ?",  # æ¯å°æ™‚åŸ·è¡Œ
    "timezone_id": "UTC"
  },
  "new_cluster": {
    "spark_version": "13.3.x-scala2.12",
    "node_type_id": "i3.xlarge",
    "num_workers": 2,
    "autotermination_minutes": 0  # Job å®Œæˆå¾Œç«‹å³çµ‚æ­¢
  }
}
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … A - æ‰‹å‹•è§¸ç™¼ Job
**éŒ¯èª¤åŸå› :** ä¸ç¬¦åˆè‡ªå‹•åŒ–å’Œå¯é æ€§è¦æ±‚

**è©³ç´°åˆ†æ:**
æ‰‹å‹•è§¸ç™¼çš„å•é¡Œï¼š
- **ä¸ç¬¦åˆ SLA:** ç„¡æ³•ä¿è­‰æ¯å°æ™‚æº–æ™‚åŸ·è¡Œ
- **äººç‚ºä¾è³´:** éœ€è¦äººå“¡ç›£æ§å’Œæ“ä½œï¼Œå¢åŠ æ•…éšœé¢¨éšª
- **ä¸å¯æ“´å±•:** ç„¡æ³•æ‡‰å°æ¥­å‹™æˆé•·æˆ–æ™‚å€å·®ç•°
- **æˆæœ¬ä¸å¯é æ¸¬:** è§¸ç™¼é »ç‡ä¸è¦å¾‹ï¼Œé›£ä»¥ä¼°ç®—æˆæœ¬

**æ˜“æ··æ·†é»:**
çœ‹ä¼¼æˆæœ¬æœ€ä½ï¼ˆæŒ‰éœ€è§¸ç™¼ï¼‰ï¼Œä½†å¿½ç•¥äº† SLA ä¿è­‰å’Œç‡Ÿé‹å¯é æ€§

### é¸é … C - Structured Streaming (60åˆ†é˜è§¸ç™¼é–“éš”)
**éŒ¯èª¤åŸå› :** æ¶æ§‹éåº¦è¤‡é›œä¸”æˆæœ¬æ›´é«˜

**è©³ç´°åˆ†æ:**
Streaming åœ¨æ­¤å ´æ™¯çš„å•é¡Œï¼š
- **å¸¸é§æˆæœ¬:** Streaming Job éœ€è¦æŒçºŒé‹è¡Œçš„é›†ç¾¤ï¼Œ60åˆ†é˜é–“éš”ä»éœ€è¦ä¿æŒé›†ç¾¤æ´»èº
- **è³‡æºæµªè²»:** å¤§éƒ¨åˆ†æ™‚é–“é›†ç¾¤è™•æ–¼ç­‰å¾…ç‹€æ…‹
- **æ¶æ§‹ä¸åŒ¹é…:** ETL ç®¡é“æ›´é©åˆæ‰¹æ¬¡è™•ç†ï¼Œéå³æ™‚æµè™•ç†
- **è¤‡é›œåº¦æå‡:** éœ€è¦ç®¡ç† streaming ç‹€æ…‹å’Œ checkpoint

**æ˜“æ··æ·†é»:**
Streaming è½èµ·ä¾†å¾ˆç¾ä»£åŒ–ï¼Œä½†è¦è€ƒæ…®å¯¦éš›çš„æˆæœ¬æ•ˆç›Š

### é¸é … D - åœ¨å°ˆç”¨äº’å‹•å¼é›†ç¾¤åŸ·è¡Œ
**éŒ¯èª¤åŸå› :** æˆæœ¬æœ€é«˜çš„é¸æ“‡

**è©³ç´°åˆ†æ:**
Interactive Cluster çš„æˆæœ¬å•é¡Œï¼š
- **24/7 é‹è¡Œæˆæœ¬:** å³ä½¿ä¸åŸ·è¡Œ Job ä¹ŸæŒçºŒæ”¶è²»
- **è³‡æºéåº¦é…ç½®:** ç‚ºäº† 10 åˆ†é˜çš„è™•ç†éœ€è¦ç¶­æŒæ•´å€‹å°æ™‚çš„é›†ç¾¤
- **ç®¡ç†è¤‡é›œ:** éœ€è¦æ‰‹å‹•ç®¡ç†é›†ç¾¤ç”Ÿå‘½é€±æœŸ
- **æˆæœ¬æ”¾å¤§:** æ¯å¤© 24 å°æ™‚æ”¶è²» vs æ¯å¤© 4 å°æ™‚å¯¦éš›ä½¿ç”¨ï¼ˆ10åˆ†é˜ Ã— 24æ¬¡ï¼‰

**æ˜“æ··æ·†é»:**
Interactive Cluster å•Ÿå‹•å¿«ï¼Œä½†å¿½ç•¥äº†æŒçºŒé‹è¡Œçš„æˆæœ¬

### é¸é … E - äº‹ä»¶é©…å‹•çš„ Job è§¸ç™¼
**éŒ¯èª¤åŸå› :** è§¸ç™¼é »ç‡ä¸ç¬¦åˆæ¥­å‹™éœ€æ±‚

**è©³ç´°åˆ†æ:**
äº‹ä»¶é©…å‹•çš„é™åˆ¶ï¼š
- **é »ç‡ä¸å¯æ§:** æ–°æ•¸æ“šåˆ°é”çš„é »ç‡å¯èƒ½èˆ‡æ¯å°æ™‚éœ€æ±‚ä¸åŒ¹é…
- **å¯èƒ½éåº¦è§¸ç™¼:** å¦‚æœæ•¸æ“šé »ç¹åˆ°é”ï¼Œæœƒè¶…éå¿…è¦çš„è™•ç†é »ç‡
- **å¯èƒ½å»¶é²:** å¦‚æœæ•¸æ“šåˆ°é”ä¸è¦å¾‹ï¼Œå¯èƒ½ç„¡æ³•æ»¿è¶³æ¯å°æ™‚æ›´æ–°çš„ SLA
- **è¤‡é›œä¾è³´:** éœ€è¦å»ºç«‹æ–‡ä»¶ç›£æ§æ©Ÿåˆ¶

**æ˜“æ··æ·†é»:**
äº‹ä»¶é©…å‹•è½èµ·ä¾†å¾ˆæ•ˆç‡ï¼Œä½†æ¥­å‹™æœ‰å›ºå®šçš„æ™‚é–“éœ€æ±‚

---

## ğŸ§  è¨˜æ†¶æ³•èˆ‡è§£é¡ŒæŠ€å·§

### è¨˜æ†¶å£è¨£
**"æ‰¹æ¬¡çŸ­å·¥æœ€çœéŒ¢ï¼ŒJob Cluster æ˜¯é¦–é¸"** - çŸ­æ™‚é–“æ‰¹æ¬¡ä½œæ¥­ç”¨ Job Cluster æœ€ç¶“æ¿Ÿ

**"å®šæ™‚å¯é ä¸ç”¨äººï¼Œè‡ªå‹•èª¿åº¦å‹æ‰‹å‹•"** - å®šæ™‚èª¿åº¦æ¯”æ‰‹å‹•è§¸ç™¼æ›´å¯é 

### è§£é¡Œæ­¥é©Ÿ
1. **åˆ†æéœ€æ±‚** - æ¯å°æ™‚æ›´æ–° + 10åˆ†é˜è™•ç†æ™‚é–“ + æœ€ä½æˆæœ¬
2. **æ’é™¤ä¸å¯é ** - æ‰‹å‹•è§¸ç™¼ç„¡æ³•ä¿è­‰ SLA
3. **æ¯”è¼ƒé›†ç¾¤æˆæœ¬** - Job Cluster (æŒ‰éœ€) vs Interactive (æŒçºŒ) vs Streaming (å¸¸é§)
4. **é¸æ“‡æœ€ç¶“æ¿Ÿ** - çŸ­æ™‚é–“æ‰¹æ¬¡ä½œæ¥­é¸ Job Cluster

### å¸¸è¦‹é™·é˜±è­¦ç¤º
âš ï¸ **é™·é˜± 1: æ–°æŠ€è¡“è¿·æ€** - ä¸æ˜¯è¶Šæ–°è¶Šå¥½ï¼Œè¦ç¬¦åˆå¯¦éš›ä½¿ç”¨å ´æ™¯
âš ï¸ **é™·é˜± 2: å¿½ç•¥éš±è—æˆæœ¬** - Interactive å’Œ Streaming éƒ½æœ‰æŒçºŒé‹è¡Œçš„éš±è—æˆæœ¬

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶èˆ‡å»¶ä¼¸é–±è®€

### å®˜æ–¹æ–‡ä»¶
1. **[Job Clusters vs All-Purpose Clusters](https://docs.databricks.com/clusters/cluster-types.html)** - ä¸åŒé›†ç¾¤é¡å‹çš„æˆæœ¬èˆ‡é©ç”¨å ´æ™¯æ¯”è¼ƒ
2. **[Databricks Pricing and Cost Optimization](https://docs.databricks.com/administration-guide/cloud-configurations/aws/pricing.html)** - è©³ç´°çš„æˆæœ¬çµæ§‹èˆ‡å„ªåŒ–å»ºè­°

### å»¶ä¼¸é–±è®€
- [Workflow Job Best Practices](https://docs.databricks.com/workflows/jobs/jobs-best-practices.html)
- [Cost Management Strategies](https://docs.databricks.com/administration-guide/cloud-configurations/cost-management.html)

### ç›¸é—œé¡Œç›®
- `Q-001` - Databricks Jobs åŸºç¤èª¿åº¦é…ç½®
- `Q-021` - é›†ç¾¤é¡å‹é¸æ“‡èˆ‡æˆæœ¬å„ªåŒ–

---

## ç›¸é—œè³‡æº

### å®˜æ–¹æ–‡ä»¶
- [Job Clusters vs All-Purpose Clusters](https://docs.databricks.com/clusters/cluster-types.html)
- [Cost Management](https://docs.databricks.com/administration-guide/cloud-configurations/aws/pricing.html)
