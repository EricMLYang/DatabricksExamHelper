---

## è§£é¡Œè§£æï¼ˆåŸ A æª”å…§å®¹ï¼‰

# Q-053 é¡Œç›®è§£æ

---

## é¡Œç›®å›é¡§

### é¡Œç›®ç·¨è™Ÿèˆ‡é€£çµ

**é¡Œç›® ID:** `Q-053`
**é¡Œç›®é€£çµ:** [é»æ­¤è¿”å›é¡Œç›®](Q-053.md)

### åŸæ–‡é¡Œç›®

**Which distribution does Databricks support for installing custom Python code packages?**

**é¸é …ï¼š**
- A. sbt
- B. CRAN
- C. npm
- D. Wheels
- E. jars

### æ­£ç¢ºç­”æ¡ˆ

**æ­£è§£:** `D`

---

## ğŸ“ è€ƒé»è­˜åˆ¥

### ä¸»è¦è€ƒé»

**æ ¸å¿ƒæŠ€è¡“:** Python Package Distribution Formats
**çŸ¥è­˜é ˜åŸŸ:** Libraries & Package Management
**é—œéµæ¦‚å¿µ:** `Wheels`, `Python Packaging`, `Library Installation`

### æ¬¡è¦è€ƒé»

* ä¸åŒç¨‹å¼èªè¨€çš„å¥—ä»¶ç®¡ç†ç³»çµ±å·®ç•°
* Databricks æ”¯æ´çš„å®‰è£æ–¹å¼

---

## ğŸ”¤ é‡è¦è‹±æ–‡è©èªè¬›è§£ï¼ˆå…ˆç·´é€™äº›å†è§£é¡Œï¼‰

* **distribution**ï¼šç™¼è¡Œç‰ˆã€æ•£å¸ƒæ ¼å¼ï¼ˆæŒ‡å¥—ä»¶çš„æ‰“åŒ…æ ¼å¼ï¼‰
* **support**ï¼šæ”¯æ´ï¼ˆé¡Œç›®å•ã€ŒDatabricks æ”¯æ´å“ªç¨®æ ¼å¼ã€ï¼‰
* **installing**ï¼šå®‰è£ï¼ˆå‹•åè©ï¼Œè¡¨ç¤ºã€Œå®‰è£é€™å€‹å‹•ä½œã€ï¼‰
* **custom**ï¼šè‡ªè¨‚çš„ã€å®¢è£½åŒ–çš„ï¼ˆç›¸å°æ–¼æ¨™æº–åº«ï¼‰
* **Python code packages**ï¼šPython ç¨‹å¼ç¢¼å¥—ä»¶ï¼ˆä½ è‡ªå·±å¯«çš„æˆ–ç¬¬ä¸‰æ–¹çš„ libraryï¼‰

âœ… **é¡Œç›®è¨Šè™Ÿå¾ˆæ˜ç¢ºï¼š**ã€ŒPythonã€ï¼‹ã€Œdistributionã€ï¼‹ã€Œinstalling packagesã€ï¼ **Python å¥—ä»¶çš„æ‰“åŒ…æ ¼å¼**ã€‚

---

## ğŸ§© Databricks / Spark å‰æè³‡è¨Šï¼ˆæ­£è§£èªªæ˜ä¹‹å‰å…ˆè£œåº•å±¤æ¦‚å¿µï¼‰

åœ¨ Databricks ç’°å¢ƒä¸­å®‰è£ Python å¥—ä»¶ï¼Œæœ‰å¹¾ç¨®å¸¸è¦‹æ–¹å¼ï¼š

* **é€é Cluster Libraries UI**ï¼šä¸Šå‚³ wheel æª”ã€æŒ‡å®š PyPI å¥—ä»¶åç¨±
* **åœ¨ Notebook ä¸­ä½¿ç”¨ `%pip install`**ï¼šè‡¨æ™‚å®‰è£ï¼ˆé‡å°è©² sessionï¼‰
* **ä½¿ç”¨ Init Scripts**ï¼šcluster å•Ÿå‹•æ™‚è‡ªå‹•å®‰è£
* **ä½¿ç”¨ Databricks Repos**ï¼šç‰ˆæ§ä½ çš„ç¨‹å¼ç¢¼ï¼Œä½†å¥—ä»¶é‚„æ˜¯è¦å¦å¤–è£

### Python å¥—ä»¶æ ¼å¼çš„æ­·å²èˆ‡ç¾æ³

* **æ—©æœŸï¼š** `.egg` æ ¼å¼ï¼ˆé¡ä¼¼å£“ç¸®æª”ï¼Œä½†å·²éæ™‚ï¼‰
* **ç¾ä»£æ¨™æº–ï¼š** **Wheelï¼ˆ`.whl`ï¼‰** æ ¼å¼
  * æœ¬è³ªæ˜¯ ZIP æ ¼å¼çš„é ç·¨è­¯å¥—ä»¶
  * å®‰è£é€Ÿåº¦å¿«ï¼ˆä¸éœ€è¦é‡æ–°ç·¨è­¯ï¼‰
  * å¯ä»¥åŒ…å« C extensionsï¼ˆç·¨è­¯å¥½çš„ binaryï¼‰
  * æ˜¯ Python å®˜æ–¹æ¨è–¦çš„åˆ†ç™¼æ ¼å¼

**ç‚ºä»€éº¼ Databricks ç‰¹åˆ¥æ”¯æ´ Wheelsï¼Ÿ**

* **æ•ˆèƒ½ï¼š** Cluster å•Ÿå‹•æ™‚éœ€è¦å¿«é€Ÿå®‰è£ librariesï¼Œwheel ä¸ç”¨ç·¨è­¯ï¼Œç¯€çœæ™‚é–“
* **ç›¸å®¹æ€§ï¼š** å¯ä»¥æä¾›é‡å°ç‰¹å®šå¹³å°ï¼ˆLinux x86_64ï¼‰é ç·¨è­¯çš„ç‰ˆæœ¬
* **æ¨™æº–åŒ–ï¼š** ç¬¦åˆ PEP 427 æ¨™æº–ï¼Œå·¥å…·éˆæˆç†Ÿ

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ D (Wheels) æ˜¯æ­£ç¢ºçš„ï¼Ÿ

**æŠ€è¡“åŸç†ï¼š**
Wheelsï¼ˆ`.whl`ï¼‰æ˜¯ Python å®˜æ–¹æ¨è–¦çš„**é ç·¨è­¯å¥—ä»¶åˆ†ç™¼æ ¼å¼**ï¼Œç¬¦åˆ PEP 427 æ¨™æº–ã€‚Databricks å®Œæ•´æ”¯æ´é€é wheel æª”æ¡ˆå®‰è£è‡ªè¨‚ Python å¥—ä»¶ã€‚

**é¡Œç›®å°æ‡‰ï¼š**

* ã€ŒPython code packagesã€â†’ Wheels æ˜¯ Python å°ˆå±¬æ ¼å¼
* ã€Œdistributionã€â†’ Wheel å°±æ˜¯ä¸€ç¨® distribution format
* ã€Œinstallingã€â†’ Databricks æ”¯æ´ç›´æ¥ä¸Šå‚³ `.whl` æª”æˆ–å¾ PyPI å®‰è£

**å¯¦å‹™æ‡‰ç”¨ï¼ˆDatabricks å¸¸è¦‹åšæ³•ï¼‰ï¼š**

#### æ–¹æ³• 1ï¼šåœ¨ Cluster UI å®‰è£ Wheel

```
1. å»ºç«‹ä½ çš„ wheelï¼š
	python setup.py bdist_wheel

2. ä¸Šå‚³åˆ° Databricksï¼š
	Cluster â†’ Libraries â†’ Install New â†’ Upload â†’ é¸æ“‡ .whl æª”
```

#### æ–¹æ³• 2ï¼šåœ¨ Notebook ä¸­ä½¿ç”¨ %pip

```python
# å¾ PyPI å®‰è£ï¼ˆæœƒè‡ªå‹•ä¸‹è¼‰ wheelï¼‰
%pip install pandas==1.5.3

# å¾ DBFS å®‰è£æœ¬åœ° wheel
%pip install /dbfs/path/to/your_package-1.0.0-py3-none-any.whl
```

#### æ–¹æ³• 3ï¼šåœ¨ init script ä¸­æ‰¹æ¬¡å®‰è£

```bash
#!/bin/bash
pip install /dbfs/wheels/custom_lib-1.0-py3-none-any.whl
```

**Databricks å®˜æ–¹æ–‡ä»¶æ˜ç¢ºèªªæ˜ï¼š**
> "You can install Python libraries packaged as Python wheels."

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … A - `sbt`

**éŒ¯èª¤åŸå› :** èªè¨€éŒ¯èª¤
**è©³ç´°åˆ†æï¼š**

* `sbt` (Scala Build Tool) æ˜¯ **Scala** å°ˆç”¨çš„å»ºæ§‹å·¥å…·
* é›–ç„¶ Databricks æ”¯æ´ Scalaï¼ˆSpark çš„åŸç”Ÿèªè¨€ï¼‰ï¼Œä½†é¡Œç›®å•çš„æ˜¯ **Python packages**
* sbt ç®¡ç†çš„æ˜¯ `.jar` æª”ï¼ˆJava/Scalaï¼‰ï¼Œä¸æ˜¯ Python çš„ wheel

âœ… ä¸€å¥è©±è¨˜ä½ï¼š**sbt = Scala çš„åœ°ç›¤ï¼Œè·Ÿ Python ç„¡é—œ**

---

### é¸é … B - `CRAN`

**éŒ¯èª¤åŸå› :** èªè¨€éŒ¯èª¤
**è©³ç´°åˆ†æï¼š**

* CRAN (Comprehensive R Archive Network) æ˜¯ **R èªè¨€** çš„å¥—ä»¶å€‰åº«
* Databricks æ”¯æ´ Rï¼ˆé€é SparkRï¼‰ï¼Œä½† CRAN ä¸æ˜¯ã€Œdistribution formatã€ï¼Œè€Œæ˜¯ã€Œrepositoryã€
* é¡Œç›®å•çš„æ˜¯ã€Œdistribution æ ¼å¼ã€ï¼Œä¸æ˜¯ã€Œå¾å“ªè£¡ä¸‹è¼‰ã€

âœ… é—œéµå·®ç•°ï¼š

* CRANï¼šå¥—ä»¶çš„ã€Œå­˜æ”¾ä½ç½®ã€ï¼ˆrepositoryï¼‰
* Wheelï¼šå¥—ä»¶çš„ã€Œæ‰“åŒ…æ ¼å¼ã€ï¼ˆdistribution formatï¼‰

---

### é¸é … C - `npm`

**éŒ¯èª¤åŸå› :** èªè¨€éŒ¯èª¤
**è©³ç´°åˆ†æï¼š**

* `npm` (Node Package Manager) æ˜¯ **JavaScript/Node.js** çš„å¥—ä»¶ç®¡ç†å·¥å…·
* Databricks ä¸æ”¯æ´åœ¨ cluster ä¸ŠåŸ·è¡Œ Node.js runtime
* npm ç®¡ç†çš„æ˜¯ `.tgz` æˆ–ç›´æ¥å¾ registry å®‰è£ï¼Œè·Ÿ Python ç”Ÿæ…‹ç„¡é—œ

---

### é¸é … E - `jars`

**éŒ¯èª¤åŸå› :** èªè¨€æ¥è¿‘ä½†ä¸ç¬¦åˆé¡Œæ„
**è©³ç´°åˆ†æï¼š**

* `.jar` (Java Archive) æ˜¯ **Java/Scala** çš„æ‰“åŒ…æ ¼å¼
* Databricks **ç¢ºå¯¦æ”¯æ´å®‰è£ jar æª”**ï¼ˆå› ç‚º Spark æ˜¯ JVM-basedï¼‰
* **ä½†é¡Œç›®å•çš„æ˜¯ Python packagesï¼**
* Python ä¸ä½¿ç”¨ jar æ ¼å¼æ‰“åŒ…

âš ï¸ **é€™æ˜¯æœ€å®¹æ˜“èª¤é¸çš„é™·é˜±ï¼** å› ç‚ºï¼š

* jar åœ¨ Databricks è£¡ç¢ºå¯¦å¾ˆå¸¸è¦‹ï¼ˆè£ Spark librariesï¼‰
* ä½†è¦æ³¨æ„é¡Œç›®é™å®šäº†ã€ŒPython code packagesã€

---

## ğŸ§  è¨˜æ†¶æ³•èˆ‡è§£é¡ŒæŠ€å·§

### è¨˜æ†¶å£è¨£

**èªè¨€å°æ‡‰è¨˜æ†¶æ³•ï¼ˆPackage Format Cheat Sheetï¼‰ï¼š**

| èªè¨€       | å¥—ä»¶æ ¼å¼         | ç®¡ç†å·¥å…·    |
| ---------- | ---------------- | ----------- |
| **Python** | **Wheel (.whl)** | **pip**     |
| Scala      | jar              | sbt / Maven |
| R          | tar.gz           | CRAN        |
| JavaScript | tgz              | npm         |

âœ… **å¿«é€Ÿåˆ¤æ–·ï¼šé¡Œç›®å‡ºç¾ Python â†’ é¸ Wheel**

### è§£é¡Œæ­¥é©Ÿ

1. **çœ‹é¡Œç›®é—œéµå­—ï¼š** "Python code packages"
2. **å¿«é€Ÿæ’é™¤ï¼š** çœ‹é¸é …ä¸­å“ªäº›æ˜é¡¯æ˜¯å…¶ä»–èªè¨€çš„å·¥å…·
	- sbt (Scala)
	- CRAN (R)
	- npm (JavaScript)
	- jars (Java/Scalaï¼Œä½†é¡Œç›®æ˜¯ Pythonï¼)
3. **é–å®šæ­£è§£ï¼š** åªå‰© Wheelsï¼Œä¸”å®ƒç¢ºå¯¦æ˜¯ Python çš„æ¨™æº–æ ¼å¼

### å¸¸è¦‹é™·é˜±è­¦ç¤º

âš ï¸ **é™·é˜± 1ï¼šçœ‹åˆ° jar å°±é¸ï¼ˆå› ç‚º Databricks å¸¸ç”¨ Sparkï¼‰**
â†’ å‹™å¿…çœ‹æ¸…æ¥šé¡Œç›®å•çš„æ˜¯ã€ŒPython packagesã€

âš ï¸ **é™·é˜± 2ï¼šä»¥ç‚º CRAN æ˜¯ä¸€ç¨®æ ¼å¼**
â†’ CRAN æ˜¯ repositoryï¼ˆå€‰åº«ï¼‰ï¼Œä¸æ˜¯ distribution formatï¼ˆæ ¼å¼ï¼‰

âš ï¸ **é™·é˜± 3ï¼šä¸ç¢ºå®š Wheel çš„å¯«æ³•ï¼ˆæ˜¯ wheel é‚„æ˜¯ wheelsï¼Ÿï¼‰**
â†’ æ­£å¼åç¨±æ˜¯ "Wheel"ï¼ˆå–®æ•¸ï¼‰ï¼Œæª”æ¡ˆå‰¯æª”åæ˜¯ `.whl`

---

## ğŸ“š å»¶ä¼¸çŸ¥è­˜ï¼ˆé¸è®€ï¼‰

### Wheel çš„å‘½åè¦å‰‡

ä¸€å€‹å…¸å‹çš„ wheel æª”åï¼š

```
package_name-1.0.0-py3-none-any.whl
â”‚            â”‚      â”‚   â”‚    â”‚
â”‚            â”‚      â”‚   â”‚    â””â”€ å¹³å°ï¼ˆany=è·¨å¹³å°ï¼‰
â”‚            â”‚      â”‚   â””â”€â”€â”€â”€â”€â”€ ABI tagï¼ˆnone=ç´” Pythonï¼‰
â”‚            â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Python ç‰ˆæœ¬ï¼ˆpy3ï¼‰
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¥—ä»¶ç‰ˆæœ¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¥—ä»¶åç¨±
```

### åœ¨ Databricks ä¸­å»ºç«‹èˆ‡å®‰è£ Wheel çš„å®Œæ•´æµç¨‹

```bash
# 1. æº–å‚™ setup.py
# 2. å»ºç«‹ wheel
python setup.py bdist_wheel

# 3. ä¸Šå‚³åˆ° DBFSï¼ˆä½¿ç”¨ Databricks CLIï¼‰
databricks fs cp dist/mypackage-1.0-py3-none-any.whl dbfs:/wheels/

# 4. åœ¨ Notebook ä¸­å®‰è£
%pip install /dbfs/wheels/mypackage-1.0-py3-none-any.whl
```

---

## ğŸ·ï¸ æ¨™ç±¤èˆ‡åˆ†é¡

**Topics:** `Python-Packages`, `Libraries`, `Installation`, `Wheels`
**Traps:** `Package-Manager-Types`, `Language-Specific`
**Difficulty:** `L1-Basic`
**Domain:** `Development Tools`

---

## ç›¸é—œè³‡æº

### å®˜æ–¹æ–‡ä»¶
- [Python Libraries on Databricks](https://docs.databricks.com/libraries/index.html)
- [Install Python Packages](https://docs.databricks.com/libraries/notebooks-python-libraries.html)
- [PEP 427 - The Wheel Binary Package Format](https://www.python.org/dev/peps/pep-0427/)

# Question #53

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-053`

### ä¾†æº
**ä¾†æº:** Real Exam Recall

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

Which distribution does Databricks support for installing custom Python code packages?

### é¸é …

- **A.** sbt
- **B.** CRAN
- **C.** npm
- **D.** Wheels
- **E.** jars

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Python-Packages`, `Libraries`, `Installation`, `Wheels`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `Package-Manager-Types`, `Language-Specific`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** `Development Tools`

---

## ç­”æ¡ˆèˆ‡è§£æé€£çµ

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `D`

### è§£ææª”æ¡ˆ
**è©³ç´°è§£æ:** ä¸‹æ–¹æ•´åˆè§£æ

---

## ç›¸é—œè³‡æº

### å®˜æ–¹æ–‡ä»¶
- [Python Libraries](https://docs.databricks.com/libraries/index.html)
- [Install Python Packages](https://docs.databricks.com/libraries/notebooks-python-libraries.html)

