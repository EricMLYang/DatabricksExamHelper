# Question #104

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-104`

### ä¾†æº
**ä¾†æº:** Mock Exam / Community Contributed

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L1-Basic`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

The Databricks CLI is used to trigger a run of an existing job by passing the `job_id` parameter. The response that the job run request has been submitted successfully includes a field `run_id`.

Which statement describes what the number alongside this field represents?

### é¸é …

- **A.** The job_id and number of times the job has been run are concatenated and returned.
- **B.** The total number of jobs that have been run in the workspace.
- **C.** The number of times the job definition has been run in this workspace.
- **D.** The job_id is returned in this field.
- **E.** The globally unique ID of the newly triggered run.

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `Jobs`, `CLI`, `Automation`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `ID-Type-Confusion`, `Scope-Misunderstanding`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** Data Engineering / Operations & Automation

---

## ç­”æ¡ˆèˆ‡ä¾†æº

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `E`

### ç­”æ¡ˆä¾†æº
- **ä¾†æºæ¨™è¨»ç­”æ¡ˆ:** E
- **ç¤¾ç¾¤æŠ•ç¥¨ç­”æ¡ˆ:** E (100%)

---

# é¡Œç›®è§£æ

---

## é¡Œç›®å›é¡§

### é¡Œç›®ç·¨è™Ÿèˆ‡é€£çµ
**é¡Œç›® ID:** `Q-104`
**é¡Œç›®é€£çµ:** [é»æ­¤è¿”å›é¡Œç›®](#question-104)

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `E`

---

## ğŸ“ è€ƒé»è­˜åˆ¥

### ä¸»è¦è€ƒé»
**æ ¸å¿ƒæŠ€è¡“:** Databricks Jobs API - Job ID vs Run ID
**çŸ¥è­˜é ˜åŸŸ:** Operations & Automation / CLI Usage
**é—œéµæ¦‚å¿µ:**
- `job_id` vs `run_id` çš„å€åˆ¥
- Job Run çš„å”¯ä¸€è­˜åˆ¥æ©Ÿåˆ¶
- Databricks CLI çš„å›æ‡‰æ ¼å¼

### æ¬¡è¦è€ƒé»
- Job åŸ·è¡Œè¿½è¹¤èˆ‡ç›£æ§
- API å›æ‡‰æ¬„ä½çš„èªç¾©ç†è§£

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ E æ˜¯æ­£ç¢ºçš„ï¼Ÿ

**æŠ€è¡“åŸç†:**

**1. Job ID vs Run ID çš„æ ¸å¿ƒå·®ç•°ï¼š**

| æ¦‚å¿µ | å®šç¾© | ç‰¹æ€§ | ç¯„ä¾‹ |
|------|------|------|------|
| **`job_id`** | Job **å®šç¾©** çš„å”¯ä¸€è­˜åˆ¥ç¢¼ | â€¢ å»ºç«‹ Job æ™‚ç”¢ç”Ÿ<br>â€¢ æ°¸ä¹…ä¸è®Š<br>â€¢ ä¸€å°å¤šï¼ˆä¸€å€‹ Job å¯æœ‰å¤šæ¬¡åŸ·è¡Œï¼‰ | `123456789` |
| **`run_id`** | Job **åŸ·è¡Œå¯¦ä¾‹** çš„å”¯ä¸€è­˜åˆ¥ç¢¼ | â€¢ æ¯æ¬¡åŸ·è¡Œç”¢ç”Ÿæ–°çš„<br>â€¢ **å…¨åŸŸå”¯ä¸€**<br>â€¢ ç”¨æ–¼è¿½è¹¤ç‰¹å®šåŸ·è¡Œ | `987654321` |

**2. `run_id` æ˜¯å…¨åŸŸå”¯ä¸€è­˜åˆ¥ç¢¼ï¼ˆé¸é … Eï¼‰ï¼š**

**"The globally unique ID of the newly triggered run"**

é€™æ˜¯ `run_id` çš„ **æ ¸å¿ƒç‰¹æ€§**ï¼š
- âœ… **å…¨åŸŸå”¯ä¸€** - åœ¨æ•´å€‹ Databricks Workspace ä¸­å”¯ä¸€
- âœ… **è¿½è¹¤ç‰¹å®šåŸ·è¡Œ** - ç”¨æ–¼æŸ¥è©¢ã€ç›£æ§ã€å–æ¶ˆç‰¹å®šçš„ Job Run
- âœ… **æ¯æ¬¡åŸ·è¡Œéƒ½ä¸åŒ** - å³ä½¿æ˜¯åŒä¸€å€‹ Jobï¼Œæ¯æ¬¡åŸ·è¡Œçš„ `run_id` éƒ½ä¸åŒ
- âœ… **ç¨ç«‹æ–¼ Job** - èˆ‡ `job_id` å®Œå…¨ä¸åŒçš„è­˜åˆ¥ç³»çµ±

**ç¬¦åˆéœ€æ±‚:**

**CLI å¯¦éš›æ“ä½œç¯„ä¾‹ï¼š**

```bash
# 1. è§¸ç™¼ Job åŸ·è¡Œï¼ˆå‚³å…¥ job_idï¼‰
databricks jobs run-now --job-id 123456789

# 2. å›æ‡‰åŒ…å« run_idï¼ˆå…¨åŸŸå”¯ä¸€çš„åŸ·è¡Œ IDï¼‰
{
  "run_id": 987654321,
  "number_in_job": 42
}

# 3. ä½¿ç”¨ run_id æŸ¥è©¢é€™æ¬¡ç‰¹å®šåŸ·è¡Œçš„ç‹€æ…‹
databricks runs get --run-id 987654321

# 4. ä½¿ç”¨ run_id å–æ¶ˆé€™æ¬¡åŸ·è¡Œ
databricks runs cancel --run-id 987654321
```

**Python API ç¯„ä¾‹ï¼š**

```python
from databricks.sdk import WorkspaceClient

w = WorkspaceClient()

# 1. è§¸ç™¼ Job åŸ·è¡Œ
job_id = 123456789
run = w.jobs.run_now(job_id=job_id)

# 2. å–å¾— run_idï¼ˆå…¨åŸŸå”¯ä¸€è­˜åˆ¥ç¢¼ï¼‰
print(f"Job ID: {job_id}")           # Job å®šç¾©çš„ IDï¼ˆæ°¸ä¹…ä¸è®Šï¼‰
print(f"Run ID: {run.run_id}")       # é€™æ¬¡åŸ·è¡Œçš„ IDï¼ˆå…¨åŸŸå”¯ä¸€ï¼‰
# è¼¸å‡ºç¯„ä¾‹ï¼š
# Job ID: 123456789
# Run ID: 987654321  â† å…¨åŸŸå”¯ä¸€ï¼Œæ¯æ¬¡åŸ·è¡Œéƒ½ä¸åŒ

# 3. ä½¿ç”¨ run_id ç›£æ§é€™æ¬¡åŸ·è¡Œ
run_status = w.jobs.get_run(run_id=run.run_id)
print(f"ç‹€æ…‹: {run_status.state.life_cycle_state}")
print(f"çµæœ: {run_status.state.result_state}")

# 4. åŒä¸€å€‹ Job å†æ¬¡åŸ·è¡Œ â†’ ç”¢ç”Ÿæ–°çš„ run_id
run2 = w.jobs.run_now(job_id=job_id)
print(f"æ–°çš„ Run ID: {run2.run_id}")  # ä¾‹å¦‚ï¼š987654322ï¼ˆä¸åŒçš„å”¯ä¸€ IDï¼‰
```

**å¯¦éš›å·¥ä½œæµç¨‹åœ–è§£ï¼š**

```
Job å®šç¾© (job_id: 123456789)
    â”‚
    â”œâ”€â†’ ç¬¬ 1 æ¬¡åŸ·è¡Œ â†’ run_id: 987654321 (å…¨åŸŸå”¯ä¸€)
    â”‚                  â”œâ”€ å¯æŸ¥è©¢æ­¤æ¬¡åŸ·è¡Œç‹€æ…‹
    â”‚                  â”œâ”€ å¯å–æ¶ˆæ­¤æ¬¡åŸ·è¡Œ
    â”‚                  â””â”€ å¯æŸ¥çœ‹æ­¤æ¬¡åŸ·è¡Œæ—¥èªŒ
    â”‚
    â”œâ”€â†’ ç¬¬ 2 æ¬¡åŸ·è¡Œ â†’ run_id: 987654322 (å…¨åŸŸå”¯ä¸€)
    â”‚                  â””â”€ ä¸åŒçš„ run_idï¼Œç¨ç«‹è¿½è¹¤
    â”‚
    â””â”€â†’ ç¬¬ 3 æ¬¡åŸ·è¡Œ â†’ run_id: 987654323 (å…¨åŸŸå”¯ä¸€)
                       â””â”€ æ¯æ¬¡éƒ½ç”¢ç”Ÿæ–°çš„å”¯ä¸€ ID
```

**å…¨åŸŸå”¯ä¸€çš„é‡è¦æ€§ï¼š**

```python
# ç‚ºä»€éº¼éœ€è¦å…¨åŸŸå”¯ä¸€çš„ run_idï¼Ÿ

# æƒ…å¢ƒ 1ï¼šå¤šå€‹ Job åŒæ™‚åŸ·è¡Œ
job_a_run = w.jobs.run_now(job_id=111)  # run_id: 1001
job_b_run = w.jobs.run_now(job_id=222)  # run_id: 1002
job_c_run = w.jobs.run_now(job_id=333)  # run_id: 1003

# å¯ä»¥ç²¾ç¢ºè¿½è¹¤æ¯ä¸€æ¬¡åŸ·è¡Œï¼Œä¸æœƒæ··æ·†
status_a = w.jobs.get_run(run_id=1001)
status_b = w.jobs.get_run(run_id=1002)

# æƒ…å¢ƒ 2ï¼šåŒä¸€å€‹ Job å¤šæ¬¡åŸ·è¡Œ
for i in range(5):
    run = w.jobs.run_now(job_id=123456789)
    print(f"åŸ·è¡Œ {i+1}: run_id = {run.run_id}")
    # æ¯æ¬¡éƒ½æœ‰ä¸åŒçš„ run_idï¼š
    # åŸ·è¡Œ 1: run_id = 2001
    # åŸ·è¡Œ 2: run_id = 2002
    # åŸ·è¡Œ 3: run_id = 2003
    # åŸ·è¡Œ 4: run_id = 2004
    # åŸ·è¡Œ 5: run_id = 2005

# æƒ…å¢ƒ 3ï¼šå¤±æ•—é‡è©¦è¿½è¹¤
initial_run = w.jobs.run_now(job_id=123456789)
if initial_run.state.result_state == "FAILED":
    retry_run = w.jobs.run_now(job_id=123456789)
    # initial_run.run_id â‰  retry_run.run_id
    # å¯ä»¥åˆ†åˆ¥æŸ¥çœ‹å¤±æ•—å’Œé‡è©¦çš„æ—¥èªŒ
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … A - "The job_id and number of times the job has been run are concatenated and returned"

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

âŒ **æŠ€è¡“ä¸Šä¸æ­£ç¢º** - `run_id` ä¸æ˜¯ `job_id` çš„çµ„åˆæˆ–è¡ç”Ÿ
- `run_id` æ˜¯ **ç¨ç«‹çš„è­˜åˆ¥ç³»çµ±**ï¼Œä¸æ˜¯å¾ `job_id` ä¸²æ¥è€Œä¾†
- å³ä½¿ `job_id = 123` åŸ·è¡Œç¬¬ 5 æ¬¡ï¼Œ`run_id` ä¹Ÿä¸æœƒæ˜¯ `1235` é€™ç¨®æ ¼å¼

âŒ **é™·é˜±è¨­è¨ˆ** - èª¤å°ã€Œçµ„åˆé—œä¿‚ã€
- è®“ä½ ä»¥ç‚º `run_id` èˆ‡ `job_id` æœ‰ç›´æ¥çš„æ•¸å­¸é—œä¿‚
- å¯¦éš›ä¸Šå®ƒå€‘æ˜¯å®Œå…¨ç¨ç«‹çš„å…©å€‹è­˜åˆ¥ç³»çµ±

**å°æ¯”èªªæ˜ï¼š**

```python
# éŒ¯èª¤ç†è§£ï¼ˆé¸é … A çš„é‚è¼¯ï¼‰ï¼š
job_id = 123
åŸ·è¡Œç¬¬ 5 æ¬¡ â†’ run_id = "123" + "5" = 1235ï¼Ÿ  # âŒ éŒ¯èª¤ï¼

# æ­£ç¢ºç†è§£ï¼ˆé¸é … E çš„é‚è¼¯ï¼‰ï¼š
job_id = 123
åŸ·è¡Œç¬¬ 5 æ¬¡ â†’ run_id = 987654325  # âœ… å…¨åŸŸå”¯ä¸€ï¼Œèˆ‡ job_id ç„¡é—œ
```

---

### é¸é … B - "The total number of jobs that have been run in the workspace"

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

âŒ **èªç¾©éŒ¯èª¤** - `run_id` ä¸æ˜¯ã€Œç¸½åŸ·è¡Œæ¬¡æ•¸ã€çš„è¨ˆæ•¸å™¨
- `run_id` è¿½è¹¤çš„æ˜¯ **ç‰¹å®šåŸ·è¡Œå¯¦ä¾‹**ï¼Œä¸æ˜¯ç¸½æ•¸çµ±è¨ˆ
- Workspace çš„æ‰€æœ‰ Job åŸ·è¡Œç¸½æ•¸æ˜¯ä¸€å€‹çµ±è¨ˆæ•¸å­—ï¼Œä¸æœƒä½œç‚º `run_id` è¿”å›

âŒ **é™·é˜±è¨­è¨ˆ** - æ··æ·†ã€Œè­˜åˆ¥ç¢¼ã€èˆ‡ã€Œè¨ˆæ•¸å™¨ã€
- `run_id` æ˜¯ **å”¯ä¸€è­˜åˆ¥ç¢¼**ï¼ˆUnique Identifierï¼‰
- ä¸æ˜¯ **åºè™Ÿè¨ˆæ•¸å™¨**ï¼ˆSequential Counterï¼‰

**å°æ¯”èªªæ˜ï¼š**

```python
# éŒ¯èª¤ç†è§£ï¼ˆé¸é … B çš„é‚è¼¯ï¼‰ï¼š
Workspace ç¸½å…±åŸ·è¡Œé 500 æ¬¡ Job
â†’ ä¸‹æ¬¡åŸ·è¡Œè¿”å› run_id = 501ï¼Ÿ  # âŒ é€™æ˜¯è¨ˆæ•¸å™¨ï¼Œä¸æ˜¯ run_id

# æ­£ç¢ºç†è§£ï¼ˆé¸é … E çš„é‚è¼¯ï¼‰ï¼š
Workspace ç¸½å…±åŸ·è¡Œé 500 æ¬¡ Job
â†’ ä¸‹æ¬¡åŸ·è¡Œè¿”å› run_id = 987654326  # âœ… å…¨åŸŸå”¯ä¸€ IDï¼Œä¸æ˜¯åºè™Ÿ
```

**å¯¦éš›ç¯„ä¾‹ï¼š**

```python
# æƒ…å¢ƒï¼šWorkspace ä¸­æœ‰å¤šå€‹ Job
Job A åŸ·è¡Œç¬¬ 10 æ¬¡ â†’ run_id: 1234567890 (å…¨åŸŸå”¯ä¸€)
Job B åŸ·è¡Œç¬¬ 5 æ¬¡  â†’ run_id: 1234567891 (å…¨åŸŸå”¯ä¸€)
Job C åŸ·è¡Œç¬¬ 1 æ¬¡  â†’ run_id: 1234567892 (å…¨åŸŸå”¯ä¸€)

# run_id ä¸æ˜¯ã€Œç¸½åŸ·è¡Œæ¬¡æ•¸ã€(10+5+1=16)
# è€Œæ˜¯æ¯æ¬¡åŸ·è¡Œçš„å…¨åŸŸå”¯ä¸€è­˜åˆ¥ç¢¼
```

---

### é¸é … C - "The number of times the job definition has been run in this workspace"

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

âŒ **èªç¾©æ¥è¿‘ä½†ä»éŒ¯èª¤** - `run_id` ä¸æ˜¯ã€ŒåŸ·è¡Œæ¬¡æ•¸ã€
- API å›æ‡‰ä¸­ç¢ºå¯¦æœ‰ `number_in_job` æ¬„ä½ä»£è¡¨ã€Œé€™å€‹ Job çš„åŸ·è¡Œæ¬¡æ•¸ã€
- ä½† `run_id` æœ¬èº«æ˜¯ **å…¨åŸŸå”¯ä¸€è­˜åˆ¥ç¢¼**ï¼Œä¸æ˜¯æ¬¡æ•¸è¨ˆæ•¸

âŒ **é™·é˜±è¨­è¨ˆ** - æœ€å¤§çš„è¿·æƒ‘é¸é …
- æ··æ·† `run_id` å’Œ `number_in_job` å…©å€‹æ¬„ä½
- è®“ä½ èªç‚º `run_id` å°±æ˜¯åŸ·è¡Œåºè™Ÿ

**å°æ¯”èªªæ˜ï¼š**

```bash
# CLI å›æ‡‰çš„å®Œæ•´çµæ§‹ï¼š
databricks jobs run-now --job-id 123456789

{
  "run_id": 987654321,        # â† å…¨åŸŸå”¯ä¸€ IDï¼ˆé¸é … E æ­£ç¢ºï¼‰
  "number_in_job": 42         # â† é€™å€‹ Job çš„åŸ·è¡Œæ¬¡æ•¸ï¼ˆé¸é … C æè¿°çš„æ¬„ä½ï¼‰
}
```

**æ­£ç¢ºå€åˆ†å…©å€‹æ¬„ä½ï¼š**

| æ¬„ä½ | ç”¨é€” | ç¯„ä¾‹ | èªªæ˜ |
|------|------|------|------|
| `run_id` | å…¨åŸŸå”¯ä¸€è­˜åˆ¥ç¢¼ | `987654321` | âœ… é¸é … E æ­£ç¢º<br>è¿½è¹¤ç‰¹å®šåŸ·è¡Œå¯¦ä¾‹ |
| `number_in_job` | Job çš„åŸ·è¡Œåºè™Ÿ | `42` | é¸é … C æè¿°çš„æ˜¯é€™å€‹æ¬„ä½<br>ä»£è¡¨é€™æ˜¯ç¬¬ 42 æ¬¡åŸ·è¡Œ |

**å¯¦éš›ç¯„ä¾‹ï¼š**

```python
# åŒä¸€å€‹ Job å¤šæ¬¡åŸ·è¡Œ
job_id = 123456789

# ç¬¬ 1 æ¬¡åŸ·è¡Œ
run1 = w.jobs.run_now(job_id=job_id)
print(f"run_id: {run1.run_id}")           # 987654321 (å…¨åŸŸå”¯ä¸€)
print(f"number_in_job: {run1.number_in_job}")  # 1 (ç¬¬ 1 æ¬¡åŸ·è¡Œ)

# ç¬¬ 2 æ¬¡åŸ·è¡Œ
run2 = w.jobs.run_now(job_id=job_id)
print(f"run_id: {run2.run_id}")           # 987654322 (å…¨åŸŸå”¯ä¸€ï¼Œä¸åŒ)
print(f"number_in_job: {run2.number_in_job}")  # 2 (ç¬¬ 2 æ¬¡åŸ·è¡Œ)

# run_id æ˜¯å…¨åŸŸå”¯ä¸€ IDï¼ˆé¸é … Eï¼‰âœ…
# number_in_job æ˜¯åŸ·è¡Œæ¬¡æ•¸ï¼ˆé¸é … C æè¿°çš„æ¬„ä½ï¼Œä½†ä¸æ˜¯ run_idï¼‰âŒ
```

---

### é¸é … D - "The job_id is returned in this field"

**ç‚ºä»€éº¼éŒ¯èª¤ï¼Ÿ**

âŒ **å®Œå…¨éŒ¯èª¤** - `run_id` å’Œ `job_id` æ˜¯å…©å€‹ä¸åŒçš„æ¬„ä½
- `job_id` æ˜¯ **è¼¸å…¥åƒæ•¸**ï¼ˆä½ å‚³å…¥çš„ Job å®šç¾© IDï¼‰
- `run_id` æ˜¯ **è¼¸å‡ºçµæœ**ï¼ˆæ–°ç”¢ç”Ÿçš„åŸ·è¡Œ IDï¼‰
- å®ƒå€‘çš„å€¼å®Œå…¨ä¸åŒ

âŒ **é™·é˜±è¨­è¨ˆ** - æ··æ·†ã€Œè¼¸å…¥ã€èˆ‡ã€Œè¼¸å‡ºã€
- è®“ä½ ä»¥ç‚º API åªæ˜¯ã€Œå›å‚³ä½ å‚³å…¥çš„å€¼ã€
- å¯¦éš›ä¸Š `run_id` æ˜¯æ–°ç”¢ç”Ÿçš„å”¯ä¸€è­˜åˆ¥ç¢¼

**å°æ¯”èªªæ˜ï¼š**

```python
# éŒ¯èª¤ç†è§£ï¼ˆé¸é … D çš„é‚è¼¯ï¼‰ï¼š
job_id = 123456789
run = w.jobs.run_now(job_id=job_id)
run.run_id == job_idï¼Ÿ  # âŒ éŒ¯èª¤ï¼å®ƒå€‘æ˜¯ä¸åŒçš„å€¼

# æ­£ç¢ºç†è§£ï¼ˆé¸é … E çš„é‚è¼¯ï¼‰ï¼š
job_id = 123456789          # è¼¸å…¥ï¼šJob å®šç¾© ID
run = w.jobs.run_now(job_id=job_id)
run.run_id = 987654321      # è¼¸å‡ºï¼šæ–°ç”¢ç”Ÿçš„åŸ·è¡Œ IDï¼ˆå…¨åŸŸå”¯ä¸€ï¼‰
run.run_id != job_id        # âœ… å®ƒå€‘æ˜¯ä¸åŒçš„è­˜åˆ¥ç¢¼
```

**å¯¦éš› API å›æ‡‰ï¼š**

```bash
# è«‹æ±‚ï¼ˆå‚³å…¥ job_idï¼‰
databricks jobs run-now --job-id 123456789

# å›æ‡‰ï¼ˆè¿”å› run_idï¼Œèˆ‡ job_id ä¸åŒï¼‰
{
  "run_id": 987654321,      # â† æ–°ç”¢ç”Ÿçš„åŸ·è¡Œ IDï¼ˆä¸æ˜¯ job_idï¼‰
  "number_in_job": 42
}
```

---

## ğŸ§  è¨˜æ†¶æ³•

### å£è¨£è¨˜æ†¶

**ã€ŒJob æ˜¯è—åœ–ï¼ŒRun æ˜¯å»ºç¯‰ç‰©ã€**

- ğŸ“ **Job (`job_id`)** = å»ºç¯‰è—åœ–ï¼ˆæ°¸ä¹…ä¸è®Šï¼Œå®šç¾©å¦‚ä½•å»ºé€ ï¼‰
- ğŸ¢ **Run (`run_id`)** = å»ºé€ çš„å»ºç¯‰ç‰©ï¼ˆæ¯æ¬¡å»ºé€ éƒ½æœ‰å”¯ä¸€åœ°å€ï¼‰

**ã€ŒRun ID æ˜¯èº«åˆ†è­‰ï¼ŒJob ID æ˜¯å§“æ°ã€**

- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **Job ID** = å®¶æ—å§“æ°ï¼ˆåŒä¸€å€‹ Job çš„æ‰€æœ‰åŸ·è¡Œå…±ç”¨ï¼‰
- ğŸªª **Run ID** = èº«åˆ†è­‰è™Ÿç¢¼ï¼ˆæ¯å€‹äºº/æ¯æ¬¡åŸ·è¡Œéƒ½å”¯ä¸€ï¼‰

### æ¦‚å¿µå°æ¯”è¡¨

| å°æ¯”é … | `job_id` | `run_id` |
|--------|----------|----------|
| **ç”¢ç”Ÿæ™‚æ©Ÿ** | å»ºç«‹ Job æ™‚ | æ¯æ¬¡åŸ·è¡Œæ™‚ |
| **å”¯ä¸€æ€§** | Workspace å…§å”¯ä¸€ | **å…¨åŸŸå”¯ä¸€** |
| **ç”Ÿå‘½é€±æœŸ** | æ°¸ä¹…ï¼ˆç›´åˆ° Job è¢«åˆªé™¤ï¼‰ | èˆ‡åŸ·è¡Œç¶å®š |
| **æ•¸é‡é—œä¿‚** | 1 å€‹ Job = 1 å€‹ `job_id` | 1 å€‹ Job = å¤šå€‹ `run_id` |
| **ç”¨é€”** | è­˜åˆ¥ Job **å®šç¾©** | è­˜åˆ¥ Job **åŸ·è¡Œå¯¦ä¾‹** |
| **CLI æ“ä½œ** | `--job-id` (è¼¸å…¥åƒæ•¸) | `--run-id` (æŸ¥è©¢/å–æ¶ˆåŸ·è¡Œ) |
| **ç¯„ä¾‹å€¼** | `123456789` | `987654321` |

### å¯¦å‹™è¨˜æ†¶é»

**1. é—œéµå­—è¯æƒ³ï¼š**
- **Job** = Definitionï¼ˆå®šç¾©ï¼‰ â†’ è—åœ–ã€æ¨¡æ¿ã€é¡åˆ¥
- **Run** = Instanceï¼ˆå¯¦ä¾‹ï¼‰ â†’ åŸ·è¡Œã€ç‰©ä»¶ã€ç‰¹å®šå»ºç¯‰

**2. æ“ä½œè¨˜æ†¶ï¼š**
```bash
# è§¸ç™¼åŸ·è¡Œï¼šå‚³å…¥ job_idï¼Œå–å¾— run_id
databricks jobs run-now --job-id 123
â†’ è¿”å› run_id: 987

# æŸ¥è©¢åŸ·è¡Œï¼šä½¿ç”¨ run_id
databricks runs get --run-id 987

# å–æ¶ˆåŸ·è¡Œï¼šä½¿ç”¨ run_id
databricks runs cancel --run-id 987
```

**3. éŒ¯èª¤é¸é …å¿«é€Ÿæ’é™¤ï¼š**
- âŒ A: `run_id` ä¸æ˜¯ä¸²æ¥ï¼ˆä¸æ˜¯æ•¸å­¸çµ„åˆï¼‰
- âŒ B: `run_id` ä¸æ˜¯ç¸½æ•¸ï¼ˆä¸æ˜¯è¨ˆæ•¸å™¨ï¼‰
- âŒ C: `run_id` ä¸æ˜¯æ¬¡æ•¸ï¼ˆé€™æ˜¯ `number_in_job`ï¼‰
- âŒ D: `run_id` ä¸æ˜¯ `job_id`ï¼ˆå®ƒå€‘æ˜¯ä¸åŒæ¬„ä½ï¼‰
- âœ… E: `run_id` æ˜¯å…¨åŸŸå”¯ä¸€ IDï¼ˆæ¯æ¬¡åŸ·è¡Œéƒ½ä¸åŒï¼‰

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶èˆ‡åƒè€ƒè³‡æº

### å®˜æ–¹æ–‡ä»¶é€£çµ

1. **Databricks Jobs API - Run Now:**
   - [Jobs API 2.1 Reference](https://docs.databricks.com/api/workspace/jobs/runnow)
   - èªªæ˜ `run_id` çš„å®šç¾©èˆ‡ç”¨é€”

2. **Databricks CLI - Jobs Commands:**
   - [Databricks CLI Jobs Reference](https://docs.databricks.com/dev-tools/cli/jobs-cli.html)
   - CLI æ“ä½œçš„å®Œæ•´ç¯„ä¾‹

3. **Runs API Reference:**
   - [Runs API Documentation](https://docs.databricks.com/api/workspace/jobs/getruns)
   - ä½¿ç”¨ `run_id` æŸ¥è©¢åŸ·è¡Œç‹€æ…‹çš„æ–¹æ³•

### å»¶ä¼¸å­¸ç¿’è³‡æº

- **Job ç”Ÿå‘½é€±æœŸç®¡ç†ï¼š** ç†è§£ Job èˆ‡ Run çš„é—œä¿‚
- **ç›£æ§èˆ‡æ—¥èªŒï¼š** ä½¿ç”¨ `run_id` è¿½è¹¤åŸ·è¡Œæ­·å²
- **éŒ¯èª¤è™•ç†ï¼š** ä½¿ç”¨ `run_id` æŸ¥çœ‹å¤±æ•—åŸå› èˆ‡é‡è©¦

---

## ğŸ’¡ è£œå……èªªæ˜

### å¯¦å‹™æ‡‰ç”¨å ´æ™¯

**1. CI/CD Pipeline æ•´åˆï¼š**

```python
# åœ¨ CI/CD ä¸­è§¸ç™¼ Job ä¸¦ç­‰å¾…å®Œæˆ
def deploy_and_wait(job_id):
    # è§¸ç™¼åŸ·è¡Œ
    run = w.jobs.run_now(job_id=job_id)
    run_id = run.run_id  # å–å¾—å…¨åŸŸå”¯ä¸€çš„ run_id
    
    # ä½¿ç”¨ run_id è¼ªè©¢ç‹€æ…‹
    while True:
        status = w.jobs.get_run(run_id=run_id)
        if status.state.life_cycle_state in ["TERMINATED", "SKIPPED"]:
            break
        time.sleep(10)
    
    # æ ¹æ“šçµæœæ±ºå®š CI/CD æµç¨‹
    if status.state.result_state == "SUCCESS":
        print(f"éƒ¨ç½²æˆåŠŸ (Run ID: {run_id})")
        return True
    else:
        print(f"éƒ¨ç½²å¤±æ•— (Run ID: {run_id})")
        return False
```

**2. éŒ¯èª¤è¿½è¹¤èˆ‡é‡è©¦ï¼š**

```python
# è¨˜éŒ„å¤±æ•—çš„ run_id ä¸¦é‡è©¦
failed_runs = []

for i in range(3):  # æœ€å¤šé‡è©¦ 3 æ¬¡
    run = w.jobs.run_now(job_id=job_id)
    run_id = run.run_id
    
    status = wait_for_completion(run_id)
    if status.result_state == "FAILED":
        failed_runs.append(run_id)
        print(f"åŸ·è¡Œå¤±æ•—ï¼ŒRun ID: {run_id}")
    else:
        print(f"åŸ·è¡ŒæˆåŠŸï¼ŒRun ID: {run_id}")
        break

# ä½¿ç”¨ run_id æŸ¥çœ‹æ¯æ¬¡å¤±æ•—çš„æ—¥èªŒ
for run_id in failed_runs:
    logs = w.jobs.get_run_output(run_id=run_id)
    print(f"Run ID {run_id} çš„éŒ¯èª¤æ—¥èªŒï¼š{logs}")
```

**3. ä¸¦è¡ŒåŸ·è¡Œç®¡ç†ï¼š**

```python
# åŒæ™‚åŸ·è¡Œå¤šå€‹ Job ä¸¦è¿½è¹¤
run_ids = []

# å•Ÿå‹•å¤šå€‹ Job
for job_id in [111, 222, 333, 444, 555]:
    run = w.jobs.run_now(job_id=job_id)
    run_ids.append(run.run_id)
    print(f"Job {job_id} åŸ·è¡Œä¸­ï¼ŒRun ID: {run.run_id}")

# ä½¿ç”¨å„è‡ªçš„ run_id è¿½è¹¤ç‹€æ…‹
for run_id in run_ids:
    status = w.jobs.get_run(run_id=run_id)
    print(f"Run ID {run_id}: {status.state.life_cycle_state}")
```

---

## ğŸ¯ è€ƒè©¦æŠ€å·§

### å¿«é€Ÿåˆ¤æ–·æ³•

**çœ‹åˆ° `run_id` ç›¸é—œé¡Œç›®ï¼Œç«‹å³è¯æƒ³ï¼š**

1. âœ… **å”¯ä¸€æ€§** - æ¯æ¬¡åŸ·è¡Œéƒ½æœ‰æ–°çš„ `run_id`
2. âœ… **å…¨åŸŸæ€§** - Workspace å…§å…¨åŸŸå”¯ä¸€
3. âœ… **è¿½è¹¤æ€§** - ç”¨æ–¼æŸ¥è©¢ã€å–æ¶ˆã€æŸ¥çœ‹æ—¥èªŒ
4. âŒ **ä¸æ˜¯çµ„åˆ** - èˆ‡ `job_id` ç„¡æ•¸å­¸é—œä¿‚
5. âŒ **ä¸æ˜¯è¨ˆæ•¸** - ä¸ä»£è¡¨åŸ·è¡Œæ¬¡æ•¸æˆ–ç¸½æ•¸

### é™·é˜±è­˜åˆ¥

**æœ¬é¡Œçš„é™·é˜±è¨­è¨ˆï¼š**

- **é¸é … A** - èª˜å°ã€Œçµ„åˆé—œä¿‚ã€ï¼ˆæŠ€è¡“æ€§éŒ¯èª¤ï¼‰
- **é¸é … B** - æ··æ·†ã€Œè­˜åˆ¥ç¢¼ã€èˆ‡ã€Œè¨ˆæ•¸å™¨ã€ï¼ˆæ¦‚å¿µæ€§éŒ¯èª¤ï¼‰
- **é¸é … C** - æ··æ·† `run_id` èˆ‡ `number_in_job`ï¼ˆæœ€å¤§è¿·æƒ‘ï¼‰
- **é¸é … D** - æ··æ·†ã€Œè¼¸å…¥ã€èˆ‡ã€Œè¼¸å‡ºã€ï¼ˆèªç¾©éŒ¯èª¤ï¼‰
- **é¸é … E** - âœ… æ­£ç¢ºæè¿° `run_id` çš„æœ¬è³ª

**é¿å…é™·é˜±çš„é—œéµï¼š**
- ç†è§£ `job_id`ï¼ˆå®šç¾©ï¼‰vs `run_id`ï¼ˆå¯¦ä¾‹ï¼‰çš„æœ¬è³ªå·®ç•°
- å€åˆ† API å›æ‡‰ä¸­çš„ä¸åŒæ¬„ä½ï¼ˆ`run_id` vs `number_in_job`ï¼‰
- è¨˜ä½ `run_id` çš„æ ¸å¿ƒç‰¹æ€§ï¼š**å…¨åŸŸå”¯ä¸€**

---

**[è¿”å›é¡Œç›®](#question-104)**