# Question #102

---

## 題目資訊

### 題目編號
**ID:** `Q-102`

### 來源
**來源:** Mock Exam / Community Contributed

### 難度等級
**難度:** `L1-Basic`

---

## 題目內容

### 題幹

What is the first line of a Databricks Python notebook when viewed in a text editor?

### 選項

- **A.** `%python`
- **B.** `// Databricks notebook source`
- **C.** `# Databricks notebook source`
- **D.** `- Databricks notebook source`
- **E.** `# MAGIC %python`

---

## 標籤系統

### Topic Tags (技術主題標籤)
**Topics:** `Notebooks`, `Development-Tools`

### Trap Tags (陷阱類型標籤)
**Traps:** `Syntax-Confusion`, `Comment-Style`

### Knowledge Domain (知識領域)
**Domain:** Data Engineering / Development Workflow

---

## 答案與來源

### 正確答案
**正解:** `C`

### 答案來源
- **來源標註答案:** B（⚠️ 錯誤標註）
- **社群投票答案:** C (100%)

---

# 題目解析

---

## 題目回顧

### 題目編號與連結
**題目 ID:** `Q-102`
**題目連結:** [點此返回題目](#question-102)

### 正確答案
**正解:** `C`

---

## 📍 考點識別

### 主要考點
**核心技術:** Databricks Notebook File Format & Source Code Annotation
**知識領域:** Development Tools / Notebook Management
**關鍵概念:**
- Databricks Notebook 的底層檔案格式
- Python 與其他語言的註解語法差異
- Notebook metadata 標記

### 次要考點
- Databricks Repos 與版本控制整合
- Notebook 匯出格式

---

## ✅ 正解說明

### 為什麼 C 是正確的？

**技術原理:**

**1. Databricks Notebook 的底層格式：**

當你在文字編輯器（如 VS Code、vim）中開啟 Databricks Python notebook 時，檔案實際上是 **純文字格式**，第一行包含特殊標記：

```python
# Databricks notebook source
```

這個標記的作用：
- 🏷️ **識別 Notebook 類型** - 告訴 Databricks 這是一個 notebook 檔案
- 🔧 **語法符合 Python** - 使用 Python 註解符號 `#`，不會影響程式碼執行
- 🌳 **版本控制友善** - Git 等工具可正確處理為 Python 原始碼

**2. 為什麼使用 `#`（Python 註解）？**

對於 **Python notebook**：
- Python 的註解符號是 `#`
- `# Databricks notebook source` 被 Python 解譯器視為註解，不會執行
- 確保檔案可以直接作為 `.py` 檔案執行（向下相容）

**3. 不同語言的 Notebook 第一行：**

Databricks Notebook 的第一行會根據 **預設語言** 使用對應的註解符號：

| Notebook 語言 | 第一行內容 | 註解符號 |
|-------------|-----------|---------|
| **Python** | `# Databricks notebook source` | `#` |
| **Scala** | `// Databricks notebook source` | `//` |
| **SQL** | `-- Databricks notebook source` | `--` |
| **R** | `# Databricks notebook source` | `#` |

**符合需求:**

題目明確問的是 **Python notebook**，因此答案必須使用 **Python 的註解語法 `#`**。

**實務範例:**

當你使用 Databricks Repos 或匯出 notebook 為原始碼時：

```python
# Databricks notebook source

# COMMAND ----------

# 這是第一個 cell
print("Hello, Databricks!")

# COMMAND ----------

# 這是第二個 cell
df = spark.read.csv("/path/to/data.csv")
display(df)
```

**檔案結構說明：**
- **第 1 行**: `# Databricks notebook source` - Notebook 標記
- **後續**: `# COMMAND ----------` - Cell 分隔符
- **程式碼**: 正常的 Python 程式碼

**在 Git 中的體驗：**

```bash
# 使用 Databricks Repos 同步到 Git
git clone https://github.com/yourrepo/databricks-project.git

# 檢視 Python notebook
cat notebooks/my_notebook.py
# 輸出：
# # Databricks notebook source
# 
# # COMMAND ----------
# 
# print("Hello")
```

---

## ❌ 錯誤選項排除

### 選項 A - "%python"

**錯誤原因:** 這是 Cell Magic，不是檔案第一行

**詳細分析:**
- `%python` 是 **cell-level magic command**，用於在 notebook 內 **切換語言**
- 用於單個 cell 中執行 Python 程式碼（如在 SQL notebook 中執行 Python）
- **不會出現** 在檔案第一行

**使用情境：**
```sql
-- 這是一個 SQL notebook
SELECT * FROM table;

-- 下面這個 cell 使用 Python
%python
df = spark.table("table")
print(df.count())
```

**易混淆點:**
可能誤以為 `%python` 宣告 notebook 語言，但實際上 notebook 語言在建立時就已決定。

---

### 選項 B - "// Databricks notebook source"

**錯誤原因:** 這是 Scala notebook 的第一行，不是 Python

**詳細分析:**
- `//` 是 **Scala/Java/C++ 的註解符號**
- 如果 Python notebook 使用 `//`，會導致 **語法錯誤**：
  ```python
  // Databricks notebook source  ← SyntaxError: invalid syntax
  ```
- 這是 **Scala notebook** 的正確第一行

**為什麼來源標註錯誤？**
- 可能出題者混淆了不同語言的 notebook 格式
- 社群 100% 投票 C 證實了這個錯誤

**易混淆點:**
如果不熟悉不同語言的註解語法，可能誤選此項。

---

### 選項 D - "- Databricks notebook source"

**錯誤原因:** `-` 不是任何程式語言的標準註解符號

**詳細分析:**
- `-` 在程式語言中通常是 **減號運算子**
- 在 Markdown 中是 **列表項目符號**，但 Databricks notebook 不使用 Markdown 作為主要格式
- 這個選項是完全杜撰的

**易混淆點:**
可能聯想到 YAML 或 Markdown，但這些不是 notebook 的底層格式。

---

### 選項 E - "# MAGIC %python"

**錯誤原因:** 這是用於在 Python cell 中執行 magic command 的語法，不是第一行

**詳細分析:**
- `# MAGIC` 是 Databricks notebook 的特殊語法，用於在 **Python cell 中執行 magic command**
- 使用情境：
  ```python
  # MAGIC %md
  # MAGIC # 這是 Markdown 標題
  # MAGIC 這是 Markdown 內容
  ```
- `# MAGIC %python` 在邏輯上沒有意義（Python cell 中不需要聲明 Python）
- **不會出現** 在檔案第一行

**易混淆點:**
`# MAGIC` 是 Databricks 特有語法，容易與檔案標記混淆。

---

## 🧠 記憶法與對比

### 記憶口訣
**「Python 井號 Scala 雙斜，SQL 雙橫 notebook source」**
- **Python 井號**: `#` Databricks notebook source
- **Scala 雙斜**: `//` Databricks notebook source
- **SQL 雙橫**: `--` Databricks notebook source

### 關鍵對比表

| Notebook 語言 | 第一行 | 註解符號 | 範例 |
|-------------|-------|---------|------|
| **Python** | `# Databricks notebook source` | `#` | `# 這是註解` |
| **Scala** | `// Databricks notebook source` | `//` | `// 這是註解` |
| **SQL** | `-- Databricks notebook source` | `--` | `-- 這是註解` |
| **R** | `# Databricks notebook source` | `#` | `# 這是註解` |

### Notebook 檔案結構

```python
# Databricks notebook source          ← 第一行：識別 Notebook
                                       ← 空行
# COMMAND ----------                  ← Cell 分隔符

# Cell 1: 匯入套件
import pandas as pd
from pyspark.sql import functions as F

# COMMAND ----------

# Cell 2: 讀取資料
df = spark.read.table("my_table")

# COMMAND ----------

# MAGIC %md                           ← 執行 Markdown magic
# MAGIC # 這是標題
# MAGIC 這是 Markdown 內容
```

### Magic Command 對比

| 語法 | 用途 | 出現位置 |
|------|------|---------|
| `%python` | 切換到 Python 語言 | Cell 內部（非 Python notebook） |
| `%sql` | 執行 SQL 查詢 | Cell 內部 |
| `%md` | 渲染 Markdown | Cell 內部 |
| `# MAGIC %md` | 在 Python cell 中執行 Markdown | Cell 內部（Python code） |
| `# Databricks notebook source` | **Notebook 識別標記** | **檔案第一行** |

---

## 📚 延伸學習

### 官方文件
- [Databricks Notebooks](https://docs.databricks.com/notebooks/index.html)
- [Databricks Repos](https://docs.databricks.com/repos/index.html)
- [Notebook File Format](https://docs.databricks.com/notebooks/notebook-formats.html)

### 相關題目
- Q-XXX: Databricks Repos 的版本控制整合
- Q-XXX: Notebook Magic Commands 的使用
- Q-XXX: Notebook 匯出與匯入格式

---

## 🎯 重點提醒

> **核心觀念:** Databricks Python notebook 的第一行是 `# Databricks notebook source`，使用 Python 註解符號 `#`。不同語言的 notebook 使用該語言對應的註解符號（Scala 用 `//`，SQL 用 `--`）。

**考試陷阱:**
- ❌ 選項 B（`//`）是 Scala 語法，不是 Python
- ❌ 選項 A（`%python`）是 magic command，不是檔案第一行
- ❌ 選項 E（`# MAGIC %python`）是執行 magic 的語法，不是標記

**正確思維:**
- ✅ Notebook 第一行 = 識別標記（`# Databricks notebook source`）
- ✅ Python 註解 = `#`（不是 `//`）
- ✅ 不同語言使用不同註解符號

**實務驗證:**
```bash
# 在 Databricks Repos 中檢視 Python notebook
cat your_notebook.py | head -1
# 輸出: # Databricks notebook source
```