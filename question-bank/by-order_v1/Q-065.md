# Question #65

---

## é¡Œç›®è³‡è¨Š

### é¡Œç›®ç·¨è™Ÿ
**ID:** `Q-065`

### ä¾†æº
**ä¾†æº:** Real Exam Recall

### é›£åº¦ç­‰ç´š
**é›£åº¦:** `L2-Intermediate`

---

## é¡Œç›®å…§å®¹

### é¡Œå¹¹

Two of the most common data locations on Databricks are the DBFS root storage and external object storage mounted with dbutils.fs.mount().

Which of the following statements is correct?

### é¸é …

- **A.** DBFS is a file system protocol that allows users to interact with files stored in object storage using syntax and guarantees similar to Unix file systems.
- **B.** By default, both the DBFS root and mounted data sources are only accessible to workspace administrators.
- **C.** The DBFS root is the most secure location to store data, because mounted storage volumes must have full public read and write permissions.
- **D.** Neither the DBFS root nor mounted storage can be accessed when using %sh in a Databricks notebook.
- **E.** The DBFS root stores files in ephemeral block volumes attached to the driver, while mounted directories will always persist saved data to external storage between sessions.

---

## æ¨™ç±¤ç³»çµ±

### Topic Tags (æŠ€è¡“ä¸»é¡Œæ¨™ç±¤)
**Topics:** `DBFS`, `Mounted-Storage`, `File-Systems`, `Storage-Architecture`

### Trap Tags (é™·é˜±é¡å‹æ¨™ç±¤)
**Traps:** `DBFS-Characteristics`, `Storage-Persistence`

### Knowledge Domain (çŸ¥è­˜é ˜åŸŸ)
**Domain:** `Databricks Platform`

---

## ç­”æ¡ˆèˆ‡è§£æé€£çµ

### æ­£ç¢ºç­”æ¡ˆ
**æ­£è§£:** `A`

---

## ğŸ“ è€ƒé»è­˜åˆ¥

### ä¸»è¦è€ƒé»
**æ ¸å¿ƒæŠ€è¡“:** DBFSï¼ˆDatabricks File Systemï¼‰çš„æ¶æ§‹ç‰¹æ€§
**çŸ¥è­˜é ˜åŸŸ:** Databricks å¹³å°æ¶æ§‹èˆ‡å„²å­˜ç³»çµ±
**é—œéµæ¦‚å¿µ:** DBFS è¨­è¨ˆåŸç†ã€File System Protocolã€Unix-like èªæ³•

### æ¬¡è¦è€ƒé»
- DBFS èˆ‡å¤–éƒ¨å„²å­˜çš„æ•´åˆæ–¹å¼
- Mounted storage çš„å­˜å–æ§åˆ¶
- ä¸åŒå„²å­˜æ–¹æ¡ˆçš„æŒä¹…æ€§ç‰¹æ€§

---

## âœ… æ­£è§£èªªæ˜

### ç‚ºä»€éº¼ A æ˜¯æ­£ç¢ºçš„ï¼Ÿ

**æŠ€è¡“åŸç†:**
DBFS æ˜¯ä¸€å€‹**æª”æ¡ˆç³»çµ±å”å®šå±¤**ï¼Œå®ƒæä¾›äº†çµ±ä¸€çš„ä»‹é¢ä¾†å­˜å–åº•å±¤çš„ç‰©ä»¶å„²å­˜ï¼ˆå¦‚ S3ã€Azure Blob Storageã€GCSï¼‰ã€‚DBFS çš„æ ¸å¿ƒè¨­è¨ˆç†å¿µæ˜¯ï¼š
- å°‡ç‰©ä»¶å„²å­˜æŠ½è±¡åŒ–ç‚ºé¡ä¼¼ Unix æª”æ¡ˆç³»çµ±çš„ä»‹é¢
- æä¾›ç†Ÿæ‚‰çš„æª”æ¡ˆæ“ä½œèªæ³•ï¼ˆls, cp, mv ç­‰ï¼‰
- ä¿æŒèˆ‡å‚³çµ±æª”æ¡ˆç³»çµ±ç›¸ä¼¼çš„è¡Œç‚ºä¿è­‰

**ç¬¦åˆéœ€æ±‚:**
é€™å€‹æè¿°æº–ç¢ºåæ˜ äº† DBFS çš„æœ¬è³ªï¼š
- **File System Protocol:** DBFS ä¸æ˜¯å¯¦éš›çš„æª”æ¡ˆç³»çµ±ï¼Œè€Œæ˜¯å”å®šå±¤
- **Object Storage Backend:** åº•å±¤ä»æ˜¯ç‰©ä»¶å„²å­˜
- **Unix-like Syntax:** æä¾› /mnt/path, /FileStore ç­‰è·¯å¾‘çµæ§‹
- **Similar Guarantees:** ç›¡å¯èƒ½æ¨¡æ“¬å‚³çµ±æª”æ¡ˆç³»çµ±çš„è¡Œç‚º

**å¯¦å‹™æ‡‰ç”¨:**
```python
# DBFS æä¾› Unix-like çš„æª”æ¡ˆæ“ä½œ
dbutils.fs.ls("/mnt/data/")           # é¡ä¼¼ ls
dbutils.fs.cp("source", "target")     # é¡ä¼¼ cp
dbutils.fs.rm("/path/to/file")        # é¡ä¼¼ rm

# å¯ä»¥åƒæ“ä½œå‚³çµ±æª”æ¡ˆç³»çµ±ä¸€æ¨£ä½¿ç”¨
spark.read.csv("/mnt/data/file.csv")
```

---

## âŒ éŒ¯èª¤é¸é …æ’é™¤

### é¸é … B - é è¨­åªæœ‰ç®¡ç†å“¡èƒ½å­˜å–

**éŒ¯èª¤åŸå› :** å­˜å–æ§åˆ¶æè¿°ä¸æ­£ç¢º

**è©³ç´°åˆ†æ:**
DBFS å’Œ mounted storage çš„å­˜å–æ¬Šé™ä¸¦éé è¨­é™åˆ¶çµ¦ç®¡ç†å“¡ï¼š
- **DBFS root (/FileStore):** é€šå¸¸æ‰€æœ‰ä½¿ç”¨è€…éƒ½å¯å­˜å–
- **Mounted storage:** æ¬Šé™å–æ±ºæ–¼ mount è¨­å®šå’Œåº•å±¤å„²å­˜çš„æ¬Šé™
- å­˜å–æ§åˆ¶ä¸»è¦é€é Unity Catalogã€IAM roles ç­‰æ©Ÿåˆ¶ç®¡ç†
- ä¸æ˜¯é è¨­çš„ç®¡ç†å“¡é™åˆ¶

**æ˜“æ··æ·†é»:**
å°‡é«˜éšçš„å­˜å–æ§åˆ¶æ”¿ç­–èˆ‡é è¨­è¡Œç‚ºæ··æ·†ã€‚

---

### é¸é … C - DBFS root æœ€å®‰å…¨ï¼Œmounted storage éœ€è¦å…¬é–‹æ¬Šé™

**éŒ¯èª¤åŸå› :** å®‰å…¨æ€§æ¯”è¼ƒå®Œå…¨éŒ¯èª¤

**è©³ç´°åˆ†æ:**
é€™å€‹é™³è¿°åœ¨å¤šå€‹å±¤é¢éƒ½æ˜¯éŒ¯èª¤çš„ï¼š
- **DBFS root ä¸æ˜¯æœ€å®‰å…¨çš„é¸æ“‡:** é€šå¸¸æ˜¯å…±äº«å­˜å–çš„è‡¨æ™‚ä½ç½®
- **Mounted storage ä¸éœ€è¦å…¬é–‹æ¬Šé™:** å¯ä»¥ä½¿ç”¨ IAM rolesã€service principals ç­‰å®‰å…¨æ–¹å¼
- å¯¦éš›ä¸Š mounted external storage é€šå¸¸æ¯” DBFS root æ›´å®‰å…¨
- å¯ä»¥å¯¦ç¾ç´°ç·»çš„æ¬Šé™æ§åˆ¶å’Œå¯©è¨ˆ

**æ˜“æ··æ·†é»:**
èª¤è§£ä¸åŒå„²å­˜é¸é …çš„å®‰å…¨ç‰¹æ€§ã€‚

---

### é¸é … D - %sh ç„¡æ³•å­˜å–å…©ç¨®å„²å­˜

**éŒ¯èª¤åŸå› :** Shell å­˜å–èƒ½åŠ›æè¿°éŒ¯èª¤

**è©³ç´°åˆ†æ:**
%sh magic command å¯¦éš›ä¸Šå¯ä»¥å­˜å–é€™äº›å„²å­˜ï¼š
- **DBFS root:** å¯é€é /dbfs/FileStore è·¯å¾‘å­˜å–
- **Mounted storage:** å¯é€é /dbfs/mnt/ è·¯å¾‘å­˜å–
- Shell æŒ‡ä»¤å¯ä»¥æ“ä½œé€™äº›ä½ç½®çš„æª”æ¡ˆ
- åªæ˜¯èªæ³•ç¨æœ‰ä¸åŒï¼ˆéœ€è¦ /dbfs prefixï¼‰

**å¯¦ä¾‹åé§:**
```bash
%sh
ls /dbfs/FileStore/
ls /dbfs/mnt/data/
```

**æ˜“æ··æ·†é»:**
ä¸äº†è§£ shell ç’°å¢ƒä¸­å­˜å– DBFS çš„è·¯å¾‘å°æ‡‰ã€‚

---

### é¸é … E - DBFS root ä½¿ç”¨æš«å­˜å€å¡Šå„²å­˜ï¼Œmounted æŒä¹…åŒ–

**éŒ¯èª¤åŸå› :** DBFS root çš„å„²å­˜ç‰¹æ€§éŒ¯èª¤æè¿°

**è©³ç´°åˆ†æ:**
é€™å€‹é¸é …åŒ…å«é‡å¤§éŒ¯èª¤ï¼š
- **DBFS root ä¸æ˜¯æš«å­˜çš„:** DBFS root å„²å­˜åœ¨æŒä¹…åŒ–çš„ç‰©ä»¶å„²å­˜ä¸­
- **ä¸æ˜¯å€å¡Šå„²å­˜:** DBFS åº•å±¤æ˜¯ç‰©ä»¶å„²å­˜ï¼Œä¸æ˜¯å€å¡Šå„²å­˜
- **ä¸æœƒåœ¨ session é–“éºå¤±:** DBFS root çš„è³‡æ–™æœƒæŒä¹…ä¿å­˜
- é›–ç„¶ mounted storage ç¢ºå¯¦æŒä¹…åŒ–ï¼Œä½†å° DBFS root çš„æè¿°æ˜¯éŒ¯èª¤çš„

**æ˜“æ··æ·†é»:**
å°‡ cluster çš„æš«å­˜æ€§èˆ‡ DBFS çš„æŒä¹…æ€§æ··æ·†ã€‚

---

## ğŸ§  è¨˜æ†¶æ³•èˆ‡è§£é¡ŒæŠ€å·§

### è¨˜æ†¶å£è¨£
**ã€ŒDBFS æ˜¯å”å®šå±¤ï¼ŒUnix èªæ³•ç‰©ä»¶è—ã€**
- DBFS = File System **Protocol**ï¼Œä¸æ˜¯çœŸæ­£çš„æª”æ¡ˆç³»çµ±
- æä¾› Unix-like èªæ³•ä¾†æ“ä½œåº•å±¤ç‰©ä»¶å„²å­˜

### è§£é¡Œæ­¥é©Ÿ
1. **è­˜åˆ¥ DBFS æœ¬è³ª** - å”å®šå±¤é‚„æ˜¯å¯¦é«”å„²å­˜ï¼Ÿ
2. **ç¢ºèªèªæ³•ç‰¹æ€§** - æ˜¯å¦æä¾› Unix-like ä»‹é¢ï¼Ÿ
3. **æ’é™¤éŒ¯èª¤ç‰¹æ€§** - æ¬Šé™ã€å®‰å…¨ã€æŒä¹…æ€§çš„éŒ¯èª¤æè¿°
4. **é¸æ“‡æº–ç¢ºæè¿°** - æœ€ç²¾ç¢ºåæ˜  DBFS è¨­è¨ˆç†å¿µçš„é¸é …

### å¸¸è¦‹é™·é˜±è­¦ç¤º
âš ï¸ **é™·é˜± 1:** ä»¥ç‚º DBFS æ˜¯å¯¦é«”æª”æ¡ˆç³»çµ± - å¯¦éš›æ˜¯å”å®šå±¤æŠ½è±¡åŒ–
âš ï¸ **é™·é˜± 2:** æ··æ·†å„²å­˜æŒä¹…æ€§ - DBFS root ä¹Ÿæ˜¯æŒä¹…åŒ–çš„

---

## ğŸ“š å®˜æ–¹æ–‡ä»¶èˆ‡å»¶ä¼¸é–±è®€

### å®˜æ–¹æ–‡ä»¶
1. **[DBFS](https://docs.databricks.com/dbfs/index.html)** - DBFS çš„å®Œæ•´ä»‹ç´¹èˆ‡ä½¿ç”¨æ–¹å¼
2. **[Mounting Object Storage](https://docs.databricks.com/dbfs/mounts.html)** - å¦‚ä½• mount å¤–éƒ¨å„²å­˜åˆ° DBFS
3. **[File System Utilities](https://docs.databricks.com/dev-tools/databricks-utils.html#file-system-utilities)** - dbutils.fs çš„è©³ç´°èªªæ˜

### å»¶ä¼¸é–±è®€
- [Best Practices for Data Storage on Databricks](https://docs.databricks.com/data/index.html)

### ç›¸é—œé¡Œç›®
- å…¶ä»– DBFS æ“ä½œç›¸é—œé¡Œç›®
- Unity Catalog èˆ‡æª”æ¡ˆå­˜å–æ¬Šé™ç›¸é—œé¡Œç›®
- å„²å­˜æ¶æ§‹è¨­è¨ˆç›¸é—œé¡Œç›®

---

## ç›¸é—œè³‡æº

### å®˜æ–¹æ–‡ä»¶
- [DBFS](https://docs.databricks.com/dbfs/index.html)
- [Mounting Object Storage](https://docs.databricks.com/dbfs/mounts.html)
