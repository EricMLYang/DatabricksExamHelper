# Explain Why Not - 錯誤選項深度拆解技能

> 深度拆解錯誤選項的混淆點，將「為什麼不對」解釋清楚

---

## 🎯 技能目的

此技能專注於**深度分析單一錯誤選項**，幫助理解：
1. **為什麼這個選項看起來對，但實際上是錯的**
2. **出題者設計這個陷阱的意圖**
3. **如何避免再次誤選類似選項**

適用情境：
- 複習錯題時，針對誤選的選項進行深度分析
- 理解某個特定陷阱類型的設計邏輯
- 鞏固對相似概念的區分能力

---

## 📥 輸入格式

### 必要資訊
```markdown
**題目 ID:** Q-XXX-XXX
**題幹:** [題目描述]
**錯誤選項:** [A/B/C/D]
**選項內容:** [完整選項文字]
**正確答案:** [A/B/C/D]
**正確答案內容:** [完整正解文字]
```

### 選填資訊
- **為什麼我選了這個:** [誤選時的想法]
- **相關技術背景:** [已知的相關概念]

---

## 📤 輸出結構

### 1. 錯誤定性 (What)
明確指出這個選項的錯誤類型：
- 語法錯誤
- 概念混淆
- 參數錯誤
- 行為誤解
- 適用情境錯誤

### 2. 深度拆解 (Why)
分三個層次解釋為什麼錯：

#### 層次 1: 表面錯誤
直接指出選項的明顯問題（語法、拼寫、參數等）

#### 層次 2: 概念對比
將錯誤選項與正確答案、相似概念進行對比，突顯差異

#### 層次 3: 陷阱設計
分析出題者為什麼要設計這個選項，容易誤導哪些人

### 3. 記憶強化 (How)
提供具體方法避免再次誤選：
- 關鍵區分點
- 記憶口訣
- 快速判斷法

---

## 📋 完整使用範例

### 範例 1: 時間單位混淆陷阱

#### 輸入
```markdown
**題目 ID:** Q-MOCK01-023
**題幹:** 在 Delta Lake 中，您需要永久刪除超過 30 天的舊版本資料以節省儲存空間。以下哪個指令可以達成此目的？
**錯誤選項:** A
**選項內容:** VACUUM table_name RETAIN 30 HOURS
**正確答案:** B
**正確答案內容:** VACUUM table_name RETAIN 720 HOURS
**為什麼我選了這個:** 看到題目說 30 天，就直接選了有 30 的選項
```

---

#### 輸出

### 🚫 錯誤定性
**錯誤類型:** 參數錯誤 - 時間單位換算錯誤
**陷阱標籤:** `Unit-Confusion`, `Number-Trap`

---

### 🔍 深度拆解

#### 層次 1: 表面錯誤
此選項僅保留 **30 小時**（約 1.25 天）的資料，而題目要求是「刪除超過 **30 天** 的舊版本」。

時間差距：
- 選項 A: 30 小時 = 1.25 天
- 題目需求: 30 天 = 720 小時
- **差距: 24 倍！**

---

#### 層次 2: 概念對比

| 項目 | 選項 A (錯誤) | 選項 B (正確) |
|------|-------------|-------------|
| 數字 | 30 | 720 |
| 單位 | HOURS | HOURS |
| 實際時間 | 1.25 天 | 30 天 |
| 保留範圍 | 太短 ✗ | 符合需求 ✓ |

**關鍵差異:**
VACUUM 指令的 RETAIN 參數**只接受 HOURS 作為單位**，無法直接使用 DAYS。

**正確換算:**
```
30 天 × 24 小時/天 = 720 小時
```

因此正確答案是 `RETAIN 720 HOURS`，而非 `RETAIN 30 HOURS`。

---

#### 層次 3: 陷阱設計

**出題者意圖:**
測試考生是否：
1. 注意到 VACUUM 只接受 HOURS 作為單位
2. 會進行單位換算，而非直接套用題目中的數字
3. 理解「保留 30 小時」與「保留 30 天」的巨大差異

**為什麼容易誤選:**
1. **數字陷阱** - 題目中的「30 天」與選項中的「30」數字相同
2. **視覺捷徑** - 大腦看到相同數字就直接聯想，忽略單位
3. **經驗偏誤** - 日常生活中常用「天」作為單位，不習慣換算成「小時」

**誤選族群:**
- 初學者：不熟悉 VACUUM 的參數規則
- 粗心者：看到數字相同就選，未注意單位
- 經驗不足者：沒有實際操作過 VACUUM，不知道只能用 HOURS

---

### 💡 記憶強化

#### 關鍵區分點
> **VACUUM RETAIN 只能用 HOURS，遇到「天」必須 × 24**

#### 記憶口訣
"**VACUUM 吸塵器，時間論小時；要用天數算，記得乘廿四**"

#### 快速判斷法
看到 VACUUM RETAIN 題目時：
1. 先確認題目的時間單位（天/小時）
2. 若為「天」，立即換算：天數 × 24 = 小時數
3. 選擇對應小時數的選項

#### 避坑技巧
- ❌ **錯誤思維:** 「題目說 30 天，選有 30 的選項」
- ✅ **正確思維:** 「題目說 30 天 = 720 小時，找 720 的選項」

---

### 🔗 延伸學習

#### 同類型陷阱題目
- `Q-STREAM-042` - Structured Streaming Trigger 的時間單位（seconds vs milliseconds）
- `Q-CLUSTER-018` - Auto-scaling 的時間單位（minutes vs seconds）

#### 官方文件
- [VACUUM | Databricks Documentation](https://docs.databricks.com/sql/language-manual/delta-vacuum.html)
  - 特別注意 RETAIN 參數的說明：「Retention period in hours」

#### 實務建議
在生產環境中，建議：
- 使用註解說明換算邏輯：`-- 30 days × 24 hours = 720 hours`
- 定義常數避免魔法數字：`RETENTION_DAYS = 30; RETENTION_HOURS = RETENTION_DAYS * 24`

---

### 範例 2: 指令用途混淆陷阱

#### 輸入
```markdown
**題目 ID:** Q-MOCK01-023
**題幹:** 在 Delta Lake 中，您需要永久刪除超過 30 天的舊版本資料以節省儲存空間。
**錯誤選項:** D
**選項內容:** OPTIMIZE table_name ZORDER BY (date_column)
**正確答案:** B
**正確答案內容:** VACUUM table_name RETAIN 720 HOURS
**為什麼我選了這個:** 覺得 OPTIMIZE 可以優化儲存空間
```

---

#### 輸出

### 🚫 錯誤定性
**錯誤類型:** 概念混淆 - 指令用途錯誤
**陷阱標籤:** `Command-Purpose`, `Concept-Confusion`

---

### 🔍 深度拆解

#### 層次 1: 表面錯誤
OPTIMIZE 用於**效能優化**（合併小檔案、重新排序），**不會刪除舊版本檔案**。
題目要求「永久刪除舊版本」，但 OPTIMIZE 不會清理任何版本。

---

#### 層次 2: 概念對比

| 維護指令 | 主要功能 | 是否刪除舊版本 | 是否釋放空間 | 使用時機 |
|---------|---------|--------------|-------------|---------|
| **VACUUM** | 清理舊版本檔案 | ✅ 是 | ✅ 是 | 儲存空間不足時 |
| **OPTIMIZE** | 合併小檔案、重新排序 | ❌ 否 | ❌ 否（短期可能增加） | 查詢效能下降時 |
| **DELETE** | 邏輯刪除資料 | ❌ 否 | ❌ 否 | 刪除特定資料 |

**關鍵差異:**
- **VACUUM**: 實體刪除 → 釋放空間
- **OPTIMIZE**: 重組資料 → 提升效能

---

#### 層次 3: 陷阱設計

**出題者意圖:**
測試考生是否清楚區分 Delta Lake 三大維護指令的用途：
- VACUUM → 空間管理
- OPTIMIZE → 效能管理
- DELETE → 資料管理

**為什麼容易誤選:**
1. **詞彙誤導** - "OPTIMIZE" 字面有「優化」之意，容易聯想到「優化儲存空間」
2. **功能重疊** - OPTIMIZE 確實會「整理檔案」，但整理 ≠ 刪除
3. **經驗缺乏** - 沒實際操作過，不知道 OPTIMIZE 反而可能短期增加空間使用

**誤選族群:**
- 初學者：僅從字面意思推測，未深入理解指令用途
- 概念模糊者：知道有這些指令，但不清楚各自的明確功能
- 實務經驗不足者：沒遇過「OPTIMIZE 後空間反增」的情況

---

### 💡 記憶強化

#### 關鍵區分點
> **VACUUM 清空間，OPTIMIZE 提效能；刪舊版找 VACUUM，慢查詢用 OPTIMIZE**

#### 記憶口訣
"**吸塵器（VACUUM）清垃圾，優化器（OPTIMIZE）排整齊；要省空間吸塵器，要跑得快優化器**"

#### 快速判斷法
看到 Delta Lake 維護題目時，依關鍵字判斷：
- 「刪除舊版本」、「釋放空間」、「節省儲存」 → **VACUUM**
- 「查詢慢」、「小檔案多」、「重新排序」 → **OPTIMIZE**
- 「移除資料」、「不再需要」 → **DELETE**

#### 避坑技巧
- ❌ **錯誤聯想:** OPTIMIZE → 優化 → 優化空間 → 刪除舊檔案
- ✅ **正確理解:** OPTIMIZE → 優化效能 → 合併檔案 → 不刪舊版本

---

## 🎯 使用建議

### 何時使用此技能
1. **錯題複習** - 針對誤選的選項進行深入分析
2. **概念釐清** - 區分容易混淆的相似概念
3. **陷阱歸納** - 整理同類型陷阱的共同特徵

### 與 solve-question.md 的差異
| 項目 | solve-question | explain-why-not |
|------|---------------|-----------------|
| 範圍 | 完整題目解析 | 單一錯誤選項 |
| 深度 | 廣而全 | 窄而深 |
| 目的 | 產出標準解析 | 深度理解陷阱 |
| 使用時機 | 初次解題 | 錯題複習 |

---

## 📋 輸出檢查清單

完成深度拆解後，請確認：
- [ ] 明確指出錯誤類型
- [ ] 提供三層次拆解（表面錯誤、概念對比、陷阱設計）
- [ ] 包含記憶強化方法（區分點、口訣、判斷法）
- [ ] 引用官方文件驗證分析
- [ ] 提供同類型題目連結（若有）

---

## 📞 相關資源

- [solve-question.md](./solve-question.md) - 完整題目解析技能
- [generate-variants.md](./generate-variants.md) - 變形題生成技能
- [tooling/tagging-schema.md](../../tooling/tagging-schema.md) - 陷阱標籤定義

---

**深度理解每個錯誤選項，將弱點轉化為優勢！🎯**
